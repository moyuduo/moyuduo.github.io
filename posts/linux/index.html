<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Linux | Moyuduo's Blog</title><meta name=keywords content><meta name=description content="linux命令自查 查看cpu和内存 cpu个数 cat /proc/cpuinfo | grep &#34;physical id&#34; | uniq | wc -l cpu核数 cat /proc/cpuinfo | grep &#34;cpu cores&#34; | uniq cpu型号 cat /proc/cpuinfo | grep 'model name' |uniq 内存大小 cat /proc/meminfo | grep MemTotal 设置linux开机自启动 linux文件/etc/rc.local文件中的内容会linux启动完成后执行，所以可以用来做开机自启动，/etc/rc.local默认是lrwxrwxrwx权限，但是由于它是/etc/rc.d/rc.local的一个软连接，所以/etc/rc.d/rc.local这个文件必须要有执行权限才能开机自启动，而这个人间默认是-rw-rw-rw-权限，所以必须要修改添加执行权限,注意在这个文件中添加开机执行死循环脚本时必须使用&后台执行。
秒级检测脚本 #!/bin/bash while true do count=`ps -ef|grep etcd|grep -v grep|wc -l` if [ $count -eq 0 ]; then cd /opt/etcd-v3.5.0-linux-amd64 ./etcd -listen-client-urls=&#34;http://0.0.0.0:2379&#34; --advertise-client-urls=&#34;http://0.0.0.0:2379&#34; echo &#34;restart etcd at $(date)&#34; >> /opt/etcd-v3.5.0-linux-amd64/record fi sleep 1 done 原理是通过ps -ef|grep按照条件过滤执行的进程，再通过wc -l转换为进程个数，最后通过shell进行判断。"><meta name=author content="Me"><link rel=canonical href=https://examplesite.com/posts/linux/><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.bc1149f4a72aa4858d3a9f71462f75e5884ffe8073ea9d6d5761d5663d651e20.css integrity="sha256-vBFJ9KcqpIWNOp9xRi915YhP/oBz6p1tV2HVZj1lHiA=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://examplesite.com/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=16x16 href=https://examplesite.com/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=https://examplesite.com/%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=https://examplesite.com/%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=https://examplesite.com/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-123-45","auto"),ga("send","pageview"))</script><meta property="og:title" content="Linux"><meta property="og:description" content="linux命令自查 查看cpu和内存 cpu个数 cat /proc/cpuinfo | grep &#34;physical id&#34; | uniq | wc -l cpu核数 cat /proc/cpuinfo | grep &#34;cpu cores&#34; | uniq cpu型号 cat /proc/cpuinfo | grep 'model name' |uniq 内存大小 cat /proc/meminfo | grep MemTotal 设置linux开机自启动 linux文件/etc/rc.local文件中的内容会linux启动完成后执行，所以可以用来做开机自启动，/etc/rc.local默认是lrwxrwxrwx权限，但是由于它是/etc/rc.d/rc.local的一个软连接，所以/etc/rc.d/rc.local这个文件必须要有执行权限才能开机自启动，而这个人间默认是-rw-rw-rw-权限，所以必须要修改添加执行权限,注意在这个文件中添加开机执行死循环脚本时必须使用&后台执行。
秒级检测脚本 #!/bin/bash while true do count=`ps -ef|grep etcd|grep -v grep|wc -l` if [ $count -eq 0 ]; then cd /opt/etcd-v3.5.0-linux-amd64 ./etcd -listen-client-urls=&#34;http://0.0.0.0:2379&#34; --advertise-client-urls=&#34;http://0.0.0.0:2379&#34; echo &#34;restart etcd at $(date)&#34; >> /opt/etcd-v3.5.0-linux-amd64/record fi sleep 1 done 原理是通过ps -ef|grep按照条件过滤执行的进程，再通过wc -l转换为进程个数，最后通过shell进行判断。"><meta property="og:type" content="article"><meta property="og:url" content="https://examplesite.com/posts/linux/"><meta property="og:image" content="https://examplesite.com/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-11-26T14:14:07+08:00"><meta property="article:modified_time" content="2022-11-26T14:14:07+08:00"><meta property="og:site_name" content="Moyuduo's Blog"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://examplesite.com/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="Linux"><meta name=twitter:description content="linux命令自查 查看cpu和内存 cpu个数 cat /proc/cpuinfo | grep &#34;physical id&#34; | uniq | wc -l cpu核数 cat /proc/cpuinfo | grep &#34;cpu cores&#34; | uniq cpu型号 cat /proc/cpuinfo | grep 'model name' |uniq 内存大小 cat /proc/meminfo | grep MemTotal 设置linux开机自启动 linux文件/etc/rc.local文件中的内容会linux启动完成后执行，所以可以用来做开机自启动，/etc/rc.local默认是lrwxrwxrwx权限，但是由于它是/etc/rc.d/rc.local的一个软连接，所以/etc/rc.d/rc.local这个文件必须要有执行权限才能开机自启动，而这个人间默认是-rw-rw-rw-权限，所以必须要修改添加执行权限,注意在这个文件中添加开机执行死循环脚本时必须使用&后台执行。
秒级检测脚本 #!/bin/bash while true do count=`ps -ef|grep etcd|grep -v grep|wc -l` if [ $count -eq 0 ]; then cd /opt/etcd-v3.5.0-linux-amd64 ./etcd -listen-client-urls=&#34;http://0.0.0.0:2379&#34; --advertise-client-urls=&#34;http://0.0.0.0:2379&#34; echo &#34;restart etcd at $(date)&#34; >> /opt/etcd-v3.5.0-linux-amd64/record fi sleep 1 done 原理是通过ps -ef|grep按照条件过滤执行的进程，再通过wc -l转换为进程个数，最后通过shell进行判断。"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://examplesite.com/posts/"},{"@type":"ListItem","position":2,"name":"Linux","item":"https://examplesite.com/posts/linux/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Linux","name":"Linux","description":"linux命令自查 查看cpu和内存 cpu个数 cat /proc/cpuinfo | grep \u0026#34;physical id\u0026#34; | uniq | wc -l cpu核数 cat /proc/cpuinfo | grep \u0026#34;cpu cores\u0026#34; | uniq cpu型号 cat /proc/cpuinfo | grep \u0026#39;model name\u0026#39; |uniq 内存大小 cat /proc/meminfo | grep MemTotal 设置linux开机自启动 linux文件/etc/rc.local文件中的内容会linux启动完成后执行，所以可以用来做开机自启动，/etc/rc.local默认是lrwxrwxrwx权限，但是由于它是/etc/rc.d/rc.local的一个软连接，所以/etc/rc.d/rc.local这个文件必须要有执行权限才能开机自启动，而这个人间默认是-rw-rw-rw-权限，所以必须要修改添加执行权限,注意在这个文件中添加开机执行死循环脚本时必须使用\u0026amp;后台执行。\n秒级检测脚本 #!/bin/bash while true do count=`ps -ef|grep etcd|grep -v grep|wc -l` if [ $count -eq 0 ]; then cd /opt/etcd-v3.5.0-linux-amd64 ./etcd -listen-client-urls=\u0026#34;http://0.0.0.0:2379\u0026#34; --advertise-client-urls=\u0026#34;http://0.0.0.0:2379\u0026#34; echo \u0026#34;restart etcd at $(date)\u0026#34; \u0026gt;\u0026gt; /opt/etcd-v3.5.0-linux-amd64/record fi sleep 1 done 原理是通过ps -ef|grep按照条件过滤执行的进程，再通过wc -l转换为进程个数，最后通过shell进行判断。","keywords":[],"articleBody":"linux命令自查 查看cpu和内存 cpu个数 cat /proc/cpuinfo | grep \"physical id\" | uniq | wc -l cpu核数 cat /proc/cpuinfo | grep \"cpu cores\" | uniq cpu型号 cat /proc/cpuinfo | grep 'model name' |uniq 内存大小 cat /proc/meminfo | grep MemTotal 设置linux开机自启动 linux文件/etc/rc.local文件中的内容会linux启动完成后执行，所以可以用来做开机自启动，/etc/rc.local默认是lrwxrwxrwx权限，但是由于它是/etc/rc.d/rc.local的一个软连接，所以/etc/rc.d/rc.local这个文件必须要有执行权限才能开机自启动，而这个人间默认是-rw-rw-rw-权限，所以必须要修改添加执行权限,注意在这个文件中添加开机执行死循环脚本时必须使用\u0026后台执行。\n秒级检测脚本 #!/bin/bash while true do count=`ps -ef|grep etcd|grep -v grep|wc -l` if [ $count -eq 0 ]; then cd /opt/etcd-v3.5.0-linux-amd64 ./etcd -listen-client-urls=\"http://0.0.0.0:2379\" --advertise-client-urls=\"http://0.0.0.0:2379\" echo \"restart etcd at $(date)\" \u003e\u003e /opt/etcd-v3.5.0-linux-amd64/record fi sleep 1 done 原理是通过ps -ef|grep按照条件过滤执行的进程，再通过wc -l转换为进程个数，最后通过shell进行判断。\n这种方式本质上是通过循环来进行判断，相比于crontab而言，时间可以精确到秒，而crontab的最小单位是分钟\n单行命令直接增加cpu占有率到100% for i in `seq 1 $(cat /proc/cpuinfo |grep \"physical id\" |wc -l)`; do dd if=/dev/zero of=/dev/null \u0026 done 说明: cat /proc/cpuinfo |grep \"physical id\" | wc -l 可以获得CPU的个数,　我们将其表示为N。 seq 1 N 用来生成１到Ｎ之间的数字 for i in `seq 1 N`; 就是循环执行命令,从１到Ｎ dd if=/dev/zero of=/dev/null 执行dd命令,　输出到/dev/null, 实际上只占用CPU,　没有IO操作. 由于连续执行Ｎ个(Ｎ是ＣＰＵ个数)的dd 命令, 且使用率为100%,　这时调度器会调度每个dd命令在不同的CPU上处理. 最终就实现所有ＣＰＵ占用率100% 测试完毕后，必须使用top命令查看cpu使用率，并kill掉脚本的进程\nfind find path -option name option常用的有 name 按照名字查找文件，支持通配符 type 按照类型查找，d为目录、c为字节型文件、f一般文件、s为socket size ssh远程免密登录 #生成rsa秘钥 ssh-keygen #把id_rsa.pub文件拷贝打要远程登录的目标机器,并改名为authorized_keys #在拷贝前一定要保证有/root/.ssh这个目录，可以是用ssh-keygen生成秘钥对来创建该目录，也可以手动创建该目录 scp id_rsa.pub root@192.168.37.152:/root/authorized_keys #配置完成后测试 ssh root@192.168.37.152 \"ls -l /root\" #或 ssh 192.168.37.152 \"ls -l /root\" 配置hosts本地DNS vim /etc/hosts #添加 ip\t域名 防火墙操作 #开放端口 firewall-cmd --add-port=9092/tcp --permanent #重新加载防火墙配置 firewall-cmd --reload #查询端口释放开放 firewall-cmd --query-port=9092/tcp #关闭端口 firewall-cmd --remove-port=9092/tcp --permanent shell脚本中使用其他用户执行脚本 #切换用户执行命令 su - user -c command #切换用户执行一个shell脚本 su - user -s /bin/bash xxx.sh #参考：https://www.cnblogs.com/bigben0123/archive/2013/05/07/3064843.html 配置yum源 cd /etc/yum.repos.d/ curl -O http://mirrors.aliyun.com/repo/Centos-7.repo #备份原来的yum源 mv CentOS-Base.repo CentOS-Base.repo.bak #修改yum源为下载的yum源 mv Centos-7.repo CentOS-Base.repo yum clean all yum makecache yum update wsl下ubuntu设置密码找回密码 cmd打开powershell 输入ubuntu按tab选择要重置的虚拟机 ubuntu.exe conifg –default-user root 打开ubuntu,会切换指定用户登录且不需要密码，passwd修改密码 ubuntu更新apt源 在https://opsx.alibaba.com/mirror找到对应的ubuntu版本 sudo mv /etc/apt/sources.list /etc/apt/sources.list_backup 将 sources.list 文件备份 sudo vim /etc/apt/sources.list写入配置 sudo apt-get update 更新apt软件源 vim vim模式：\n普通默认：使用vim进来默认就是 view模式：按v进入，可以使用HJKL来移动光标选择文本 view line模式：按V进入，使用JK可上下移动光标来按行选择文本 插入默认：按i、a、o都可进入，可以插入文本 在vim的普通模式中可以使用HJKL四个键来控制光标的上下左右移动，H是光标左移、J是光标下移、K是光标上移、L是光标右移\n在普通模式下，按b键会跳转到单词的开头或上一个单词开头(当前以及处于单词开头),按w键会跳转到下一个单词的开头\n在普通模式下可以使用f+字符来对当前行光标之后进行查找包含当前查找字符的下一处，查找到会把光标移动到下一处对应的查找字符，并且可以使用；键来继续在当前行向后查找，使用，键来在当前行向前查找\n在普通模式下使用F+字符来对当前行光标之前查找包含当前查找字符的上一处\n可以使用:set nu来设置vim显示行号，但是这种方式退出后再次进入就失效了，可以在当前用户的家目录下建立.vimrc文件来设置当前用户的个人vim设置，也可建立/etc/vimrc来配置系统级别的vim设置\n使用:set nonu来取消vim行号显示\n在view模式下，按iw可以选中当前单词，按aw可以选中当前单词及后面的所有空格\n在普通模式下按d、c、y、v都可以进入对应的待决模式\nd是删除模式，例如要删除一个单词就可以使用diw或者daw\nc是修改模式，也是用于删除，例如：ciw或caw就可删除一个单词，它与删除模式不同的是，删除模式删除之后还是在普通模式，而修改模式删除之后就进入插入模式\ny是复制模式，可以使用yiw或yaw来复制一个单词，然后使用p来粘贴\n使用m + 符号来设置一个标记，然后可以使用` + 符号 来快速跳转到标记的位置\n普通模式下按V进入view line模式使用，JK来选择一个范围的内容，按y进行赋值，然后可以p进行粘贴\n在普通模式下可以使用ctl + b向上翻页，ctl + f向下翻页，ctl + u向上翻半页，ctl + d向下翻半页\n在普通模式下输入:/pattern 来进行查找，查找到的单词会高亮显示，可以按n来进行跳转，可以使用:/xxx来搜索一个不存在的关键词或：noh来取消高亮显示\n在普通模式下输入:%s/pattern/string/g 来进行全局的替换，其中pattern是待替换的词，string是替换后的词\n在普通模式下可以使用gg来跳转到首行第一个字符，使用G可以跳转到最后一行最后一个字符，使用：n可以跳转到指定行，n为行号\n在普通模式下按0可以跳转当前行的行首，按$即ctl + 4可以跳转到行末\n使用:e! 来退出文档编辑并重新打开文档\n使用ngg或nG或:n 来跳转到指定的行，n为行号\n用户管理 #添加用户 useradd [options] options: -d 指定家目录，默认会在/home目录下创建和用户名同名的家目录，如果给用户指定的家目录不存在可以使用-m参数指定不存在就创建 -g 指定用户所属的组，如果指定的组不存在则创建失败，一个用户只能所属与一个组 #删除用户 userdel [options] options: -r 会把用户的家目录一并删除 #修改用户，主要是修改用户相关组合家目录，并不是修改名字 usermod [options] 参数options和useradd的类似,但是可以使用-l参数来修改用户名,ex：usermod -l new_name old_name #添加组 groupadd [options] options: -g 指定组编号 #删除分组 groupdel #修改组 groupmod [options] options:和groupadd类似但是可以使用-n参数来修改组名,ex：groupmod -n new_group_name old_group_name #用户密码管理 passwd [options] 如果不指定参数的话那么可以给用户设置密码，如果指定参数的话则用户下次登录就要相关限制 options: -d 删除密码，以后该用户登录就没有密码了 -l 锁定账户 -u 解锁账户 -f 强制执行 tail 查看文件末内容\n#默认显示文件的最后10行 tail /filename #-f参数可使循环读取，在读取日志文件时可以实时查看日志 tail -f xxx.log #-n参数可以指定显示文件末的行数，默认为10 tail -n 20 -f xxx.log linux链接 硬连接：多个文件的副本，会随任意文件的修改而修改，但是删除其中的文件，并不会影响其他文件\n软连接：软连接相当于创建了一个快捷方式，删除软连接不影响源文件\necho \"init\" \u003e f1.txt #对f1.txt创建名为f2.txt的硬连接 ln f1.txt f2.txt # -s参数指定创建软连接 ln -s [链接指向的目标] [软链接名称] ln -s f1.txt f3.txt ls -li 1094956 -rw-rw-r-- 2 aiiqh aiiqh 5 Oct 13 12:01 f1.txt 1094956 -rw-rw-r-- 2 aiiqh aiiqh 5 Oct 13 12:01 f2.txt #inode号相同 1094958 lrwxrwxrwx 1 aiiqh aiiqh 6 Oct 13 12:01 f3.txt -\u003e f1.txt rm -f f1.txt cat f2.txt #init cat f3.txt #cat: f3.txt: No such file or directory 查看文件夹内文件大小 cd / du -h --max-depth=1 nc 用于快速启动一个tcp或udp服务器\n#安装 yum install -y nc #使用-l xxx参数用于启动一个在指定端口上的tcp(默认)服务 nc -l 5000 #使用-w xxx参数指定建立连接的超时时间 nc -l 5000 -w 5 #使用nc ip 端口号 来与外部tcp服务建立连接 nc 127.0.0.1 22 #使用-k参数来指定允许多个连接，不指定该参数默认只允许建立一个链接 nc -l 5000 -k #使用-v参数来显示详细信息 nc -l 5000 -v #使用-u参数来指定使用udp，不使用该参数默认使用tcp nc -l 5000 -uv nc -u 127.0.0.1 5000 #使用-p参数来指定使用的源端口 nc -u -p 8888 127.0.0.1 5000 lsns lsns用于查看linux下的namespace\nlsns -t {namespace} lsns -t pid lsns -t net brctl [root@centos72 ~]# brctl -bash: brctl: command not found yum install -y bridge-utils #创建虚拟网桥 brctl addbr br0 #查看 ip a 11: br0: mtu 1500 qdisc noop state DOWN group default qlen 1000 link/ether 92:47:2a:9f:bf:3f brd ff:ff:ff:ff:ff:ff #关闭STP(生成树协议)因为我们只有一个路由器，是绝对不可能形成一个环的 brctl stp br0 off #添加以太物理接口 brctl addif br0 ens33 #删除网桥物理接口 brctl delif br0 ens33 #给网桥分配一个ip地址 ifconfig br0 172.18.0.1 #启用网桥 ifconfig br0 up #关闭网桥 ifconfig br0 down #删除网桥 brctl delbr b grep grep用于过滤字符，适用于进行日志查询，grep不会一次把所有内容加载到内存，而是一次加载一部分进行匹配后继续向下匹配，相较于cat、vim、more更适用于大量日志分析。\n-C 参数用于指定显示匹配内容上下文的行数，即匹配内容的上下n行都会输出 grep -C 5 'aaa' text -B参数指定显示匹配内容及前n行 -A参数指定显示匹配内容及后n行 -I 忽略大小写 -o 只显示匹配的内容 -c 统计过滤到的内容的行数 -n 显示行号 -v 剔除匹配到的内容 - w 精确 #基础正则，直接用grep就可以使用 . 表示任意字符 grep 'A.C' text #可匹配ABC A1C A+C ... ^ 匹配行开头 $ 匹配行结尾 ^$ 匹配空行 * 表示前一个字符出现0次或0次以上 .* 表示匹配任意字符，包括空行 0* 会匹配到任意字符，因为*表示0个或0个以上字符，所以可以匹配到空字符，而每个行都有空字符 [] 中括号表示匹配中括号的内的任一字符，中括号内如果有特殊字符，那么这些字符都被去除特殊含义 grep '[abc]123' #可以匹配 a123 b123 c123 grep '[a-c]123' #同上 grep '[abc|.,]123' #中括号内的 | . , 都被去除特殊含义，可以匹配到 |123 .123 ,123 #扩展正则，使用grep -E 或 egrep + 前一个字符出现了0次以上 | 表示或者 grep -E 'abc|123' #匹配abc 或 123 () 作为一个整体，可看做一个字符 grep -E 'a(b|c)d' #匹配 abd 或 acd {m,n} 表示前一次字符出现几次 grep -E 'abc{1,3}' #c出现1次以上3次即一下 匹配 abc abcc abccc grep -E 'abc{1,}' #只指定最少出现几次，而不指定上界 grep -E 'abc{,3}' #只指定上界，而不指定下界 grep -E 'abc{1}' #恰好出现几次 ，匹配abc grep -E '(a{1,}b{1,}c{1,}){1,}' #匹配 abc aabbcc aabbccc ? 指定前一个字符出现0次或一次 grep -E 'abc?' #匹配ab 或 abc EOF 向文件test.sh里输入内容\n[root@slave-server opt]# cat \u003c\u003c EOF \u003etest.sh 123123123 3452354345 asdfasdfs EOF cat \u003c\u003c EOF \u003e test.go package main import ( \"fmt\" \"runtime\" ) func main() { fmt.Println(\"cpu:\", runtime.NumCPU()) } EOF alias 设置别名:\nalias k='kubectl' 查看已经设置的别名：\nalias -p 删除别名：\nunalias k 设置别名每次登陆可用：\n默认使用 alias 设置的别名仅本次登陆有效，如果想每次登陆都能使用别名，可以把alias设置别名的命令放在~/.bashrc文件中。\n清空文件内容 使用vi/vim打开文件，输入%d即清空,:wq保存即可 使用cat /dev/null \u003e file 使用echo \"\" \u003e file shell脚本中路径问题 在shell中如果通过$PWD获取路径，那么获取到的值是指向shell脚本时的路径,如test.sh脚本在/etc路径下，但是执行的时候是在/root路径下执行./etc/test.sh那么$PWD获取到的值就是/root\nbase64 base64加密 base64 echo \"abc\" | base64 base64解码 base64 -d echo \"YWJjCg==\" | base64 -d 环境变量 KUBECONFIG=config.yaml k get ns #暴露的环境变量仅改行命令有效 export KUBECONFIG=config.yaml #暴露的环境变量当前终端有效，新开的终端对该环境变量不可见 k get ns 常用快捷键 #清屏 ctrl + l #跳转到上一条历史命令,相当于 ↑键 ctrl + p #跳转到下一条命令,相当于 ↓键 ctrl + n #删除光标指向字符 ctrl + d #命令行中向前移动一个字符 ctrl + b #命令行中向后移动一个字符 ctrl + f #命令行中向前移动一个单词 alt + b #命令行中向后移动一个单词 alt + f #移动到命令行最前端 ctrl + a #移动到命令行最后端 ctrl + e #停止记录命令行输入 ctrl + s #回复记录命令行输入 ctrl + q #根据关键字搜索历史命令，如果有多条命令被匹配到可以ctrl + r 进行切换选择，然后按tab可以把该命令显示到命令行，或者直接enter直接执行该命令 ctrl + r 查看端口占用 # -a 参数列出所有状态的端口占用，监听的端口、已建立连接的端口 # -n 参数不进行name解析显示ip地址 # -p 参数显示端口相关程序的pid # -t 参数显示tcp相关的端口占用 # -u 参数显示udp相关的端口占用 netstat -anp 脚本后台运行 使用\u0026在终端断连之后继续执行:sh test.sh \u003e test.log \u0026 使用nohup加\u0026可以在终端断连之后继续执行：nohup sh test.sh \u003e test.log \u0026 linux运行级别 # 0 关机 # 1 单用户 # 2 多用户，无网络模式 # 3 完全多用户模式 # 4 用户自定义级别 # 5 图形化界面多用户 # 6 重启 runlevel N 3 init 命令加对应的级别可以切换到不同的级别 init 6 正则 标准正则 匹配开头\n[root@centos72 shell_t]# cat /etc/passwd |grep ^a adm:x:3:4:adm:/var/adm:/sbin/nologin 匹配结尾\n[root@centos72 shell_t]# cat /etc/passwd |grep n$ bin:x:1:1:bin:/bin:/sbin/nologin daemon:x:2:2:daemon:/sbin:/sbin/nologin adm:x:3:4:adm:/var/adm:/sbin/nologin . 号,匹配任意一个字符\n[root@centos72 shell_t]# cat /etc/passwd |grep r..t root:x:0:0:root:/root:/bin/bash operator:x:11:0:operator:/root:/sbin/nologin ftp:x:14:50:FTP User:/var/ftp:/sbin/nologin dockerroot:x:991:988:Docker User:/var/lib/docker:/sbin/nologin * 号，不单独使用，表示匹配*号之前的字符0次或多次\n#ro*t 匹配 rot root roooot [root@centos72 shell_t]# cat /etc/passwd |grep ro*t root:x:0:0:root:/root:/bin/bash operator:x:11:0:operator:/root:/sbin/nologin dockerroot:x:991:988:Docker User:/var/lib/docker:/sbin/nologin .* 匹配任意一个字符任意次，即匹配任意字符串\n[root@centos72 shell_t]# cat /etc/passwd |grep r.*t root:x:0:0:root:/root:/bin/bash operator:x:11:0:operator:/root:/sbin/nologin ftp:x:14:50:FTP User:/var/ftp:/sbin/nologin [] 匹配字符区间\n[6,8] 匹配6或者8 [0-9] 匹配0-9的任意数字 [^0-9] 匹配任意非数字字符 [0-9]* 匹配任意数字串 [a-z] 匹配a-z的字符 [a-Z] 匹配a-Z的任意字符 [root@centos72 shell_t]# cat /etc/passwd |grep r[a-z]*t root:x:0:0:root:/root:/bin/bash operator:x:11:0:operator:/root:/sbin/nologin sshd:x:74:74:Privilege-separated SSH:/var/empty/sshd:/sbin/nologin rabbitmq:x:997:995:RabbitMQ messaging server:/var/lib/rabbitmq:/bin/bash gitlab-prometheus:x:992:989::/var/opt/gitlab/prometheus:/bin/sh dockerroot:x:991:988:Docker User:/var/lib/docker:/sbin/nologin \\转义\n#匹配$ grep \\$ test.sh 扩展正则 {}指定前一个字符出现几次\n{n}这种写法是扩展正则，grep使用扩展正则需要加 -E 参数 [root@centos72 shell_t]# grep -E ro{2}t /etc/passwd root:x:0:0:root:/root:/bin/bash operator:x:11:0:operator:/root:/sbin/nologin dockerroot:x:991:988:Docker User:/var/lib/docker:/sbin/nologin #{n,}匹配前一个字符至少n次 [root@centos72 shell_t]# grep -E \"ro{0,}t\" /etc/passwd root:x:0:0:root:/root:/bin/bash operator:x:11:0:operator:/root:/sbin/nologin dockerroot:x:991:988:Docker User:/var/lib/docker:/sbin/nologin #{,n}匹配前一个字符至多n次 [root@centos72 shell_t]# grep -E \"ro{,2}t\" /etc/passwd root:x:0:0:root:/root:/bin/bash operator:x:11:0:operator:/root:/sbin/nologin dockerroot:x:991:988:Docker User:/var/lib/docker:/sbin/nologin {n,m}匹配前一个字符n到m次 [root@centos72 shell_t]# grep -E \"ro{1,2}t\" /etc/passwd root:x:0:0:root:/root:/bin/bash operator:x:11:0:operator:/root:/sbin/nologin dockerroot:x:991:988:Docker User:/var/lib/docker:/sbin/nologin +号匹配前一个字符一次及以上\ncat \u003c\u003c EOF | grep -E \"go+\" g go goo goole EOF go goo goole ?号匹配前一个字符0次或一次\ncat \u003c\u003c EOF | grep -E \"go?\" g go goo goole EOF g #匹配到g go #匹配到go goo #匹配到go goole #匹配到go 匹配13开头的手机号码\ngrep -E \"13[0-9]{9}\" phone.txt cat cat命令用来查看一个文件的内容\ncat test.sh cat命令配合EOF加输出重定向可以向文件中写入内容\ncat \u003c test.sh name=\"tom\" echo \"hello,\\${name}!\" #在EOF中使用$需要加\\转移 EOF cat test.sh name=\"tom\" echo \"hello, ${name}!\" cut cut命令用于获取文件指定的列，并输出到标准输出\n#-d指定分隔符 -f指定列 cat \u003c","wordCount":"3073","inLanguage":"en","datePublished":"2022-11-26T14:14:07+08:00","dateModified":"2022-11-26T14:14:07+08:00","author":{"@type":"Person","name":"Me"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://examplesite.com/posts/linux/"},"publisher":{"@type":"Organization","name":"Moyuduo's Blog","logo":{"@type":"ImageObject","url":"https://examplesite.com/%3Clink%20/%20abs%20url%3E"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://examplesite.com/ accesskey=h title="Moyuduo's Blog (Alt + H)"><img src=https://examplesite.com/apple-touch-icon.png alt aria-label=logo height=35>Moyuduo's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://examplesite.com/categories/ title=categories><span>categories</span></a></li><li><a href=https://examplesite.com/tags/ title=tags><span>tags</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://examplesite.com/>Home</a>&nbsp;»&nbsp;<a href=https://examplesite.com/posts/>Posts</a></div><h1 class=post-title>Linux</h1><div class=post-meta><span title='2022-11-26 14:14:07 +0800 +0800'>November 26, 2022</span>&nbsp;·&nbsp;15 min&nbsp;·&nbsp;3073 words&nbsp;·&nbsp;Me&nbsp;|&nbsp;<a href=https://github.com/%3cpath_to_repo%3e/content/posts/linux.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=post-content><h1 id=linux命令自查>linux命令自查<a hidden class=anchor aria-hidden=true href=#linux命令自查>#</a></h1><h2 id=查看cpu和内存>查看cpu和内存<a hidden class=anchor aria-hidden=true href=#查看cpu和内存>#</a></h2><h3 id=cpu个数>cpu个数<a hidden class=anchor aria-hidden=true href=#cpu个数>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>cat /proc/cpuinfo <span class=p>|</span> grep <span class=s2>&#34;physical id&#34;</span> <span class=p>|</span> uniq <span class=p>|</span> wc -l
</span></span></code></pre></div><h3 id=cpu核数>cpu核数<a hidden class=anchor aria-hidden=true href=#cpu核数>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>cat /proc/cpuinfo <span class=p>|</span> grep <span class=s2>&#34;cpu cores&#34;</span> <span class=p>|</span> uniq
</span></span></code></pre></div><h3 id=cpu型号>cpu型号<a hidden class=anchor aria-hidden=true href=#cpu型号>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>cat /proc/cpuinfo <span class=p>|</span> grep <span class=s1>&#39;model name&#39;</span> <span class=p>|</span>uniq
</span></span></code></pre></div><h3 id=内存大小>内存大小<a hidden class=anchor aria-hidden=true href=#内存大小>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>cat /proc/meminfo <span class=p>|</span> grep MemTotal
</span></span></code></pre></div><h2 id=设置linux开机自启动>设置linux开机自启动<a hidden class=anchor aria-hidden=true href=#设置linux开机自启动>#</a></h2><p>linux文件<code>/etc/rc.local</code>文件中的内容会linux启动完成后执行，所以可以用来做开机自启动，<code>/etc/rc.local</code>默认是lrwxrwxrwx权限，但是由于它是<code>/etc/rc.d/rc.local</code>的一个软连接，所以<code>/etc/rc.d/rc.local</code>这个文件必须要有执行权限才能开机自启动，而这个人间默认是-rw-rw-rw-权限，所以必须要修改添加执行权限,注意在这个文件中添加开机执行死循环脚本时必须使用<code>&</code>后台执行。</p><h2 id=秒级检测脚本>秒级检测脚本<a hidden class=anchor aria-hidden=true href=#秒级检测脚本>#</a></h2><pre tabindex=0><code class=language-she data-lang=she>#!/bin/bash
while true
do
	count=`ps -ef|grep etcd|grep -v grep|wc -l`
	if [ $count -eq 0 ]; then
		cd /opt/etcd-v3.5.0-linux-amd64
		./etcd -listen-client-urls=&#34;http://0.0.0.0:2379&#34; --advertise-client-urls=&#34;http://0.0.0.0:2379&#34;
		echo &#34;restart etcd at $(date)&#34; &gt;&gt; /opt/etcd-v3.5.0-linux-amd64/record
	fi
	sleep 1
done
</code></pre><p>原理是通过ps -ef|grep按照条件过滤执行的进程，再通过wc -l转换为进程个数，最后通过shell进行判断。</p><p>这种方式本质上是通过循环来进行判断，相比于crontab而言，时间可以精确到秒，而crontab的最小单位是分钟</p><h2 id=单行命令直接增加cpu占有率到100>单行命令直接增加cpu占有率到100%<a hidden class=anchor aria-hidden=true href=#单行命令直接增加cpu占有率到100>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=k>for</span> i in <span class=sb>`</span>seq <span class=m>1</span> <span class=k>$(</span>cat /proc/cpuinfo <span class=p>|</span>grep <span class=s2>&#34;physical id&#34;</span> <span class=p>|</span>wc -l<span class=k>)</span><span class=sb>`</span><span class=p>;</span> <span class=k>do</span> dd <span class=k>if</span><span class=o>=</span>/dev/zero <span class=nv>of</span><span class=o>=</span>/dev/null <span class=p>&amp;</span> <span class=k>done</span>
</span></span><span class=line><span class=cl>说明:
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>cat /proc/cpuinfo <span class=p>|</span>grep <span class=s2>&#34;physical id&#34;</span> <span class=p>|</span> wc -l 可以获得CPU的个数,　我们将其表示为N。
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>seq <span class=m>1</span> N 用来生成１到Ｎ之间的数字
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>for</span> i in <span class=sb>`</span>seq <span class=m>1</span> N<span class=sb>`</span><span class=p>;</span> 就是循环执行命令,从１到Ｎ
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>dd <span class=k>if</span><span class=o>=</span>/dev/zero <span class=nv>of</span><span class=o>=</span>/dev/null 执行dd命令,　输出到/dev/null, 实际上只占用CPU,　没有IO操作.
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>由于连续执行Ｎ个<span class=o>(</span>Ｎ是ＣＰＵ个数<span class=o>)</span>的dd 命令, 且使用率为100%,　这时调度器会调度每个dd命令在不同的CPU上处理.
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>最终就实现所有ＣＰＵ占用率100%
</span></span></code></pre></div><p>测试完毕后，必须使用top命令查看cpu使用率，并kill掉脚本的进程</p><h2 id=find>find<a hidden class=anchor aria-hidden=true href=#find>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>find path  -option name
</span></span><span class=line><span class=cl>option常用的有
</span></span><span class=line><span class=cl>name 按照名字查找文件，支持通配符
</span></span><span class=line><span class=cl><span class=nb>type</span> 按照类型查找，d为目录、c为字节型文件、f一般文件、s为socket
</span></span><span class=line><span class=cl>size 
</span></span></code></pre></div><h2 id=ssh远程免密登录>ssh远程免密登录<a hidden class=anchor aria-hidden=true href=#ssh远程免密登录>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=c1>#生成rsa秘钥</span>
</span></span><span class=line><span class=cl>ssh-keygen
</span></span><span class=line><span class=cl><span class=c1>#把id_rsa.pub文件拷贝打要远程登录的目标机器,并改名为authorized_keys</span>
</span></span><span class=line><span class=cl><span class=c1>#在拷贝前一定要保证有/root/.ssh这个目录，可以是用ssh-keygen生成秘钥对来创建该目录，也可以手动创建该目录</span>
</span></span><span class=line><span class=cl>scp id_rsa.pub root@192.168.37.152:/root/authorized_keys
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>#配置完成后测试</span>
</span></span><span class=line><span class=cl>ssh root@192.168.37.152 <span class=s2>&#34;ls -l /root&#34;</span> 
</span></span><span class=line><span class=cl><span class=c1>#或</span>
</span></span><span class=line><span class=cl>ssh 192.168.37.152 <span class=s2>&#34;ls -l /root&#34;</span>
</span></span></code></pre></div><h2 id=配置hosts本地dns>配置hosts本地DNS<a hidden class=anchor aria-hidden=true href=#配置hosts本地dns>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>vim /etc/hosts
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>#添加</span>
</span></span><span class=line><span class=cl>ip	域名
</span></span></code></pre></div><h2 id=防火墙操作>防火墙操作<a hidden class=anchor aria-hidden=true href=#防火墙操作>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=c1>#开放端口</span>
</span></span><span class=line><span class=cl>firewall-cmd --add-port<span class=o>=</span>9092/tcp --permanent
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>#重新加载防火墙配置</span>
</span></span><span class=line><span class=cl>firewall-cmd --reload
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>#查询端口释放开放</span>
</span></span><span class=line><span class=cl>firewall-cmd --query-port<span class=o>=</span>9092/tcp
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>#关闭端口</span>
</span></span><span class=line><span class=cl>firewall-cmd --remove-port<span class=o>=</span>9092/tcp --permanent
</span></span></code></pre></div><h2 id=shell脚本中使用其他用户执行脚本>shell脚本中使用其他用户执行脚本<a hidden class=anchor aria-hidden=true href=#shell脚本中使用其他用户执行脚本>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=c1>#切换用户执行命令</span>
</span></span><span class=line><span class=cl>su - user -c <span class=nb>command</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>#切换用户执行一个shell脚本</span>
</span></span><span class=line><span class=cl>su - user -s /bin/bash xxx.sh
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>#参考：https://www.cnblogs.com/bigben0123/archive/2013/05/07/3064843.html</span>
</span></span></code></pre></div><h2 id=配置yum源>配置yum源<a hidden class=anchor aria-hidden=true href=#配置yum源>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=nb>cd</span> /etc/yum.repos.d/ 
</span></span><span class=line><span class=cl>curl -O http://mirrors.aliyun.com/repo/Centos-7.repo
</span></span><span class=line><span class=cl><span class=c1>#备份原来的yum源</span>
</span></span><span class=line><span class=cl>mv CentOS-Base.repo CentOS-Base.repo.bak 
</span></span><span class=line><span class=cl><span class=c1>#修改yum源为下载的yum源</span>
</span></span><span class=line><span class=cl>mv Centos-7.repo CentOS-Base.repo
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>yum clean all
</span></span><span class=line><span class=cl>yum makecache
</span></span><span class=line><span class=cl>yum update
</span></span></code></pre></div><h2 id=wsl下ubuntu设置密码找回密码>wsl下ubuntu设置密码找回密码<a hidden class=anchor aria-hidden=true href=#wsl下ubuntu设置密码找回密码>#</a></h2><ol><li>cmd打开powershell</li><li>输入ubuntu按tab选择要重置的虚拟机 ubuntu.exe conifg &ndash;default-user root</li><li>打开ubuntu,会切换指定用户登录且不需要密码，passwd修改密码</li></ol><h2 id=ubuntu更新apt源>ubuntu更新apt源<a hidden class=anchor aria-hidden=true href=#ubuntu更新apt源>#</a></h2><ol><li>在https://opsx.alibaba.com/mirror找到对应的ubuntu版本</li><li>sudo mv /etc/apt/sources.list /etc/apt/sources.list_backup 将 sources.list 文件备份</li><li>sudo vim /etc/apt/sources.list写入配置</li><li>sudo apt-get update 更新apt软件源</li></ol><h2 id=vim>vim<a hidden class=anchor aria-hidden=true href=#vim>#</a></h2><p>vim模式：</p><ol><li>普通默认：使用vim进来默认就是</li><li>view模式：按v进入，可以使用HJKL来移动光标选择文本</li><li>view line模式：按V进入，使用JK可上下移动光标来按行选择文本</li><li>插入默认：按i、a、o都可进入，可以插入文本</li></ol><p>在vim的普通模式中可以使用HJKL四个键来控制光标的上下左右移动，H是光标左移、J是光标下移、K是光标上移、L是光标右移</p><p>在普通模式下，按b键会跳转到单词的开头或上一个单词开头(当前以及处于单词开头),按w键会跳转到下一个单词的开头</p><p><img loading=lazy src=./images/Snipaste_2021-09-19_13-41-36.jpg alt></p><p>在普通模式下可以使用f+字符来对当前行光标之后进行查找包含当前查找字符的下一处，查找到会把光标移动到下一处对应的查找字符，并且可以使用；键来继续在当前行向后查找，使用，键来在当前行向前查找</p><p>在普通模式下使用F+字符来对当前行光标之前查找包含当前查找字符的上一处</p><p>可以使用:set nu来设置vim显示行号，但是这种方式退出后再次进入就失效了，可以在当前用户的家目录下建立.vimrc文件来设置当前用户的个人vim设置，也可建立/etc/vimrc来配置系统级别的vim设置</p><p>使用:set nonu来取消vim行号显示</p><p>在view模式下，按iw可以选中当前单词，按aw可以选中当前单词及后面的所有空格</p><p>在普通模式下按d、c、y、v都可以进入对应的待决模式</p><p>d是删除模式，例如要删除一个单词就可以使用diw或者daw</p><p>c是修改模式，也是用于删除，例如：ciw或caw就可删除一个单词，它与删除模式不同的是，删除模式删除之后还是在普通模式，而修改模式删除之后就进入插入模式</p><p>y是复制模式，可以使用yiw或yaw来复制一个单词，然后使用p来粘贴</p><p>使用m + 符号来设置一个标记，然后可以使用` + 符号 来快速跳转到标记的位置</p><p>普通模式下按V进入view line模式使用，JK来选择一个范围的内容，按y进行赋值，然后可以p进行粘贴</p><p>在普通模式下可以使用ctl + b向上翻页，ctl + f向下翻页，ctl + u向上翻半页，ctl + d向下翻半页</p><p>在普通模式下输入:/pattern 来进行查找，查找到的单词会高亮显示，可以按n来进行跳转，可以使用:/xxx来搜索一个不存在的关键词或：noh来取消高亮显示</p><p>在普通模式下输入:%s/pattern/string/g 来进行全局的替换，其中pattern是待替换的词，string是替换后的词</p><p>在普通模式下可以使用gg来跳转到首行第一个字符，使用G可以跳转到最后一行最后一个字符，使用：n可以跳转到指定行，n为行号</p><p>在普通模式下按0可以跳转当前行的行首，按$即ctl + 4可以跳转到行末</p><p>使用:e! 来退出文档编辑并重新打开文档</p><p>使用ngg或nG或:n 来跳转到指定的行，n为行号</p><h2 id=用户管理>用户管理<a hidden class=anchor aria-hidden=true href=#用户管理>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=c1>#添加用户</span>
</span></span><span class=line><span class=cl>useradd <span class=o>[</span>options<span class=o>]</span> &lt;user_name&gt;
</span></span><span class=line><span class=cl>options:
</span></span><span class=line><span class=cl>-d 指定家目录，默认会在/home目录下创建和用户名同名的家目录，如果给用户指定的家目录不存在可以使用-m参数指定不存在就创建
</span></span><span class=line><span class=cl>-g 指定用户所属的组，如果指定的组不存在则创建失败，一个用户只能所属与一个组
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>#删除用户</span>
</span></span><span class=line><span class=cl>userdel <span class=o>[</span>options<span class=o>]</span> &lt;user_name&gt;
</span></span><span class=line><span class=cl>options:
</span></span><span class=line><span class=cl>-r 会把用户的家目录一并删除
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>#修改用户，主要是修改用户相关组合家目录，并不是修改名字</span>
</span></span><span class=line><span class=cl>usermod <span class=o>[</span>options<span class=o>]</span> &lt;user_name&gt;
</span></span><span class=line><span class=cl>参数options和useradd的类似,但是可以使用-l参数来修改用户名,ex：usermod -l new_name old_name
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>#添加组</span>
</span></span><span class=line><span class=cl>groupadd <span class=o>[</span>options<span class=o>]</span> &lt;group_name&gt;
</span></span><span class=line><span class=cl>options:
</span></span><span class=line><span class=cl>-g 指定组编号
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>#删除分组</span>
</span></span><span class=line><span class=cl>groupdel &lt;group_name&gt;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>#修改组</span>
</span></span><span class=line><span class=cl>groupmod <span class=o>[</span>options<span class=o>]</span> &lt;group_name&gt;
</span></span><span class=line><span class=cl>options:和groupadd类似但是可以使用-n参数来修改组名,ex：groupmod -n new_group_name old_group_name
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>#用户密码管理</span>
</span></span><span class=line><span class=cl>passwd <span class=o>[</span>options<span class=o>]</span> &lt;user_name&gt;
</span></span><span class=line><span class=cl>如果不指定参数的话那么可以给用户设置密码，如果指定参数的话则用户下次登录就要相关限制
</span></span><span class=line><span class=cl>options:
</span></span><span class=line><span class=cl>-d 删除密码，以后该用户登录就没有密码了
</span></span><span class=line><span class=cl>-l 锁定账户
</span></span><span class=line><span class=cl>-u 解锁账户
</span></span><span class=line><span class=cl>-f 强制执行
</span></span></code></pre></div><h2 id=tail>tail<a hidden class=anchor aria-hidden=true href=#tail>#</a></h2><p>查看文件末内容</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=c1>#默认显示文件的最后10行</span>
</span></span><span class=line><span class=cl>tail /filename
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>#-f参数可使循环读取，在读取日志文件时可以实时查看日志</span>
</span></span><span class=line><span class=cl>tail -f xxx.log
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>#-n参数可以指定显示文件末的行数，默认为10</span>
</span></span><span class=line><span class=cl>tail -n <span class=m>20</span> -f xxx.log
</span></span></code></pre></div><h2 id=linux链接>linux链接<a hidden class=anchor aria-hidden=true href=#linux链接>#</a></h2><p>硬连接：多个文件的副本，会随任意文件的修改而修改，但是删除其中的文件，并不会影响其他文件</p><p>软连接：软连接相当于创建了一个快捷方式，删除软连接不影响源文件</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;init&#34;</span> &gt; f1.txt
</span></span><span class=line><span class=cl><span class=c1>#对f1.txt创建名为f2.txt的硬连接</span>
</span></span><span class=line><span class=cl>ln f1.txt f2.txt
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># -s参数指定创建软连接</span>
</span></span><span class=line><span class=cl>ln -s <span class=o>[</span>链接指向的目标<span class=o>]</span> <span class=o>[</span>软链接名称<span class=o>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>ln -s f1.txt f3.txt
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>ls -li
</span></span><span class=line><span class=cl><span class=m>1094956</span> -rw-rw-r-- <span class=m>2</span> aiiqh aiiqh        <span class=m>5</span> Oct <span class=m>13</span> 12:01 f1.txt
</span></span><span class=line><span class=cl><span class=m>1094956</span> -rw-rw-r-- <span class=m>2</span> aiiqh aiiqh        <span class=m>5</span> Oct <span class=m>13</span> 12:01 f2.txt   <span class=c1>#inode号相同</span>
</span></span><span class=line><span class=cl><span class=m>1094958</span> lrwxrwxrwx <span class=m>1</span> aiiqh aiiqh        <span class=m>6</span> Oct <span class=m>13</span> 12:01 f3.txt -&gt; f1.txt
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>rm -f f1.txt
</span></span><span class=line><span class=cl>cat f2.txt  <span class=c1>#init</span>
</span></span><span class=line><span class=cl>cat f3.txt  <span class=c1>#cat: f3.txt: No such file or directory</span>
</span></span></code></pre></div><h2 id=查看文件夹内文件大小>查看文件夹内文件大小<a hidden class=anchor aria-hidden=true href=#查看文件夹内文件大小>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=nb>cd</span> /
</span></span><span class=line><span class=cl>du -h --max-depth<span class=o>=</span><span class=m>1</span>
</span></span></code></pre></div><h2 id=nc>nc<a hidden class=anchor aria-hidden=true href=#nc>#</a></h2><p>用于快速启动一个tcp或udp服务器</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=c1>#安装</span>
</span></span><span class=line><span class=cl>yum install -y nc
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>#使用-l xxx参数用于启动一个在指定端口上的tcp(默认)服务</span>
</span></span><span class=line><span class=cl>nc -l <span class=m>5000</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>#使用-w xxx参数指定建立连接的超时时间</span>
</span></span><span class=line><span class=cl>nc -l <span class=m>5000</span> -w <span class=m>5</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>#使用nc ip 端口号 来与外部tcp服务建立连接</span>
</span></span><span class=line><span class=cl>nc  127.0.0.1 <span class=m>22</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>#使用-k参数来指定允许多个连接，不指定该参数默认只允许建立一个链接</span>
</span></span><span class=line><span class=cl>nc -l <span class=m>5000</span> -k
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>#使用-v参数来显示详细信息</span>
</span></span><span class=line><span class=cl>nc -l <span class=m>5000</span> -v
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>#使用-u参数来指定使用udp，不使用该参数默认使用tcp</span>
</span></span><span class=line><span class=cl>nc -l <span class=m>5000</span> -uv
</span></span><span class=line><span class=cl>nc -u 127.0.0.1 <span class=m>5000</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>#使用-p参数来指定使用的源端口</span>
</span></span><span class=line><span class=cl>nc -u -p <span class=m>8888</span> 127.0.0.1 <span class=m>5000</span>
</span></span></code></pre></div><h2 id=lsns>lsns<a hidden class=anchor aria-hidden=true href=#lsns>#</a></h2><p>lsns用于查看linux下的namespace</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>lsns -t <span class=o>{</span>namespace<span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>lsns -t pid 
</span></span><span class=line><span class=cl>lsns -t net
</span></span></code></pre></div><h2 id=brctl>brctl<a hidden class=anchor aria-hidden=true href=#brctl>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=o>[</span>root@centos72 ~<span class=o>]</span><span class=c1># brctl</span>
</span></span><span class=line><span class=cl>-bash: brctl: <span class=nb>command</span> not found
</span></span><span class=line><span class=cl>yum install -y bridge-utils
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>#创建虚拟网桥</span>
</span></span><span class=line><span class=cl> brctl addbr br0
</span></span><span class=line><span class=cl> 
</span></span><span class=line><span class=cl> <span class=c1>#查看</span>
</span></span><span class=line><span class=cl> ip a
</span></span><span class=line><span class=cl> 11: br0: &lt;BROADCAST,MULTICAST&gt; mtu <span class=m>1500</span> qdisc noop state DOWN group default qlen <span class=m>1000</span>
</span></span><span class=line><span class=cl>    link/ether 92:47:2a:9f:bf:3f brd ff:ff:ff:ff:ff:ff
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl> <span class=c1>#关闭STP(生成树协议)因为我们只有一个路由器，是绝对不可能形成一个环的</span>
</span></span><span class=line><span class=cl> brctl stp br0 off
</span></span><span class=line><span class=cl> 
</span></span><span class=line><span class=cl> <span class=c1>#添加以太物理接口</span>
</span></span><span class=line><span class=cl> brctl addif br0 ens33
</span></span><span class=line><span class=cl> 
</span></span><span class=line><span class=cl> <span class=c1>#删除网桥物理接口</span>
</span></span><span class=line><span class=cl> brctl delif br0 ens33
</span></span><span class=line><span class=cl> 
</span></span><span class=line><span class=cl> <span class=c1>#给网桥分配一个ip地址</span>
</span></span><span class=line><span class=cl> ifconfig br0 172.18.0.1
</span></span><span class=line><span class=cl> 
</span></span><span class=line><span class=cl> <span class=c1>#启用网桥</span>
</span></span><span class=line><span class=cl> ifconfig br0 up
</span></span><span class=line><span class=cl> 
</span></span><span class=line><span class=cl> <span class=c1>#关闭网桥</span>
</span></span><span class=line><span class=cl> ifconfig br0 down
</span></span><span class=line><span class=cl> 
</span></span><span class=line><span class=cl> <span class=c1>#删除网桥</span>
</span></span><span class=line><span class=cl> brctl delbr b
</span></span></code></pre></div><h2 id=grep>grep<a hidden class=anchor aria-hidden=true href=#grep>#</a></h2><p>grep用于过滤字符，适用于进行日志查询，grep不会一次把所有内容加载到内存，而是一次加载一部分进行匹配后继续向下匹配，相较于cat、vim、more更适用于大量日志分析。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>-C 参数用于指定显示匹配内容上下文的行数，即匹配内容的上下n行都会输出
</span></span><span class=line><span class=cl>grep -C <span class=m>5</span> <span class=s1>&#39;aaa&#39;</span> text
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>-B参数指定显示匹配内容及前n行
</span></span><span class=line><span class=cl>-A参数指定显示匹配内容及后n行
</span></span><span class=line><span class=cl>-I 忽略大小写
</span></span><span class=line><span class=cl>-o 只显示匹配的内容
</span></span><span class=line><span class=cl>-c 统计过滤到的内容的行数
</span></span><span class=line><span class=cl>-n 显示行号
</span></span><span class=line><span class=cl>-v 剔除匹配到的内容
</span></span><span class=line><span class=cl>- w 精确
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>#基础正则，直接用grep就可以使用</span>
</span></span><span class=line><span class=cl>. 表示任意字符
</span></span><span class=line><span class=cl>grep <span class=s1>&#39;A.C&#39;</span> text <span class=c1>#可匹配ABC A1C A+C ...</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>^ 匹配行开头
</span></span><span class=line><span class=cl>$ 匹配行结尾
</span></span><span class=line><span class=cl>^$ 匹配空行
</span></span><span class=line><span class=cl>* 表示前一个字符出现0次或0次以上
</span></span><span class=line><span class=cl>.* 表示匹配任意字符，包括空行
</span></span><span class=line><span class=cl>0* 会匹配到任意字符，因为*表示0个或0个以上字符，所以可以匹配到空字符，而每个行都有空字符
</span></span><span class=line><span class=cl><span class=o>[]</span> 中括号表示匹配中括号的内的任一字符，中括号内如果有特殊字符，那么这些字符都被去除特殊含义
</span></span><span class=line><span class=cl>grep <span class=s1>&#39;[abc]123&#39;</span> <span class=c1>#可以匹配 a123 b123 c123 </span>
</span></span><span class=line><span class=cl>grep <span class=s1>&#39;[a-c]123&#39;</span> <span class=c1>#同上</span>
</span></span><span class=line><span class=cl>grep <span class=s1>&#39;[abc|.,]123&#39;</span> <span class=c1>#中括号内的 | . , 都被去除特殊含义，可以匹配到 |123 .123 ,123 </span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>#扩展正则，使用grep -E 或 egrep</span>
</span></span><span class=line><span class=cl>+ 前一个字符出现了0次以上
</span></span><span class=line><span class=cl><span class=p>|</span> 表示或者
</span></span><span class=line><span class=cl>grep -E <span class=s1>&#39;abc|123&#39;</span> <span class=c1>#匹配abc 或 123</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>()</span> 作为一个整体，可看做一个字符
</span></span><span class=line><span class=cl>grep -E <span class=s1>&#39;a(b|c)d&#39;</span> <span class=c1>#匹配 abd 或 acd</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>{</span>m,n<span class=o>}</span> 表示前一次字符出现几次
</span></span><span class=line><span class=cl>grep -E <span class=s1>&#39;abc{1,3}&#39;</span> <span class=c1>#c出现1次以上3次即一下 匹配 abc abcc abccc</span>
</span></span><span class=line><span class=cl>grep -E <span class=s1>&#39;abc{1,}&#39;</span> <span class=c1>#只指定最少出现几次，而不指定上界</span>
</span></span><span class=line><span class=cl>grep -E <span class=s1>&#39;abc{,3}&#39;</span> <span class=c1>#只指定上界，而不指定下界</span>
</span></span><span class=line><span class=cl>grep -E <span class=s1>&#39;abc{1}&#39;</span> <span class=c1>#恰好出现几次 ，匹配abc</span>
</span></span><span class=line><span class=cl>grep -E <span class=s1>&#39;(a{1,}b{1,}c{1,}){1,}&#39;</span> <span class=c1>#匹配 abc aabbcc aabbccc</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>? 指定前一个字符出现0次或一次
</span></span><span class=line><span class=cl>grep -E <span class=s1>&#39;abc?&#39;</span> <span class=c1>#匹配ab 或 abc</span>
</span></span></code></pre></div><h2 id=eof>EOF<a hidden class=anchor aria-hidden=true href=#eof>#</a></h2><p>向文件test.sh里输入内容</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=o>[</span>root@slave-server opt<span class=o>]</span><span class=c1># cat &lt;&lt; EOF &gt;test.sh</span>
</span></span><span class=line><span class=cl><span class=m>123123123</span>
</span></span><span class=line><span class=cl><span class=m>3452354345</span>
</span></span><span class=line><span class=cl>asdfasdfs
</span></span><span class=line><span class=cl>EOF
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>cat <span class=s>&lt;&lt; EOF &gt; test.go
</span></span></span><span class=line><span class=cl><span class=s>package main
</span></span></span><span class=line><span class=cl><span class=s>import (
</span></span></span><span class=line><span class=cl><span class=s>	&#34;fmt&#34;
</span></span></span><span class=line><span class=cl><span class=s>	&#34;runtime&#34;
</span></span></span><span class=line><span class=cl><span class=s>)
</span></span></span><span class=line><span class=cl><span class=s>func main() {
</span></span></span><span class=line><span class=cl><span class=s>fmt.Println(&#34;cpu:&#34;, runtime.NumCPU())
</span></span></span><span class=line><span class=cl><span class=s>}
</span></span></span><span class=line><span class=cl><span class=s>EOF</span>
</span></span></code></pre></div><h2 id=alias>alias<a hidden class=anchor aria-hidden=true href=#alias>#</a></h2><p>设置别名:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=nb>alias</span> <span class=nv>k</span><span class=o>=</span><span class=s1>&#39;kubectl&#39;</span>
</span></span></code></pre></div><p>查看已经设置的别名：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=nb>alias</span> -p
</span></span></code></pre></div><p>删除别名：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=nb>unalias</span> k
</span></span></code></pre></div><p>设置别名每次登陆可用：</p><p>默认使用 <code>alias</code> 设置的别名仅本次登陆有效，如果想每次登陆都能使用别名，可以把<code>alias</code>设置别名的命令放在<code>~/.bashrc</code>文件中。</p><h2 id=清空文件内容>清空文件内容<a hidden class=anchor aria-hidden=true href=#清空文件内容>#</a></h2><ol><li>使用<code>vi/vim</code>打开文件，输入<code>%d</code>即清空,<code>:wq</code>保存即可</li><li>使用<code>cat /dev/null > file</code></li><li>使用<code>echo "" > file</code></li></ol><h2 id=shell脚本中路径问题>shell脚本中路径问题<a hidden class=anchor aria-hidden=true href=#shell脚本中路径问题>#</a></h2><p>在shell中如果通过<code>$PWD</code>获取路径，那么获取到的值是指向shell脚本时的路径,如<code>test.sh</code>脚本在<code>/etc</code>路径下，但是执行的时候是在<code>/root</code>路径下执行<code>./etc/test.sh</code>那么<code>$PWD</code>获取到的值就是<code>/root</code></p><h2 id=base64>base64<a hidden class=anchor aria-hidden=true href=#base64>#</a></h2><h3 id=base64加密>base64加密<a hidden class=anchor aria-hidden=true href=#base64加密>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>base64 &lt;file_name&gt;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;abc&#34;</span> <span class=p>|</span> base64
</span></span></code></pre></div><h3 id=base64解码>base64解码<a hidden class=anchor aria-hidden=true href=#base64解码>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>base64 -d &lt;file_name&gt;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;YWJjCg==&#34;</span> <span class=p>|</span> base64 -d
</span></span></code></pre></div><h2 id=环境变量>环境变量<a hidden class=anchor aria-hidden=true href=#环境变量>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>    <span class=nv>KUBECONFIG</span><span class=o>=</span>config.yaml k get ns <span class=c1>#暴露的环境变量仅改行命令有效</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nb>export</span> <span class=nv>KUBECONFIG</span><span class=o>=</span>config.yaml <span class=c1>#暴露的环境变量当前终端有效，新开的终端对该环境变量不可见</span>
</span></span><span class=line><span class=cl>    k get ns
</span></span></code></pre></div><h2 id=常用快捷键>常用快捷键<a hidden class=anchor aria-hidden=true href=#常用快捷键>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=c1>#清屏</span>
</span></span><span class=line><span class=cl>ctrl + l
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>#跳转到上一条历史命令,相当于 ↑键</span>
</span></span><span class=line><span class=cl>ctrl + p
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>#跳转到下一条命令,相当于 ↓键</span>
</span></span><span class=line><span class=cl>ctrl + n
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>#删除光标指向字符</span>
</span></span><span class=line><span class=cl>ctrl + d
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>#命令行中向前移动一个字符</span>
</span></span><span class=line><span class=cl>ctrl + b
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>#命令行中向后移动一个字符</span>
</span></span><span class=line><span class=cl>ctrl + f
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>#命令行中向前移动一个单词</span>
</span></span><span class=line><span class=cl>alt + b
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>#命令行中向后移动一个单词</span>
</span></span><span class=line><span class=cl>alt + f
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>#移动到命令行最前端</span>
</span></span><span class=line><span class=cl>ctrl + a
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>#移动到命令行最后端</span>
</span></span><span class=line><span class=cl>ctrl + e
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>#停止记录命令行输入</span>
</span></span><span class=line><span class=cl>ctrl + s
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>#回复记录命令行输入</span>
</span></span><span class=line><span class=cl>ctrl + q
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>#根据关键字搜索历史命令，如果有多条命令被匹配到可以ctrl + r 进行切换选择，然后按tab可以把该命令显示到命令行，或者直接enter直接执行该命令</span>
</span></span><span class=line><span class=cl>ctrl + r
</span></span></code></pre></div><h2 id=查看端口占用>查看端口占用<a hidden class=anchor aria-hidden=true href=#查看端口占用>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=c1># -a 参数列出所有状态的端口占用，监听的端口、已建立连接的端口</span>
</span></span><span class=line><span class=cl><span class=c1># -n 参数不进行name解析显示ip地址</span>
</span></span><span class=line><span class=cl><span class=c1># -p 参数显示端口相关程序的pid</span>
</span></span><span class=line><span class=cl><span class=c1># -t 参数显示tcp相关的端口占用</span>
</span></span><span class=line><span class=cl><span class=c1># -u 参数显示udp相关的端口占用</span>
</span></span><span class=line><span class=cl>netstat -anp
</span></span></code></pre></div><h2 id=脚本后台运行>脚本后台运行<a hidden class=anchor aria-hidden=true href=#脚本后台运行>#</a></h2><ol><li>使用&在终端断连之后继续执行:<code>sh test.sh > test.log &</code></li><li>使用nohup加&可以在终端断连之后继续执行：<code>nohup sh test.sh > test.log &</code></li></ol><h2 id=linux运行级别>linux运行级别<a hidden class=anchor aria-hidden=true href=#linux运行级别>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=c1># 0 关机</span>
</span></span><span class=line><span class=cl><span class=c1># 1 单用户</span>
</span></span><span class=line><span class=cl><span class=c1># 2 多用户，无网络模式</span>
</span></span><span class=line><span class=cl><span class=c1># 3 完全多用户模式</span>
</span></span><span class=line><span class=cl><span class=c1># 4 用户自定义级别</span>
</span></span><span class=line><span class=cl><span class=c1># 5 图形化界面多用户</span>
</span></span><span class=line><span class=cl><span class=c1># 6 重启</span>
</span></span><span class=line><span class=cl>runlevel
</span></span><span class=line><span class=cl>N <span class=m>3</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>init 命令加对应的级别可以切换到不同的级别
</span></span><span class=line><span class=cl>init <span class=m>6</span>
</span></span></code></pre></div><h1 id=正则>正则<a hidden class=anchor aria-hidden=true href=#正则>#</a></h1><h2 id=标准正则>标准正则<a hidden class=anchor aria-hidden=true href=#标准正则>#</a></h2><p>匹配开头</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=o>[</span>root@centos72 shell_t<span class=o>]</span><span class=c1># cat /etc/passwd |grep ^a</span>
</span></span><span class=line><span class=cl>adm:x:3:4:adm:/var/adm:/sbin/nologin
</span></span></code></pre></div><p>匹配结尾</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=o>[</span>root@centos72 shell_t<span class=o>]</span><span class=c1># cat /etc/passwd |grep n$</span>
</span></span><span class=line><span class=cl>bin:x:1:1:bin:/bin:/sbin/nologin
</span></span><span class=line><span class=cl>daemon:x:2:2:daemon:/sbin:/sbin/nologin
</span></span><span class=line><span class=cl>adm:x:3:4:adm:/var/adm:/sbin/nologin
</span></span></code></pre></div><p>. 号,匹配任意一个字符</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=o>[</span>root@centos72 shell_t<span class=o>]</span><span class=c1># cat /etc/passwd |grep r..t</span>
</span></span><span class=line><span class=cl>root:x:0:0:root:/root:/bin/bash
</span></span><span class=line><span class=cl>operator:x:11:0:operator:/root:/sbin/nologin
</span></span><span class=line><span class=cl>ftp:x:14:50:FTP User:/var/ftp:/sbin/nologin
</span></span><span class=line><span class=cl>dockerroot:x:991:988:Docker User:/var/lib/docker:/sbin/nologin
</span></span></code></pre></div><p>* 号，不单独使用，表示匹配*号之前的字符0次或多次</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=c1>#ro*t 匹配 rot root roooot</span>
</span></span><span class=line><span class=cl><span class=o>[</span>root@centos72 shell_t<span class=o>]</span><span class=c1># cat /etc/passwd |grep ro*t</span>
</span></span><span class=line><span class=cl>root:x:0:0:root:/root:/bin/bash
</span></span><span class=line><span class=cl>operator:x:11:0:operator:/root:/sbin/nologin
</span></span><span class=line><span class=cl>dockerroot:x:991:988:Docker User:/var/lib/docker:/sbin/nologin
</span></span></code></pre></div><p>.* 匹配任意一个字符任意次，即匹配任意字符串</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=o>[</span>root@centos72 shell_t<span class=o>]</span><span class=c1># cat /etc/passwd |grep r.*t</span>
</span></span><span class=line><span class=cl>root:x:0:0:root:/root:/bin/bash
</span></span><span class=line><span class=cl>operator:x:11:0:operator:/root:/sbin/nologin
</span></span><span class=line><span class=cl>ftp:x:14:50:FTP User:/var/ftp:/sbin/nologin
</span></span></code></pre></div><p>[] 匹配字符区间</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=o>[</span>6,8<span class=o>]</span> 匹配6或者8
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>[</span>0-9<span class=o>]</span> 匹配0-9的任意数字
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>[</span>^0-9<span class=o>]</span> 匹配任意非数字字符
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>[</span>0-9<span class=o>]</span>* 匹配任意数字串
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>[</span>a-z<span class=o>]</span> 匹配a-z的字符
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>[</span>a-Z<span class=o>]</span> 匹配a-Z的任意字符
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>[</span>root@centos72 shell_t<span class=o>]</span><span class=c1># cat /etc/passwd |grep r[a-z]*t</span>
</span></span><span class=line><span class=cl>root:x:0:0:root:/root:/bin/bash
</span></span><span class=line><span class=cl>operator:x:11:0:operator:/root:/sbin/nologin
</span></span><span class=line><span class=cl>sshd:x:74:74:Privilege-separated SSH:/var/empty/sshd:/sbin/nologin
</span></span><span class=line><span class=cl>rabbitmq:x:997:995:RabbitMQ messaging server:/var/lib/rabbitmq:/bin/bash
</span></span><span class=line><span class=cl>gitlab-prometheus:x:992:989::/var/opt/gitlab/prometheus:/bin/sh
</span></span><span class=line><span class=cl>dockerroot:x:991:988:Docker User:/var/lib/docker:/sbin/nologin
</span></span></code></pre></div><p>\转义</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=c1>#匹配$</span>
</span></span><span class=line><span class=cl>grep <span class=se>\$</span> test.sh
</span></span></code></pre></div><h2 id=扩展正则>扩展正则<a hidden class=anchor aria-hidden=true href=#扩展正则>#</a></h2><p>{}指定前一个字符出现几次</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=o>{</span>n<span class=o>}</span>这种写法是扩展正则，grep使用扩展正则需要加 -E 参数
</span></span><span class=line><span class=cl><span class=o>[</span>root@centos72 shell_t<span class=o>]</span><span class=c1># grep -E ro{2}t /etc/passwd</span>
</span></span><span class=line><span class=cl>root:x:0:0:root:/root:/bin/bash
</span></span><span class=line><span class=cl>operator:x:11:0:operator:/root:/sbin/nologin
</span></span><span class=line><span class=cl>dockerroot:x:991:988:Docker User:/var/lib/docker:/sbin/nologin
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>#{n,}匹配前一个字符至少n次</span>
</span></span><span class=line><span class=cl><span class=o>[</span>root@centos72 shell_t<span class=o>]</span><span class=c1># grep -E &#34;ro{0,}t&#34; /etc/passwd</span>
</span></span><span class=line><span class=cl>root:x:0:0:root:/root:/bin/bash
</span></span><span class=line><span class=cl>operator:x:11:0:operator:/root:/sbin/nologin
</span></span><span class=line><span class=cl>dockerroot:x:991:988:Docker User:/var/lib/docker:/sbin/nologin
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>#{,n}匹配前一个字符至多n次</span>
</span></span><span class=line><span class=cl><span class=o>[</span>root@centos72 shell_t<span class=o>]</span><span class=c1># grep -E &#34;ro{,2}t&#34; /etc/passwd</span>
</span></span><span class=line><span class=cl>root:x:0:0:root:/root:/bin/bash
</span></span><span class=line><span class=cl>operator:x:11:0:operator:/root:/sbin/nologin
</span></span><span class=line><span class=cl>dockerroot:x:991:988:Docker User:/var/lib/docker:/sbin/nologin
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>{</span>n,m<span class=o>}</span>匹配前一个字符n到m次
</span></span><span class=line><span class=cl><span class=o>[</span>root@centos72 shell_t<span class=o>]</span><span class=c1># grep -E &#34;ro{1,2}t&#34; /etc/passwd</span>
</span></span><span class=line><span class=cl>root:x:0:0:root:/root:/bin/bash
</span></span><span class=line><span class=cl>operator:x:11:0:operator:/root:/sbin/nologin
</span></span><span class=line><span class=cl>dockerroot:x:991:988:Docker User:/var/lib/docker:/sbin/nologin
</span></span></code></pre></div><p>+号匹配前一个字符一次及以上</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>cat <span class=s>&lt;&lt; EOF | grep -E &#34;go+&#34;
</span></span></span><span class=line><span class=cl><span class=s>g
</span></span></span><span class=line><span class=cl><span class=s>go
</span></span></span><span class=line><span class=cl><span class=s>goo
</span></span></span><span class=line><span class=cl><span class=s>goole
</span></span></span><span class=line><span class=cl><span class=s>EOF</span>
</span></span><span class=line><span class=cl>go
</span></span><span class=line><span class=cl>goo
</span></span><span class=line><span class=cl>goole
</span></span></code></pre></div><p>?号匹配前一个字符0次或一次</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>cat <span class=s>&lt;&lt; EOF | grep -E &#34;go?&#34;
</span></span></span><span class=line><span class=cl><span class=s>g
</span></span></span><span class=line><span class=cl><span class=s>go
</span></span></span><span class=line><span class=cl><span class=s>goo
</span></span></span><span class=line><span class=cl><span class=s>goole
</span></span></span><span class=line><span class=cl><span class=s>EOF</span>
</span></span><span class=line><span class=cl>g   <span class=c1>#匹配到g</span>
</span></span><span class=line><span class=cl>go  <span class=c1>#匹配到go</span>
</span></span><span class=line><span class=cl>goo <span class=c1>#匹配到go</span>
</span></span><span class=line><span class=cl>goole   <span class=c1>#匹配到go</span>
</span></span></code></pre></div><p>匹配13开头的手机号码</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>grep -E <span class=s2>&#34;13[0-9]{9}&#34;</span> phone.txt
</span></span></code></pre></div><h1 id=cat>cat<a hidden class=anchor aria-hidden=true href=#cat>#</a></h1><p>cat命令用来查看一个文件的内容</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>cat test.sh
</span></span></code></pre></div><p>cat命令配合EOF加输出重定向可以向文件中写入内容</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>cat <span class=s>&lt;&lt;EOF &gt; test.sh
</span></span></span><span class=line><span class=cl><span class=s>name=&#34;tom&#34;
</span></span></span><span class=line><span class=cl><span class=s>echo &#34;hello,\${name}!&#34;  #在EOF</span>中使用$需要加<span class=se>\转</span>移
</span></span><span class=line><span class=cl>EOF
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>cat test.sh
</span></span><span class=line><span class=cl><span class=nv>name</span><span class=o>=</span><span class=s2>&#34;tom&#34;</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;hello, </span><span class=si>${</span><span class=nv>name</span><span class=si>}</span><span class=s2>!&#34;</span>
</span></span></code></pre></div><h1 id=cut>cut<a hidden class=anchor aria-hidden=true href=#cut>#</a></h1><p>cut命令用于获取文件指定的列，并输出到标准输出</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=c1>#-d指定分隔符 -f指定列</span>
</span></span><span class=line><span class=cl>cat <span class=s>&lt;&lt;EOF | cut -d &#34; &#34; -f 1
</span></span></span><span class=line><span class=cl><span class=s>tom man 20
</span></span></span><span class=line><span class=cl><span class=s>jerry female 18
</span></span></span><span class=line><span class=cl><span class=s>jack man 25
</span></span></span><span class=line><span class=cl><span class=s>EOF</span>
</span></span><span class=line><span class=cl>tom
</span></span><span class=line><span class=cl>jerry
</span></span><span class=line><span class=cl>jack
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>cat <span class=s>&lt;&lt;EOF | cut -d &#34; &#34; -f 1,2
</span></span></span><span class=line><span class=cl><span class=s>tom man 20
</span></span></span><span class=line><span class=cl><span class=s>jerry female 18
</span></span></span><span class=line><span class=cl><span class=s>jack man 25
</span></span></span><span class=line><span class=cl><span class=s>EOF</span>
</span></span><span class=line><span class=cl>tom man
</span></span><span class=line><span class=cl>jerry female
</span></span><span class=line><span class=cl>jack man
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>cat <span class=s>&lt;&lt;EOF | cut -d &#34; &#34; -f 1-2
</span></span></span><span class=line><span class=cl><span class=s>tom man 20
</span></span></span><span class=line><span class=cl><span class=s>jerry female 18
</span></span></span><span class=line><span class=cl><span class=s>jack man 25
</span></span></span><span class=line><span class=cl><span class=s>EOF</span>
</span></span><span class=line><span class=cl>tom man
</span></span><span class=line><span class=cl>jerry female
</span></span><span class=line><span class=cl>jack man
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>cat <span class=s>&lt;&lt;EOF | cut -d &#34; &#34; -f -2
</span></span></span><span class=line><span class=cl><span class=s>tom man 20
</span></span></span><span class=line><span class=cl><span class=s>jerry female 18
</span></span></span><span class=line><span class=cl><span class=s>jack man 25
</span></span></span><span class=line><span class=cl><span class=s>EOF</span>
</span></span><span class=line><span class=cl>tom man
</span></span><span class=line><span class=cl>jerry female
</span></span><span class=line><span class=cl>jack man
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>cat <span class=s>&lt;&lt;EOF | cut -d &#34; &#34; -f 2-
</span></span></span><span class=line><span class=cl><span class=s>tom man 20
</span></span></span><span class=line><span class=cl><span class=s>jerry female 18
</span></span></span><span class=line><span class=cl><span class=s>jack man 25
</span></span></span><span class=line><span class=cl><span class=s>EOF</span>
</span></span><span class=line><span class=cl>man <span class=m>20</span>
</span></span><span class=line><span class=cl>female <span class=m>18</span>
</span></span><span class=line><span class=cl>man <span class=m>25</span>
</span></span></code></pre></div><p>获取ip地址</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>ifconfig ens33 <span class=p>|</span>grep netmask <span class=p>|</span>cut -d <span class=s2>&#34; &#34;</span> -f <span class=m>10</span>
</span></span><span class=line><span class=cl>192.168.37.131
</span></span></code></pre></div><h1 id=grep-1>grep<a hidden class=anchor aria-hidden=true href=#grep-1>#</a></h1><p>grep用于配合正则按行过滤数据</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>cat <span class=s>&lt;&lt;EOF | grep &#39;go&#39;
</span></span></span><span class=line><span class=cl><span class=s>g
</span></span></span><span class=line><span class=cl><span class=s>go
</span></span></span><span class=line><span class=cl><span class=s>goole
</span></span></span><span class=line><span class=cl><span class=s>EOF</span>
</span></span><span class=line><span class=cl>go 
</span></span><span class=line><span class=cl>goole
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># -E 指定使用扩展正则</span>
</span></span><span class=line><span class=cl>cat <span class=s>&lt;&lt;EOF | grep -E &#39;go+&#39;
</span></span></span><span class=line><span class=cl><span class=s>g
</span></span></span><span class=line><span class=cl><span class=s>go
</span></span></span><span class=line><span class=cl><span class=s>goole
</span></span></span><span class=line><span class=cl><span class=s>EOF</span>
</span></span><span class=line><span class=cl>go  <span class=c1>#匹配到go</span>
</span></span><span class=line><span class=cl>goole   <span class=c1>#匹配到goo</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># -m 参数指定输出的最大行数</span>
</span></span><span class=line><span class=cl>cat <span class=s>&lt;&lt;EOF | grep -m 1 -E &#39;go+&#39;
</span></span></span><span class=line><span class=cl><span class=s>g
</span></span></span><span class=line><span class=cl><span class=s>go
</span></span></span><span class=line><span class=cl><span class=s>goole
</span></span></span><span class=line><span class=cl><span class=s>EOF</span>
</span></span><span class=line><span class=cl>go
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># -c 参数指定输出匹配到的行数</span>
</span></span><span class=line><span class=cl>cat <span class=s>&lt;&lt;EOF | grep -c -E &#39;go+&#39;
</span></span></span><span class=line><span class=cl><span class=s>g
</span></span></span><span class=line><span class=cl><span class=s>go
</span></span></span><span class=line><span class=cl><span class=s>goole
</span></span></span><span class=line><span class=cl><span class=s>EOF</span>
</span></span><span class=line><span class=cl><span class=m>2</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># -i 参数指定忽略匹配正则的大小写</span>
</span></span><span class=line><span class=cl>cat <span class=s>&lt;&lt;EOF | grep -i -E &#39;go+&#39;
</span></span></span><span class=line><span class=cl><span class=s>g
</span></span></span><span class=line><span class=cl><span class=s>go
</span></span></span><span class=line><span class=cl><span class=s>Go
</span></span></span><span class=line><span class=cl><span class=s>goole
</span></span></span><span class=line><span class=cl><span class=s>EOF</span>
</span></span><span class=line><span class=cl>go
</span></span><span class=line><span class=cl>Go
</span></span><span class=line><span class=cl>goole
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># -v 参数指定输出匹配到的行以外的行</span>
</span></span><span class=line><span class=cl>cat <span class=s>&lt;&lt;EOF | grep -v -E &#39;go+&#39;
</span></span></span><span class=line><span class=cl><span class=s>g
</span></span></span><span class=line><span class=cl><span class=s>go
</span></span></span><span class=line><span class=cl><span class=s>Go
</span></span></span><span class=line><span class=cl><span class=s>goole
</span></span></span><span class=line><span class=cl><span class=s>EOF</span>
</span></span><span class=line><span class=cl>g
</span></span><span class=line><span class=cl>Go
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># -w 参数指定正则要匹配整个单词</span>
</span></span><span class=line><span class=cl>cat <span class=s>&lt;&lt;EOF | grep -w -E &#39;go+&#39;
</span></span></span><span class=line><span class=cl><span class=s>g
</span></span></span><span class=line><span class=cl><span class=s>go
</span></span></span><span class=line><span class=cl><span class=s>Go
</span></span></span><span class=line><span class=cl><span class=s>goole
</span></span></span><span class=line><span class=cl><span class=s>EOF</span>
</span></span><span class=line><span class=cl>go
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># -x 参数指定正则要匹配一整行的内容</span>
</span></span><span class=line><span class=cl>cat <span class=s>&lt;&lt;EOF | grep -x -E &#39;go+&#39;
</span></span></span><span class=line><span class=cl><span class=s>g
</span></span></span><span class=line><span class=cl><span class=s>go
</span></span></span><span class=line><span class=cl><span class=s>go is good
</span></span></span><span class=line><span class=cl><span class=s>goole
</span></span></span><span class=line><span class=cl><span class=s>EOF</span>
</span></span><span class=line><span class=cl>go
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># -o 参数指定只显示匹配到的内容，对于同一行有多个匹配到的内容会隔行显示</span>
</span></span><span class=line><span class=cl>cat <span class=s>&lt;&lt;EOF | grep -o -E &#39;go+&#39;
</span></span></span><span class=line><span class=cl><span class=s>g
</span></span></span><span class=line><span class=cl><span class=s>go
</span></span></span><span class=line><span class=cl><span class=s>go is good
</span></span></span><span class=line><span class=cl><span class=s>goole
</span></span></span><span class=line><span class=cl><span class=s>EOF</span>
</span></span><span class=line><span class=cl>go
</span></span><span class=line><span class=cl>go
</span></span><span class=line><span class=cl>goo
</span></span><span class=line><span class=cl>goo
</span></span></code></pre></div><h1 id=sed>sed<a hidden class=anchor aria-hidden=true href=#sed>#</a></h1><p>sed针对文件的每一行进行处理，把一行读入放入模式空间，然后对模式空间的数据进行处理(增加/修改/删除)后输出到屏幕，直到处理完文件的每一行,处理完毕后并不会改变源文件，只会把处理后的结果输出到屏幕，改变源文件需要配合输出重定向</p><h2 id=-e-参数指定多次编辑可以写多个规则>-e 参数指定多次编辑(可以写多个规则)<a hidden class=anchor aria-hidden=true href=#-e-参数指定多次编辑可以写多个规则>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>cat <span class=s>&lt;&lt;EOF &gt; test.txt
</span></span></span><span class=line><span class=cl><span class=s>line1   name    tom
</span></span></span><span class=line><span class=cl><span class=s>line2   age 20
</span></span></span><span class=line><span class=cl><span class=s>line3   gender  man
</span></span></span><span class=line><span class=cl><span class=s>EOF</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>sed -e <span class=s2>&#34;1p&#34;</span> -n test.txt <span class=c1># p参数指定打印行为 -n参数取消默认打印，只输出匹配到的行</span>
</span></span><span class=line><span class=cl>line1   name    tom
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>sed -e <span class=s2>&#34;/name/p&#34;</span> -n test.txt    <span class=c1># 模糊匹配存在name的行</span>
</span></span><span class=line><span class=cl>line1   name    tom
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>sed -e <span class=s2>&#34;/^line2/p&#34;</span> -n test.txt
</span></span><span class=line><span class=cl>line2   age <span class=m>20</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>sed -e <span class=s2>&#34;1,2p&#34;</span> -n test.txt   <span class=c1># 1,2 指定第一行和第二行</span>
</span></span><span class=line><span class=cl>line1   name    tom
</span></span><span class=line><span class=cl>line2   age <span class=m>20</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>sed -e <span class=s2>&#34;2~1p&#34;</span> -n test.txt   <span class=c1># 2~1 指定从第二行开始，已1步长匹配行</span>
</span></span><span class=line><span class=cl>line2   age <span class=m>20</span>
</span></span><span class=line><span class=cl>line3   gender  man
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>sed -e <span class=s2>&#34;2~2p&#34;</span> -n test.txt
</span></span><span class=line><span class=cl>line2   age <span class=m>20</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>sed -e <span class=s2>&#34;2,+3p&#34;</span> -n test.txt  <span class=c1># 2,+3 表示从第二行开始匹配向下三行(包括本行)</span>
</span></span><span class=line><span class=cl>line2   age <span class=m>20</span>
</span></span><span class=line><span class=cl>line3   gender  man
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>sed -e <span class=s2>&#34;2,\$p&#34;</span> -n test.txt  <span class=c1>#   2,\$ 表示匹配从第二行开始一直到结尾的行</span>
</span></span><span class=line><span class=cl>line2   age <span class=m>20</span>
</span></span><span class=line><span class=cl>line3   gender  man
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>sed -e <span class=s2>&#34;1d&#34;</span> test.txt    <span class=c1># d参数指定删除的行</span>
</span></span><span class=line><span class=cl>line2   age <span class=m>20</span>
</span></span><span class=line><span class=cl>line3   gender  man
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>sed -e <span class=s2>&#34;1d&#34;</span> -e <span class=s2>&#34;s/age 20/age 30/g&#34;</span> test.txt <span class=c1># s参数指定进行替换，g是全局</span>
</span></span><span class=line><span class=cl>line2   age <span class=m>30</span>
</span></span><span class=line><span class=cl>line3   gender  man
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>cat test.txt    <span class=c1>#源文件内容没有变</span>
</span></span><span class=line><span class=cl>line1   name    tom
</span></span><span class=line><span class=cl>line2   age <span class=m>20</span>
</span></span><span class=line><span class=cl>line3   gender  man
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>sed -e <span class=s2>&#34;1a hight 170cm&#34;</span> test.txt    <span class=c1># a参数指定在指定的行后添加一行/多行</span>
</span></span><span class=line><span class=cl>line1   name    tom
</span></span><span class=line><span class=cl>hight 170cm
</span></span><span class=line><span class=cl>line2   age <span class=m>20</span>
</span></span><span class=line><span class=cl>line3   gender  man
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>sed -e <span class=s2>&#34;1i weight 55kg&#34;</span> test.txt    <span class=c1># i参数指定在指定的行前插入一行/多行</span>
</span></span><span class=line><span class=cl>weight 55kg
</span></span><span class=line><span class=cl>line1   name    tom
</span></span><span class=line><span class=cl>line2   age <span class=m>20</span>
</span></span><span class=line><span class=cl>line3   gender  man
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>#输出结果重定向</span>
</span></span><span class=line><span class=cl>sed -e <span class=s2>&#34;1a hight 170cm&#34;</span> test.txt &gt; test.txt
</span></span></code></pre></div><h2 id=-n-参数指定只输出匹配到的被处理的内容>-n 参数指定只输出匹配到的被处理的内容<a hidden class=anchor aria-hidden=true href=#-n-参数指定只输出匹配到的被处理的内容>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>sed -e <span class=s2>&#34;1p&#34;</span> -n test.txt <span class=c1># p参数指定打印行为 -n参数取消默认打印，只输出匹配到的行</span>
</span></span><span class=line><span class=cl>line1   name    tom
</span></span></code></pre></div><h2 id=-i-参数指定修改应用到源文件>-i 参数指定修改应用到源文件<a hidden class=anchor aria-hidden=true href=#-i-参数指定修改应用到源文件>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>cat test.txt
</span></span><span class=line><span class=cl>line1   name    tom
</span></span><span class=line><span class=cl>line2   age <span class=m>20</span>
</span></span><span class=line><span class=cl>line3   gender  man
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>sed -i -e <span class=s2>&#34;s/age 20/age 30/g&#34;</span> test.txt
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>cat test.txt
</span></span><span class=line><span class=cl>line1   name    tom
</span></span><span class=line><span class=cl>line2   age <span class=m>30</span>
</span></span><span class=line><span class=cl>line3   gender  man
</span></span></code></pre></div><h2 id=-r-参数指定开启扩展正则>-r 参数指定开启扩展正则<a hidden class=anchor aria-hidden=true href=#-r-参数指定开启扩展正则>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>cat <span class=s>&lt;&lt;EOF &gt; test.txt
</span></span></span><span class=line><span class=cl><span class=s>go
</span></span></span><span class=line><span class=cl><span class=s>goo
</span></span></span><span class=line><span class=cl><span class=s>goole
</span></span></span><span class=line><span class=cl><span class=s>EOF</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>sed -e <span class=s2>&#34;s/go+/x/g&#34;</span> test.txt <span class=c1># 不加-r参数由于+是扩展正则，所以不能匹配到任何的内容</span>
</span></span><span class=line><span class=cl>go
</span></span><span class=line><span class=cl>goo
</span></span><span class=line><span class=cl>goole
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>sed -r -e <span class=s2>&#34;s/go+/x/g&#34;</span> test.txt
</span></span><span class=line><span class=cl>x
</span></span><span class=line><span class=cl>x
</span></span><span class=line><span class=cl>xle
</span></span></code></pre></div><h2 id=sed取ip地址>sed取ip地址<a hidden class=anchor aria-hidden=true href=#sed取ip地址>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>ifconfig ens33 <span class=p>|</span> sed <span class=s1>&#39;2p&#39;</span> -n <span class=p>|</span> sed <span class=s2>&#34;s/^.*inet//g&#34;</span> <span class=p>|</span> sed <span class=s2>&#34;s/netmask.*</span>$<span class=s2>//g&#34;</span>
</span></span><span class=line><span class=cl> 192.168.37.131  <span class=c1>#前后有空格</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>ifconfig ens33 <span class=p>|</span> sed -e <span class=s2>&#34;2s/^.*inet//&#34;</span> -n -e <span class=s2>&#34;s/netmask.*</span>$<span class=s2>//p&#34;</span> -n 
</span></span><span class=line><span class=cl> 192.168.37.131 
</span></span></code></pre></div><h1 id=awk>awk<a hidden class=anchor aria-hidden=true href=#awk>#</a></h1><p>awk通过正则过滤到匹配的行，然后对行进行切片(默认以空格)，然后对每个切片进行处理</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=c1># -F 参数指定行分隔符</span>
</span></span><span class=line><span class=cl>cat /etc/passwd <span class=p>|</span> awk -F <span class=s2>&#34;:&#34;</span> <span class=s1>&#39;/^root/ {print $7}&#39;</span>
</span></span><span class=line><span class=cl>/bin/bash
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>cat /etc/passwd <span class=p>|</span> awk -F <span class=s2>&#34;:&#34;</span> <span class=s1>&#39;/^root/ {print $1 &#34;,&#34; $7}&#39;</span>
</span></span><span class=line><span class=cl>root,/bin/bash
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># BEGIN代码块在过滤之前执行 END代码块在过滤结束之后执行</span>
</span></span><span class=line><span class=cl>cat /etc/passwd <span class=p>|</span> awk -F <span class=s2>&#34;:&#34;</span> <span class=s1>&#39;BEGIN{print &#34;start&#34;}{print $1&#34;=&#34;$7}END{print &#34;stop&#34;}&#39;</span>
</span></span><span class=line><span class=cl>start
</span></span><span class=line><span class=cl><span class=nv>root</span><span class=o>=</span>/bin/bash
</span></span><span class=line><span class=cl><span class=nv>bin</span><span class=o>=</span>/sbin/nologin
</span></span><span class=line><span class=cl><span class=nv>daemon</span><span class=o>=</span>/sbin/nologin
</span></span><span class=line><span class=cl>stop
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>cat /etc/passwd <span class=p>|</span> awk -F <span class=s2>&#34;:&#34;</span> <span class=s1>&#39;{print $3+1}&#39;</span>
</span></span><span class=line><span class=cl><span class=m>1</span>
</span></span><span class=line><span class=cl><span class=m>2</span>
</span></span><span class=line><span class=cl><span class=m>3</span>
</span></span><span class=line><span class=cl><span class=m>4</span>
</span></span><span class=line><span class=cl><span class=m>5</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 使用-v参数可以像awk中的变量赋值</span>
</span></span><span class=line><span class=cl>cat /etc/passwd <span class=p>|</span> awk -F <span class=s2>&#34;:&#34;</span> -v <span class=nv>num</span><span class=o>=</span><span class=m>1</span> <span class=s1>&#39;{print $3+num}&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 内置变量</span>
</span></span><span class=line><span class=cl><span class=c1># FILENAME 文件名</span>
</span></span><span class=line><span class=cl><span class=c1># NR 行号</span>
</span></span><span class=line><span class=cl><span class=c1># NF 列号</span>
</span></span><span class=line><span class=cl>cat /etc/passwd <span class=p>|</span> awk -F <span class=s2>&#34;:&#34;</span> <span class=s1>&#39;{print &#34;filename=&#34;FILENAME, &#34;row_number=&#34;NR, &#34;col_number&#34;NF}&#39;</span>
</span></span><span class=line><span class=cl><span class=o>[</span>root@centos72 shell_t<span class=o>]</span><span class=c1># cat /etc/passwd | awk -F &#34;:&#34; &#39;{print &#34;filename=&#34;FILENAME, &#34;row_number=&#34;NR, &#34;col_number&#34;NF}&#39;</span>
</span></span><span class=line><span class=cl><span class=nv>filename</span><span class=o>=</span>- <span class=nv>row_number</span><span class=o>=</span><span class=m>1</span> col_number7
</span></span><span class=line><span class=cl><span class=nv>filename</span><span class=o>=</span>- <span class=nv>row_number</span><span class=o>=</span><span class=m>2</span> col_number7
</span></span><span class=line><span class=cl><span class=nv>filename</span><span class=o>=</span>- <span class=nv>row_number</span><span class=o>=</span><span class=m>3</span> col_number7
</span></span></code></pre></div><p>awk截取ip</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>ifconfig <span class=p>|</span> awk <span class=s1>&#39;/netmask/ {print $2}&#39;</span>
</span></span><span class=line><span class=cl>172.17.0.1
</span></span><span class=line><span class=cl>192.168.37.131
</span></span><span class=line><span class=cl>127.0.0.1
</span></span></code></pre></div><h1 id=sort>sort<a hidden class=anchor aria-hidden=true href=#sort>#</a></h1><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>cat <span class=s>&lt;&lt;EOF &gt; sort.txt
</span></span></span><span class=line><span class=cl><span class=s>aa:1:tom
</span></span></span><span class=line><span class=cl><span class=s>bb:0:jack
</span></span></span><span class=line><span class=cl><span class=s>dd:5:jarry
</span></span></span><span class=line><span class=cl><span class=s>cc:4:lucy
</span></span></span><span class=line><span class=cl><span class=s>ee:3:mike
</span></span></span><span class=line><span class=cl><span class=s>EOF</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>sort sort.txt   <span class=c1>#按照字母序排序</span>
</span></span><span class=line><span class=cl>aa:1:tom
</span></span><span class=line><span class=cl>bb:0:jack
</span></span><span class=line><span class=cl>cc:4:lucy
</span></span><span class=line><span class=cl>dd:5:jarry
</span></span><span class=line><span class=cl>ee:3:mike
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>sort -r sort.txt    <span class=c1>#-r指定降序排序</span>
</span></span><span class=line><span class=cl>ee:3:mike
</span></span><span class=line><span class=cl>dd:5:jarry
</span></span><span class=line><span class=cl>cc:4:lucy
</span></span><span class=line><span class=cl>bb:0:jack
</span></span><span class=line><span class=cl>aa:1:tom
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>sort -t : -k <span class=m>2</span> sort.txt <span class=c1>#-t指定分隔符   -k指定对哪一列排序</span>
</span></span><span class=line><span class=cl>bb:0:jack
</span></span><span class=line><span class=cl>aa:1:tom
</span></span><span class=line><span class=cl>ee:3:mike
</span></span><span class=line><span class=cl>cc:4:lucy
</span></span><span class=line><span class=cl>dd:5:jarry
</span></span></code></pre></div><h1 id=nohup>nohup<a hidden class=anchor aria-hidden=true href=#nohup>#</a></h1><p>nohup命令将程序以忽略挂起信号的方式后台运行，输出的结果不打印到终端而是保存在当前目录的nohup.out文件中，如果当前目录下的nohup.out文件无法写入会保存到$HOME/nohup.out文件中</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>nohup ping baidu.com
</span></span><span class=line><span class=cl>nohup: ignoring input and appending output to ‘nohup.out’   <span class=c1>#进程会hang在这儿，不能执行其他命令，如果ctrl+c结束程序，那么执行的程序也会停止</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>nohup ping bilibili.com <span class=p>&amp;</span>
</span></span><span class=line><span class=cl>nohup: ignoring input and appending output to ‘nohup.out’ <span class=c1>#进程会hang在这儿,但是ctrl+c结束结束程序后，执行的程序不会停止</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>nohup ping baidu.com &gt; ping.log <span class=p>&amp;</span> <span class=c1># 把程序的标准输出重定向到指定文件</span>
</span></span><span class=line><span class=cl>nohup ping baidu.com &gt;ping.log <span class=p>&amp;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>#   标准输出 1  </span>
</span></span><span class=line><span class=cl><span class=c1>#   标准错误输出 2</span>
</span></span><span class=line><span class=cl>nohup ping baidu.com &gt; ping.log 2&gt;<span class=p>&amp;</span><span class=m>1</span> <span class=p>&amp;</span> <span class=c1># 把程序的标准输出及出错信息都写入到指定文件</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>nohup ping baidu.com &gt; /dev/null 2&gt;<span class=p>&amp;</span><span class=m>1</span> <span class=p>&amp;</span> <span class=c1># 把程序的输出写入到linux的黑洞文件立即销毁</span>
</span></span></code></pre></div><p>把程序的标准输出和标准错误输出写入文件</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=c1># 把标准输出写入app.log,标准错误输出写入err.log</span>
</span></span><span class=line><span class=cl>nohup ping baidu.com &gt; ping-app.log 2&gt;ping-err.log <span class=p>&amp;</span>
</span></span><span class=line><span class=cl>nohup ping baidu.com 1&gt;ping-app.log 2&gt;ping-err.log <span class=p>&amp;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 把标准输出标准错误输出都写入app.log文件</span>
</span></span><span class=line><span class=cl>nohup ping baidu.com &gt; app.log 2&gt;<span class=p>&amp;</span><span class=m>1</span> <span class=p>&amp;</span>
</span></span><span class=line><span class=cl>nohup ping baidu.com <span class=p>&amp;</span>&gt;app.log <span class=p>&amp;</span>
</span></span></code></pre></div><p>nohup 执行的命令后如果要结束程序就需要取查进程号kill</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>ps -ef<span class=p>|</span>grep stdout
</span></span><span class=line><span class=cl>UID          PID    PPID  C STIME TTY          TIME CMD
</span></span><span class=line><span class=cl>aiiqh     <span class=m>798370</span>  <span class=m>798026</span>  <span class=m>0</span> 09:26 pts/0    00:00:00 python3 stdout_stderr.py
</span></span><span class=line><span class=cl>aiiqh     <span class=m>799200</span>  <span class=m>798026</span>  <span class=m>0</span> 09:59 pts/0    00:00:00 grep --color<span class=o>=</span>auto stdout
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>kill</span> <span class=m>798370</span> 
</span></span></code></pre></div><h1 id=定时任务>定时任务<a hidden class=anchor aria-hidden=true href=#定时任务>#</a></h1><h2 id=at>at<a hidden class=anchor aria-hidden=true href=#at>#</a></h2><p>at命令可用于执行定时任务，但是只执行一次，at定时任务的执行依赖atd后台服务，所以需要确保atd在后台运行</p><p>at定时任务也只能精确到分钟</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=o>[</span>root@centos72 shell_t<span class=o>]</span><span class=c1># at 09:40</span>
</span></span><span class=line><span class=cl>at&gt; <span class=nb>echo</span> <span class=s2>&#34;</span><span class=k>$(</span>date +%H:%M:%S<span class=k>)</span><span class=s2>&#34;</span> &gt; at.log
</span></span><span class=line><span class=cl>at&gt; &lt;EOT&gt;
</span></span><span class=line><span class=cl>job <span class=m>9</span> at Thu Oct  <span class=m>6</span> 09:40:00 <span class=m>2022</span>
</span></span></code></pre></div><h2 id=batch>batch<a hidden class=anchor aria-hidden=true href=#batch>#</a></h2><p>batch命令用于在指定时间，当系统不繁忙时执行任务，用法与at相似</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>batch
</span></span><span class=line><span class=cl>at&gt; <span class=nb>echo</span> <span class=s2>&#34;</span><span class=k>$(</span>date +%H:%M:%S<span class=k>)</span><span class=s2>&#34;</span> &gt; batch.log
</span></span></code></pre></div><h2 id=crontab>crontab<a hidden class=anchor aria-hidden=true href=#crontab>#</a></h2><p>crontab依赖crond后台进程每分钟检查一次定时任务进行执行
crond检查/var/spool/cron文件夹下的文件进行解析执行里面的定时任务，除此之外还会检查 /etc/cron.d目录以及 /etc/anaccrontab里面存放的是每小时、每天、每周、每月需要执行的定时任务</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>crontab -e
</span></span><span class=line><span class=cl>* * * * * sh test.sh
</span></span><span class=line><span class=cl><span class=c1>#第一个*是分钟</span>
</span></span><span class=line><span class=cl><span class=c1>#第二个*是小时</span>
</span></span><span class=line><span class=cl><span class=c1>#第三个*是天</span>
</span></span><span class=line><span class=cl><span class=c1>#第四个*是月</span>
</span></span><span class=line><span class=cl><span class=c1>#第五个*是星期几</span>
</span></span><span class=line><span class=cl><span class=c1># Example of job definition:</span>
</span></span><span class=line><span class=cl><span class=c1># .---------------- minute (0 - 59)</span>
</span></span><span class=line><span class=cl><span class=c1># |  .------------- hour (0 - 23)</span>
</span></span><span class=line><span class=cl><span class=c1># |  |  .---------- day of month (1 - 31)</span>
</span></span><span class=line><span class=cl><span class=c1># |  |  |  .------- month (1 - 12) OR jan,feb,mar,apr ...</span>
</span></span><span class=line><span class=cl><span class=c1># |  |  |  |  .---- day of week (0 - 6) (Sunday=0 or 7) OR sun,mon,tue,wed,thu,fri,sat</span>
</span></span><span class=line><span class=cl><span class=c1># |  |  |  |  |</span>
</span></span><span class=line><span class=cl><span class=c1># *  *  *  *  * user-name  command to be executed</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>#特殊符号</span>
</span></span><span class=line><span class=cl><span class=c1># * 代表每的意思 * * * * * 代表每分钟执行一次</span>
</span></span><span class=line><span class=cl><span class=c1># - 代表范围的意思 1-10 * * * * 代表每小时的0到10分钟之内都执行意思</span>
</span></span><span class=line><span class=cl><span class=c1># , 代表分割    1,3,5 * * * * 代表每小时的第一、三、五分钟执行</span>
</span></span><span class=line><span class=cl><span class=c1># /n 每隔n执行 */5 * * * * 每五分钟执行一次 0 7-11/2 * * * 每天7点到11点每隔2小时执行一次 30 10/2 * * * 从10点30分开始每2小时执行一次</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>或者直接编辑 /var/spool/cron/root
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>要删除定时任务也可以 crontab -e 或者编辑 /var/spool/cron/root 删除
</span></span></code></pre></div><p>定时任务执行后会发送一个邮件给linux用户，使用(postfix服务),会提示you have mail in /var/spool/mail/root</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>su myd
</span></span><span class=line><span class=cl><span class=o>[</span>myd@centos72 root<span class=o>]</span>$ mailx -s <span class=s2>&#34;test&#34;</span> root
</span></span><span class=line><span class=cl>hello, i am myd!
</span></span><span class=line><span class=cl>.
</span></span><span class=line><span class=cl>EOT
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>exit</span>
</span></span><span class=line><span class=cl><span class=o>[</span>root@centos72 ~<span class=o>]</span><span class=c1># mail</span>
</span></span><span class=line><span class=cl>Heirloom Mail version 12.5 7/5/10.  Type ? <span class=k>for</span> help.
</span></span><span class=line><span class=cl><span class=s2>&#34;/var/spool/mail/root&#34;</span>: <span class=m>1363</span> messages <span class=m>1</span> new <span class=m>1338</span> unread
</span></span><span class=line><span class=cl> U1361 <span class=o>(</span>Cron Daemon<span class=o>)</span>         Sun Oct  <span class=m>2</span> 18:15  29/1053  <span class=s2>&#34;Cron &lt;root@centos72&gt; sh /root/shell_t/test.sh /root/shell_t /root/backup2&#34;</span>
</span></span><span class=line><span class=cl> U1362 <span class=o>(</span>Cron Daemon<span class=o>)</span>         Sun Oct  <span class=m>2</span> 18:16  29/1053  <span class=s2>&#34;Cron &lt;root@centos72&gt; sh /root/shell_t/test.sh /root/shell_t /root/backup2&#34;</span>
</span></span><span class=line><span class=cl>&gt;N1363 myd@centos72.localdo  Thu Oct  <span class=m>6</span> 09:23  18/601   <span class=s2>&#34;test&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>&amp;</span> <span class=m>1363</span>
</span></span><span class=line><span class=cl>Message 1363:
</span></span><span class=line><span class=cl>From myd@centos72.localdomain  Thu Oct  <span class=m>6</span> 09:23:49 <span class=m>2022</span>
</span></span><span class=line><span class=cl>Return-Path: &lt;myd@centos72.localdomain&gt;
</span></span><span class=line><span class=cl>X-Original-To: root
</span></span><span class=line><span class=cl>Delivered-To: root@centos72.localdomain
</span></span><span class=line><span class=cl>Date: Thu, <span class=m>06</span> Oct <span class=m>2022</span> 09:23:49 +0800
</span></span><span class=line><span class=cl>To: root@centos72.localdomain
</span></span><span class=line><span class=cl>Subject: <span class=nb>test</span>
</span></span><span class=line><span class=cl>User-Agent: Heirloom mailx 12.5 7/5/10
</span></span><span class=line><span class=cl>Content-Type: text/plain<span class=p>;</span> <span class=nv>charset</span><span class=o>=</span>us-ascii
</span></span><span class=line><span class=cl>From: myd@centos72.localdomain
</span></span><span class=line><span class=cl>Status: R
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>hello, i am myd!
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>&amp;</span> 
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>#发送文件夹中的内容</span>
</span></span><span class=line><span class=cl>mailx -s <span class=s2>&#34;test&#34;</span> root &lt; test.mail
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>exit</span>
</span></span><span class=line><span class=cl><span class=o>[</span>root@centos72 ~<span class=o>]</span><span class=c1># mail</span>
</span></span><span class=line><span class=cl>Heirloom Mail version 12.5 7/5/10.  Type ? <span class=k>for</span> help.
</span></span><span class=line><span class=cl><span class=s2>&#34;/var/spool/mail/root&#34;</span>: <span class=m>1366</span> messages <span class=m>3</span> new <span class=m>1340</span> unread
</span></span><span class=line><span class=cl> U1361 <span class=o>(</span>Cron Daemon<span class=o>)</span>         Sun Oct  <span class=m>2</span> 18:15  29/1053  <span class=s2>&#34;Cron &lt;root@centos72&gt; sh /root/shell_t/test.sh /root/shell_t /root/backup2&#34;</span>
</span></span><span class=line><span class=cl> U1362 <span class=o>(</span>Cron Daemon<span class=o>)</span>         Sun Oct  <span class=m>2</span> 18:16  29/1053  <span class=s2>&#34;Cron &lt;root@centos72&gt; sh /root/shell_t/test.sh /root/shell_t /root/backup2&#34;</span>
</span></span><span class=line><span class=cl>  <span class=m>1363</span> myd@centos72.localdo  Thu Oct  <span class=m>6</span> 09:23  19/612   <span class=s2>&#34;test&#34;</span>
</span></span><span class=line><span class=cl>&gt;N1364 myd@centos72.localdo  Thu Oct  <span class=m>6</span> 09:26  16/637   <span class=s2>&#34;*** SECURITY information for centos72 ***&#34;</span>
</span></span><span class=line><span class=cl> N1365 myd@centos72.localdo  Thu Oct  <span class=m>6</span> 09:27  16/637   <span class=s2>&#34;*** SECURITY information for centos72 ***&#34;</span>
</span></span><span class=line><span class=cl> N1366 myd@centos72.localdo  Thu Oct  <span class=m>6</span> 09:28  18/606   <span class=s2>&#34;test&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>&amp;</span> <span class=m>1366</span>
</span></span><span class=line><span class=cl>Message 1366:
</span></span><span class=line><span class=cl>From myd@centos72.localdomain  Thu Oct  <span class=m>6</span> 09:28:46 <span class=m>2022</span>
</span></span><span class=line><span class=cl>Return-Path: &lt;myd@centos72.localdomain&gt;
</span></span><span class=line><span class=cl>X-Original-To: root
</span></span><span class=line><span class=cl>Delivered-To: root@centos72.localdomain
</span></span><span class=line><span class=cl>Date: Thu, <span class=m>06</span> Oct <span class=m>2022</span> 09:28:46 +0800
</span></span><span class=line><span class=cl>To: root@centos72.localdomain
</span></span><span class=line><span class=cl>Subject: <span class=nb>test</span>
</span></span><span class=line><span class=cl>User-Agent: Heirloom mailx 12.5 7/5/10
</span></span><span class=line><span class=cl>Content-Type: text/plain<span class=p>;</span> <span class=nv>charset</span><span class=o>=</span>us-ascii
</span></span><span class=line><span class=cl>From: myd@centos72.localdomain
</span></span><span class=line><span class=cl>Status: R
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>content from txt file
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>&amp;</span> 
</span></span></code></pre></div><h1 id=向指定登陆的终端发送信息>向指定登陆的终端发送信息<a hidden class=anchor aria-hidden=true href=#向指定登陆的终端发送信息>#</a></h1><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>ps -ef<span class=p>|</span>grep ssh
</span></span><span class=line><span class=cl>aiiqh     <span class=m>798025</span>  <span class=m>797922</span>  <span class=m>0</span> 09:07 ?        00:00:00 sshd: aiiqh@pts/0
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;msg&#34;</span> &gt;&gt; /dev/pts/0
</span></span></code></pre></div><h1 id=获取后台执行程序的输出>获取后台执行程序的输出<a hidden class=anchor aria-hidden=true href=#获取后台执行程序的输出>#</a></h1><p>参考链接：https://juejin.cn/post/7089818727524335630</p><p>在linux的<code>/proc/{pid}/fd</code>目录下存在三个文件</p><ol><li>标准输入，描述符为 0，默认就是键盘输入</li><li>标准输出，描述符为 1，默认就是输出到屏幕</li><li>标准输出，描述符为 2，默认还是输出到屏幕</li></ol><h2 id=使用测试程序进行测试>使用测试程序进行测试<a hidden class=anchor aria-hidden=true href=#使用测试程序进行测试>#</a></h2><p>stdout_stderr.py:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>time</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>sys</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>while</span> <span class=kc>True</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>ts</span> <span class=o>=</span> <span class=nb>int</span><span class=p>(</span><span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>())</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=n>ts</span> <span class=o>%</span> <span class=mi>2</span> <span class=o>==</span> <span class=mi>0</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;stdout now time is </span><span class=si>{</span><span class=n>ts</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>,</span> <span class=n>file</span><span class=o>=</span><span class=n>sys</span><span class=o>.</span><span class=n>stdout</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>sys</span><span class=o>.</span><span class=n>stdout</span><span class=o>.</span><span class=n>flush</span><span class=p>()</span>  <span class=c1>#不缓存</span>
</span></span><span class=line><span class=cl>    <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;stderr now time is </span><span class=si>{</span><span class=n>ts</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>,</span> <span class=n>file</span><span class=o>=</span><span class=n>sys</span><span class=o>.</span><span class=n>stderr</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>sys</span><span class=o>.</span><span class=n>stderr</span><span class=o>.</span><span class=n>flush</span><span class=p>()</span>  <span class=c1>#不缓存</span>
</span></span><span class=line><span class=cl>    <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span>
</span></span></code></pre></div><p>后台运行</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=c1>#使用nohup命令后台运行程序，程序运行输出会被nohup进行接管</span>
</span></span><span class=line><span class=cl>nohup python3 stdout_stderr.py <span class=p>&amp;</span>
</span></span><span class=line><span class=cl><span class=c1>#或者</span>
</span></span><span class=line><span class=cl><span class=c1>#必须要指定日志输出文件才行，/dev/null 这种都不会生效</span>
</span></span><span class=line><span class=cl>python3 stdout_stderr.py <span class=p>&amp;</span>&gt;stdout_stderr.log <span class=p>&amp;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>ps -ef<span class=p>|</span>grep stdout
</span></span><span class=line><span class=cl>aiiqh     <span class=m>798370</span>  <span class=m>798026</span>  <span class=m>0</span> 09:26 pts/0    00:00:00 python3 stdout_stderr.py
</span></span><span class=line><span class=cl>aiiqh     <span class=m>799007</span>  <span class=m>798026</span>  <span class=m>0</span> 09:49 pts/0    00:00:00 grep --color<span class=o>=</span>auto std
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>pid <span class=m>798370</span> 是nohup程序
</span></span><span class=line><span class=cl>pid <span class=m>798026</span> 是python3程序
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>#由于python3的输出被nohup接管了，所以取nohup里查看</span>
</span></span><span class=line><span class=cl><span class=nb>cd</span> /proc/798370/fd
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>ls -la
</span></span><span class=line><span class=cl>total <span class=m>0</span>
</span></span><span class=line><span class=cl>dr-x------ <span class=m>2</span> aiiqh aiiqh  <span class=m>0</span> Oct <span class=m>22</span> 09:44 .
</span></span><span class=line><span class=cl>dr-xr-xr-x <span class=m>9</span> aiiqh aiiqh  <span class=m>0</span> Oct <span class=m>22</span> 09:26 ..
</span></span><span class=line><span class=cl>l-wx------ <span class=m>1</span> aiiqh aiiqh <span class=m>64</span> Oct <span class=m>22</span> 09:44 <span class=m>0</span> -&gt; /dev/null
</span></span><span class=line><span class=cl>l-wx------ <span class=m>1</span> aiiqh aiiqh <span class=m>64</span> Oct <span class=m>22</span> 09:44 <span class=m>1</span> -&gt; /home/aiiqh/python_proj/script/nohup.out
</span></span><span class=line><span class=cl>l-wx------ <span class=m>1</span> aiiqh aiiqh <span class=m>64</span> Oct <span class=m>22</span> 09:44 <span class=m>2</span> -&gt; /home/aiiqh/python_proj/script/nohup.out
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>#查看标准输出</span>
</span></span><span class=line><span class=cl>tail -f <span class=m>1</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>#查看标准错误输出</span>
</span></span><span class=line><span class=cl>tail -f <span class=m>2</span>
</span></span></code></pre></div><h1 id=head>head<a hidden class=anchor aria-hidden=true href=#head>#</a></h1><p>head 命令用于查看文件的头部信息</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>cat <span class=s>&lt;&lt;EOF &gt; test-head.txt
</span></span></span><span class=line><span class=cl><span class=s>this is line 1
</span></span></span><span class=line><span class=cl><span class=s>this is line 2
</span></span></span><span class=line><span class=cl><span class=s>this is line 3
</span></span></span><span class=line><span class=cl><span class=s>this is line 4
</span></span></span><span class=line><span class=cl><span class=s>this is line 5
</span></span></span><span class=line><span class=cl><span class=s>this is line 6
</span></span></span><span class=line><span class=cl><span class=s>this is line 7
</span></span></span><span class=line><span class=cl><span class=s>this is line 8
</span></span></span><span class=line><span class=cl><span class=s>this is line 9
</span></span></span><span class=line><span class=cl><span class=s>this is line 10
</span></span></span><span class=line><span class=cl><span class=s>this is line 11
</span></span></span><span class=line><span class=cl><span class=s>this is line 12
</span></span></span><span class=line><span class=cl><span class=s>EOF</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>#默认显示十行</span>
</span></span><span class=line><span class=cl>head test-head.txt
</span></span><span class=line><span class=cl>this is line <span class=m>1</span>
</span></span><span class=line><span class=cl>this is line <span class=m>2</span>
</span></span><span class=line><span class=cl>...
</span></span><span class=line><span class=cl>this is line <span class=m>9</span>
</span></span><span class=line><span class=cl>this is line <span class=m>10</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>#-n参数指定显示几行</span>
</span></span><span class=line><span class=cl>head -n <span class=m>5</span> test-head.txt 
</span></span><span class=line><span class=cl>this is line <span class=m>1</span>
</span></span><span class=line><span class=cl>this is line <span class=m>2</span>
</span></span><span class=line><span class=cl>this is line <span class=m>3</span>
</span></span><span class=line><span class=cl>this is line <span class=m>4</span>
</span></span><span class=line><span class=cl>this is line <span class=m>5</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>#-c参数指定显示几字节</span>
</span></span><span class=line><span class=cl>head -c <span class=m>50</span> test-head.txt 
</span></span><span class=line><span class=cl>this is line <span class=m>1</span>
</span></span><span class=line><span class=cl>this is line <span class=m>2</span>
</span></span><span class=line><span class=cl>this is line <span class=m>3</span>
</span></span><span class=line><span class=cl>this 
</span></span></code></pre></div><h1 id=tail-1>tail<a hidden class=anchor aria-hidden=true href=#tail-1>#</a></h1><p>tail 命令用于查看文件的末端内容</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=c1>#默认显示文件的最后10行</span>
</span></span><span class=line><span class=cl>tail test-head.txt 
</span></span><span class=line><span class=cl>this is line <span class=m>3</span>
</span></span><span class=line><span class=cl>this is line <span class=m>4</span>
</span></span><span class=line><span class=cl>this is line <span class=m>5</span>
</span></span><span class=line><span class=cl>this is line <span class=m>6</span>
</span></span><span class=line><span class=cl>this is line <span class=m>7</span>
</span></span><span class=line><span class=cl>this is line <span class=m>8</span>
</span></span><span class=line><span class=cl>this is line <span class=m>9</span>
</span></span><span class=line><span class=cl>this is line <span class=m>10</span>
</span></span><span class=line><span class=cl>this is line <span class=m>11</span>
</span></span><span class=line><span class=cl>this is line <span class=m>12</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>#-n参数用于指定查看文件的最后几行</span>
</span></span><span class=line><span class=cl>tail -n <span class=m>5</span> test-head.txt 
</span></span><span class=line><span class=cl>this is line <span class=m>8</span>
</span></span><span class=line><span class=cl>this is line <span class=m>9</span>
</span></span><span class=line><span class=cl>this is line <span class=m>10</span>
</span></span><span class=line><span class=cl>this is line <span class=m>11</span>
</span></span><span class=line><span class=cl>this is line <span class=m>12</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>#-c参数用于指定查看文件的最后几字节</span>
</span></span><span class=line><span class=cl>tail -c <span class=m>50</span> test-head.txt 
</span></span><span class=line><span class=cl><span class=m>9</span>
</span></span><span class=line><span class=cl>this is line <span class=m>10</span>
</span></span><span class=line><span class=cl>this is line <span class=m>11</span>
</span></span><span class=line><span class=cl>this is line <span class=m>12</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>#-f参数用于指定循环读取，文件有新内容追加会进行打印</span>
</span></span><span class=line><span class=cl>tail -f test-head.txt 
</span></span><span class=line><span class=cl>this is line <span class=m>3</span>
</span></span><span class=line><span class=cl>this is line <span class=m>4</span>
</span></span><span class=line><span class=cl>this is line <span class=m>5</span>
</span></span><span class=line><span class=cl>this is line <span class=m>6</span>
</span></span><span class=line><span class=cl>this is line <span class=m>7</span>
</span></span><span class=line><span class=cl>this is line <span class=m>8</span>
</span></span><span class=line><span class=cl>this is line <span class=m>9</span>
</span></span><span class=line><span class=cl>this is line <span class=m>10</span>
</span></span><span class=line><span class=cl>this is line <span class=m>11</span>
</span></span><span class=line><span class=cl>this is line <span class=m>12</span>
</span></span></code></pre></div><h1 id=more>more<a hidden class=anchor aria-hidden=true href=#more>#</a></h1><p>more 与 cat命令类似，以分页的形式查看文件</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=c1>#-{num}参数指定一页显示几行</span>
</span></span><span class=line><span class=cl><span class=c1>#+{num}参数指定从第几行开始</span>
</span></span><span class=line><span class=cl><span class=c1>#enter 用于显示下一行</span>
</span></span><span class=line><span class=cl><span class=c1>#space 用于显示下一页</span>
</span></span><span class=line><span class=cl><span class=c1>#b 用于回到上一页</span>
</span></span><span class=line><span class=cl><span class=c1>#q 用于退出</span>
</span></span><span class=line><span class=cl><span class=c1>#v 用于调期vi指令并指向当前行,退出后还是more命令</span>
</span></span><span class=line><span class=cl>more -3 +2 test-head.txt
</span></span><span class=line><span class=cl>this is line <span class=m>2</span>
</span></span><span class=line><span class=cl>this is line <span class=m>3</span>
</span></span><span class=line><span class=cl>this is line <span class=m>4</span>
</span></span><span class=line><span class=cl>--More--<span class=o>(</span>32%<span class=o>)</span>
</span></span></code></pre></div><h1 id=netstat>netstat<a hidden class=anchor aria-hidden=true href=#netstat>#</a></h1><p>netstat 用于显示linux网络状态</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=c1>#-a 参数用于所有socket</span>
</span></span><span class=line><span class=cl><span class=c1>#-n或--numeric 直接使用IP地址，而不显示域名</span>
</span></span><span class=line><span class=cl><span class=c1>#-p或--programs 显示正在使用Socket的程序识别码和程序名称</span>
</span></span><span class=line><span class=cl><span class=c1>#-t或--tcp 显示TCP传输协议的连线状况</span>
</span></span><span class=line><span class=cl><span class=c1>#-u或--udp 显示UDP传输协议的连线状况</span>
</span></span><span class=line><span class=cl>netstat -anp
</span></span><span class=line><span class=cl><span class=o>(</span>Not all processes could be identified, non-owned process info
</span></span><span class=line><span class=cl> will not be shown, you would have to be root to see it all.<span class=o>)</span>
</span></span><span class=line><span class=cl>Active Internet connections <span class=o>(</span>servers and established<span class=o>)</span>
</span></span><span class=line><span class=cl>Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name    
</span></span><span class=line><span class=cl>tcp        <span class=m>0</span>      <span class=m>0</span> 127.0.0.1:33491         0.0.0.0:*               LISTEN      -                   
</span></span><span class=line><span class=cl>tcp        <span class=m>0</span>      <span class=m>0</span> 0.0.0.0:22              0.0.0.0:*               LISTEN      -                   
</span></span><span class=line><span class=cl>tcp        <span class=m>0</span>      <span class=m>0</span> 127.0.0.1:45227         0.0.0.0:*               LISTEN      3761/node           
</span></span><span class=line><span class=cl>tcp        <span class=m>0</span>      <span class=m>0</span> 127.0.0.53:53           0.0.0.0:*               LISTEN      -                   
</span></span><span class=line><span class=cl>tcp        <span class=m>0</span>      <span class=m>0</span> 127.0.0.1:45227         127.0.0.1:46626         ESTABLISHED 4224/node           
</span></span><span class=line><span class=cl>tcp        <span class=m>0</span>      <span class=m>0</span> 127.0.0.1:50826         127.0.0.1:45227         ESTABLISHED -                   
</span></span><span class=line><span class=cl>tcp        <span class=m>0</span>      <span class=m>0</span> 127.0.0.1:45227         127.0.0.1:58744         ESTABLISHED 5070/node
</span></span><span class=line><span class=cl>...
</span></span><span class=line><span class=cl>udp        <span class=m>0</span>      <span class=m>0</span> 127.0.0.53:53           0.0.0.0:*                           -                   
</span></span><span class=line><span class=cl>udp        <span class=m>0</span>      <span class=m>0</span> 192.168.52.128:68       0.0.0.0:*                           -                   
</span></span><span class=line><span class=cl>raw6       <span class=m>0</span>      <span class=m>0</span> :::58                   :::*                    <span class=m>7</span>           - 
</span></span><span class=line><span class=cl>Active UNIX domain sockets <span class=o>(</span>servers and established<span class=o>)</span>
</span></span><span class=line><span class=cl>Proto RefCnt Flags       Type       State         I-Node   PID/Program name     Path
</span></span><span class=line><span class=cl>unix  <span class=m>2</span>      <span class=o>[</span> ACC <span class=o>]</span>     STREAM     LISTENING     <span class=m>32724</span>    -                    /run/dbus/system_bus_socket
</span></span><span class=line><span class=cl>unix  <span class=m>2</span>      <span class=o>[</span> ACC <span class=o>]</span>     STREAM     LISTENING     <span class=m>32726</span>    -                    /run/docker.sock
</span></span><span class=line><span class=cl>unix  <span class=m>2</span>      <span class=o>[</span> ACC <span class=o>]</span>     STREAM     LISTENING     <span class=m>14730</span>    -                    /run/snapd.socket
</span></span><span class=line><span class=cl>unix  <span class=m>2</span>      <span class=o>[</span> ACC <span class=o>]</span>     STREAM     LISTENING     <span class=m>14732</span>    -                    /run/snapd-snap.socket
</span></span><span class=line><span class=cl>unix  <span class=m>2</span>      <span class=o>[</span> ACC <span class=o>]</span>     STREAM     LISTENING     <span class=m>14734</span>    -                    /run/uuidd/request
</span></span></code></pre></div></div><footer class=post-footer><ul class=post-tags></ul><nav class=paginav><a class=next href=https://examplesite.com/posts/my-first-post/><span class=title>Next »</span><br><span>My First Post</span></a></nav><div class=share-buttons><a target=_blank rel="noopener noreferrer" aria-label="share Linux on twitter" href="https://twitter.com/intent/tweet/?text=Linux&url=https%3a%2f%2fexamplesite.com%2fposts%2flinux%2f&hashtags="><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM195.519 424.544c135.939.0 210.268-112.643 210.268-210.268.0-3.218.0-6.437-.153-9.502 14.406-10.421 26.973-23.448 36.935-38.314-13.18 5.824-27.433 9.809-42.452 11.648 15.326-9.196 26.973-23.602 32.49-40.92-14.252 8.429-30.038 14.56-46.896 17.931-13.487-14.406-32.644-23.295-53.946-23.295-40.767.0-73.87 33.104-73.87 73.87.0 5.824.613 11.494 1.992 16.858-61.456-3.065-115.862-32.49-152.337-77.241-6.284 10.881-9.962 23.601-9.962 37.088.0 25.594 13.027 48.276 32.95 61.456-12.107-.307-23.448-3.678-33.41-9.196v.92c0 35.862 25.441 65.594 59.311 72.49-6.13 1.686-12.72 2.606-19.464 2.606-4.751.0-9.348-.46-13.946-1.38 9.349 29.426 36.628 50.728 68.965 51.341-25.287 19.771-57.164 31.571-91.8 31.571-5.977.0-11.801-.306-17.625-1.073 32.337 21.15 71.264 33.41 112.95 33.41z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Linux on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fexamplesite.com%2fposts%2flinux%2f&title=Linux&summary=Linux&source=https%3a%2f%2fexamplesite.com%2fposts%2flinux%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Linux on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fexamplesite.com%2fposts%2flinux%2f&title=Linux"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Linux on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fexamplesite.com%2fposts%2flinux%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Linux on whatsapp" href="https://api.whatsapp.com/send?text=Linux%20-%20https%3a%2f%2fexamplesite.com%2fposts%2flinux%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Linux on telegram" href="https://telegram.me/share/url?text=Linux&url=https%3a%2f%2fexamplesite.com%2fposts%2flinux%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentcolor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></div></footer></article></main><footer class=footer><span>&copy; 2022 <a href=https://examplesite.com/>Moyuduo's Blog</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>