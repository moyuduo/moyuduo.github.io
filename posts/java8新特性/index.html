<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Java8新特性 | Moyuduo's Blog</title><meta name=keywords content><meta name=description content="Java8新特性 Lambda表达式 简介 Lambda表达式可以取代大部分匿名内部类，可以优化代码结构。
可以取代匿名内部类？什么意思呢？
在以前如果我们需要对集合排序，我们是这样做：
Integer[] arr= {3,2,1}; Arrays.sort(arr, new Comparator<Integer>() { @Override public int compare(Integer o1, Integer o2) { return o1-o2; } }); System.out.println(Arrays.toString(arr)); 使用Arrays类提供的sort方法传入一个指定排序规则的Comparator，如果我们使用匿名内部类的话，可以看到整个内部类中只用return o1-o2;语句是有用的，其他的都是多余的，为了这一句话我们多写了很多代码。那么，有了Lambda表达式后我们就可以很轻松的解决这个问题了。
java8中新增了Lambda表达式，现在我们可以这样做：
Integer[] arr= {3,2,1}; Arrays.sort(arr, (x,y)->x-y); System.out.println(Arrays.toString(arr)); 那么Lambda是如何实现的呢？我们知道sort方法需要传入一个Comparator，而Comparator是一个接口，那么我们来看看Comparator接口是怎样定义的：
@FunctionalInterface public interface Comparator<T> { Comparator能够支持Lambda表达式的秘密就是类上标注的@FunctionalInterface注解，被这个注解标注的接口只能有一个抽象方法，我们知道我们写Lambda表达式时并没有指定方法，那么当使用Lambda表达式时我们重新的就是这个方法。
Lambda表达式基本语法 语法形式为 () -> {}，其中 () 用来描述参数列表，{} 用来描述方法体，-> 为 lambda运算符
接口无参无返回
@FunctionalInterface interface NoParamNoReturn { void lambda(); } @Test public void test() { NoParamNoReturn noParamNoReturn=()->{System.out.println(&#34;No param No return&#34;);}; noParamNoReturn."><meta name=author content="Me"><link rel=canonical href=https://moyuduo.github.io/posts/java8%E6%96%B0%E7%89%B9%E6%80%A7/><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.bc1149f4a72aa4858d3a9f71462f75e5884ffe8073ea9d6d5761d5663d651e20.css integrity="sha256-vBFJ9KcqpIWNOp9xRi915YhP/oBz6p1tV2HVZj1lHiA=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://moyuduo.github.io/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=16x16 href=https://moyuduo.github.io/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=https://moyuduo.github.io/%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=https://moyuduo.github.io/%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=https://moyuduo.github.io/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-123-45","auto"),ga("send","pageview"))</script><meta property="og:title" content="Java8新特性"><meta property="og:description" content="Java8新特性 Lambda表达式 简介 Lambda表达式可以取代大部分匿名内部类，可以优化代码结构。
可以取代匿名内部类？什么意思呢？
在以前如果我们需要对集合排序，我们是这样做：
Integer[] arr= {3,2,1}; Arrays.sort(arr, new Comparator<Integer>() { @Override public int compare(Integer o1, Integer o2) { return o1-o2; } }); System.out.println(Arrays.toString(arr)); 使用Arrays类提供的sort方法传入一个指定排序规则的Comparator，如果我们使用匿名内部类的话，可以看到整个内部类中只用return o1-o2;语句是有用的，其他的都是多余的，为了这一句话我们多写了很多代码。那么，有了Lambda表达式后我们就可以很轻松的解决这个问题了。
java8中新增了Lambda表达式，现在我们可以这样做：
Integer[] arr= {3,2,1}; Arrays.sort(arr, (x,y)->x-y); System.out.println(Arrays.toString(arr)); 那么Lambda是如何实现的呢？我们知道sort方法需要传入一个Comparator，而Comparator是一个接口，那么我们来看看Comparator接口是怎样定义的：
@FunctionalInterface public interface Comparator<T> { Comparator能够支持Lambda表达式的秘密就是类上标注的@FunctionalInterface注解，被这个注解标注的接口只能有一个抽象方法，我们知道我们写Lambda表达式时并没有指定方法，那么当使用Lambda表达式时我们重新的就是这个方法。
Lambda表达式基本语法 语法形式为 () -> {}，其中 () 用来描述参数列表，{} 用来描述方法体，-> 为 lambda运算符
接口无参无返回
@FunctionalInterface interface NoParamNoReturn { void lambda(); } @Test public void test() { NoParamNoReturn noParamNoReturn=()->{System.out.println(&#34;No param No return&#34;);}; noParamNoReturn."><meta property="og:type" content="article"><meta property="og:url" content="https://moyuduo.github.io/posts/java8%E6%96%B0%E7%89%B9%E6%80%A7/"><meta property="og:image" content="https://moyuduo.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-11-27T16:16:14+08:00"><meta property="article:modified_time" content="2022-11-27T16:16:14+08:00"><meta property="og:site_name" content="Moyuduo's Blog"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://moyuduo.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="Java8新特性"><meta name=twitter:description content="Java8新特性 Lambda表达式 简介 Lambda表达式可以取代大部分匿名内部类，可以优化代码结构。
可以取代匿名内部类？什么意思呢？
在以前如果我们需要对集合排序，我们是这样做：
Integer[] arr= {3,2,1}; Arrays.sort(arr, new Comparator<Integer>() { @Override public int compare(Integer o1, Integer o2) { return o1-o2; } }); System.out.println(Arrays.toString(arr)); 使用Arrays类提供的sort方法传入一个指定排序规则的Comparator，如果我们使用匿名内部类的话，可以看到整个内部类中只用return o1-o2;语句是有用的，其他的都是多余的，为了这一句话我们多写了很多代码。那么，有了Lambda表达式后我们就可以很轻松的解决这个问题了。
java8中新增了Lambda表达式，现在我们可以这样做：
Integer[] arr= {3,2,1}; Arrays.sort(arr, (x,y)->x-y); System.out.println(Arrays.toString(arr)); 那么Lambda是如何实现的呢？我们知道sort方法需要传入一个Comparator，而Comparator是一个接口，那么我们来看看Comparator接口是怎样定义的：
@FunctionalInterface public interface Comparator<T> { Comparator能够支持Lambda表达式的秘密就是类上标注的@FunctionalInterface注解，被这个注解标注的接口只能有一个抽象方法，我们知道我们写Lambda表达式时并没有指定方法，那么当使用Lambda表达式时我们重新的就是这个方法。
Lambda表达式基本语法 语法形式为 () -> {}，其中 () 用来描述参数列表，{} 用来描述方法体，-> 为 lambda运算符
接口无参无返回
@FunctionalInterface interface NoParamNoReturn { void lambda(); } @Test public void test() { NoParamNoReturn noParamNoReturn=()->{System.out.println(&#34;No param No return&#34;);}; noParamNoReturn."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://moyuduo.github.io/posts/"},{"@type":"ListItem","position":2,"name":"Java8新特性","item":"https://moyuduo.github.io/posts/java8%E6%96%B0%E7%89%B9%E6%80%A7/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Java8新特性","name":"Java8新特性","description":"Java8新特性 Lambda表达式 简介 Lambda表达式可以取代大部分匿名内部类，可以优化代码结构。\n可以取代匿名内部类？什么意思呢？\n在以前如果我们需要对集合排序，我们是这样做：\nInteger[] arr= {3,2,1}; Arrays.sort(arr, new Comparator\u0026lt;Integer\u0026gt;() { @Override public int compare(Integer o1, Integer o2) { return o1-o2; } }); System.out.println(Arrays.toString(arr)); 使用Arrays类提供的sort方法传入一个指定排序规则的Comparator，如果我们使用匿名内部类的话，可以看到整个内部类中只用return o1-o2;语句是有用的，其他的都是多余的，为了这一句话我们多写了很多代码。那么，有了Lambda表达式后我们就可以很轻松的解决这个问题了。\njava8中新增了Lambda表达式，现在我们可以这样做：\nInteger[] arr= {3,2,1}; Arrays.sort(arr, (x,y)-\u0026gt;x-y); System.out.println(Arrays.toString(arr)); 那么Lambda是如何实现的呢？我们知道sort方法需要传入一个Comparator，而Comparator是一个接口，那么我们来看看Comparator接口是怎样定义的：\n@FunctionalInterface public interface Comparator\u0026lt;T\u0026gt; { Comparator能够支持Lambda表达式的秘密就是类上标注的@FunctionalInterface注解，被这个注解标注的接口只能有一个抽象方法，我们知道我们写Lambda表达式时并没有指定方法，那么当使用Lambda表达式时我们重新的就是这个方法。\nLambda表达式基本语法 语法形式为 () -\u0026gt; {}，其中 () 用来描述参数列表，{} 用来描述方法体，-\u0026gt; 为 lambda运算符\n接口无参无返回\n@FunctionalInterface interface NoParamNoReturn { void lambda(); } @Test public void test() { NoParamNoReturn noParamNoReturn=()-\u0026gt;{System.out.println(\u0026#34;No param No return\u0026#34;);}; noParamNoReturn.","keywords":[],"articleBody":"Java8新特性 Lambda表达式 简介 Lambda表达式可以取代大部分匿名内部类，可以优化代码结构。\n可以取代匿名内部类？什么意思呢？\n在以前如果我们需要对集合排序，我们是这样做：\nInteger[] arr= {3,2,1}; Arrays.sort(arr, new Comparator\u003cInteger\u003e() { @Override public int compare(Integer o1, Integer o2) { return o1-o2; } }); System.out.println(Arrays.toString(arr)); 使用Arrays类提供的sort方法传入一个指定排序规则的Comparator，如果我们使用匿名内部类的话，可以看到整个内部类中只用return o1-o2;语句是有用的，其他的都是多余的，为了这一句话我们多写了很多代码。那么，有了Lambda表达式后我们就可以很轻松的解决这个问题了。\njava8中新增了Lambda表达式，现在我们可以这样做：\nInteger[] arr= {3,2,1}; Arrays.sort(arr, (x,y)-\u003ex-y); System.out.println(Arrays.toString(arr)); 那么Lambda是如何实现的呢？我们知道sort方法需要传入一个Comparator，而Comparator是一个接口，那么我们来看看Comparator接口是怎样定义的：\n@FunctionalInterface public interface Comparator\u003cT\u003e { Comparator能够支持Lambda表达式的秘密就是类上标注的@FunctionalInterface注解，被这个注解标注的接口只能有一个抽象方法，我们知道我们写Lambda表达式时并没有指定方法，那么当使用Lambda表达式时我们重新的就是这个方法。\nLambda表达式基本语法 语法形式为 () -\u003e {}，其中 () 用来描述参数列表，{} 用来描述方法体，-\u003e 为 lambda运算符\n接口无参无返回\n@FunctionalInterface interface NoParamNoReturn { void lambda(); } @Test public void test() { NoParamNoReturn noParamNoReturn=()-\u003e{System.out.println(\"No param No return\");}; noParamNoReturn.lambda(); } //如果方法内只有一个语句那么{}可以省略 @Test public void test() { NoParamNoReturn noParamNoReturn=()-\u003eSystem.out.println(\"No param No return\"); noParamNoReturn.lambda(); } 接口有一个或多个参数无返回\n@FunctionalInterface interface OneParamNoReturn{ void lambda(int x); } @Test public void test() { OneParamNoReturn oneParamNoReturn=(int x)-\u003eSystem.out.println(x); oneParamNoReturn.lambda(10); } //如果方法只有一个参数那么（）可以省略 //方法参数的类型也可以省略，编译器会根据方法参数类型推断 @Test public void test() { OneParamNoReturn oneParamNoReturn=x-\u003eSystem.out.println(x); oneParamNoReturn.lambda(10); } 接口无参数有返回值\n@FunctionalInterface interface NoParamHasReturn{ int lambda(); } @Test public void test() { NoParamHasReturn noParamHasReturn=()-\u003e{return 10;}; noParamHasReturn.lambda(); } //当方法只有return语句时，可以省略{}和return @Test public void test() { NoParamHasReturn noParamHasReturn=()-\u003e10; noParamHasReturn.lambda(); } 接口有一个或多个参数有返回值\n@FunctionalInterface interface HasParamHasReturn{ int lambda(int x,int y); } @Test public void test() { HasParamHasReturn hasParamHasReturn=(x,y)-\u003ex+y; hasParamHasReturn.lambda(10, 20); } Lambda表达式引用方法 我们可以使用lambda表达式把接口快速指向一个已经实现了的方法\n语法：方法归属者::方法名\t静态方法的归属者为类名，普通方法归属者为对象\n@FunctionalInterface interface HasParamHasReturn{ int lambda(int x,int y); } public class LambdaTest{ public int add(int x,int y) { return x+y; } //lambda表达式指向对象方法 @Test public void test() { LambdaTest lt=new LambdaTest(); HasParamHasReturn hasParamHasReturn=lt::add; hasParamHasReturn.lambda(10, 20); } public static int sub(int x,int y) { return x-y; } //lambda表达式引用静态方法 @Test public void test12() { HasParamHasReturn hasParamHasReturn=LambdaTest::sub; hasParamHasReturn.lambda(10, 20); } } //类名::实例方法 特殊情况,只有当参数列表为一个参数并且这个参数是方法调用者或多个参数并且第一个参数是调用者其他参数是参数列表 @Test public void test() { BiPredicate\u003cString,String\u003e bp=(x,y)-\u003ex.equals(y); //也可以简写为 BiPredicate\u003cString,String\u003e bp2=String::equals; } lambda表达式引用构造函数创建对象\n语法：类名::new；\nclass User{ String name; int age; public User() {} public User(String name, int age) { super(); this.name = name; this.age = age; } } @FunctionalInterface interface UserCreatorBlankConstruct{ User getUser(); } //使用lambda表达式引用构造器 @Test public void test() { UserCreatorBlankConstruct creator1=User::new; creator1.getUser(); } @FunctionalInterface interface UserCreatorParamConstruct{ User getUser(String name,int age); } @Test public void test13() { UserCreatorParamConstruct creator2=User::new; creator2.getUser(\"tom\", 20); } java8为我们提供了4个核心的函数式接口 消费型接口 @FunctionalInterface public interface Consumer\u003cT\u003e { void accept(T t); } 供给型接口\n@FunctionalInterface public interface Supplier\u003cT\u003e { T get(); } 函数型接口\n@FunctionalInterface public interface Function\u003cT, R\u003e { R apply(T t); } 断言型接口\n@FunctionalInterface public interface Predicate\u003cT\u003e { boolean test(T t); } 怎么用呢？\n遍历数组\n@Test public void test() { List\u003cInteger\u003e list=new ArrayList\u003c\u003e(); list.add(1); list.add(3); list.add(5); list.add(7); list.forEach(System.out::println); } 创建对象\n@Test public void test() { Supplier\u003cUser\u003e supplier=User::new; User user = supplier.get(); } 去除前后空格并转为大写\n@Test public void test16() { Function\u003cString, String\u003e fun=s-\u003e{s=s.trim();s=s.toUpperCase();return s;}; String apply = fun.apply(\" abCd\"); } 删除集合元素\n@Test public void test() { List\u003cUser\u003e list=new ArrayList\u003c\u003e(); list.add(new User(\"tom\",20)); list.add(new User(\"jack\",18)); list.add(new User(\"marry\",22)); list.removeIf(e-\u003ee.getName()==\"jack\"); } 那如果我们要用内置函数式接口创建对象，怎么做呢？\n@Test public void test() { Supplier\u003cUser\u003e supplier=User::new; User user = supplier.get(); System.out.println(user);//User [name=null, age=0] } 那到底使用的是哪个构造器呢？通过输出创建的对象可以发现调用的是无参构造器，即调用构造器参数个数对应Supplier中get方法的参数个数的构造器\n那么问题又来了，如果我们要使用两个参数的构造器，那Supplier也不行啊，Function的apply方法也只有一个参数，怎么办？那我们去java.util.function包下找找有没有可以用的接口\n@FunctionalInterface public interface BiFunction\u003cT, U, R\u003e { R apply(T t, U u); } //使用内置函数式接口创建对象 @Test public void test20() { BiFunction\u003cString,Integer,User\u003e biFunction=User::new; User user = biFunction.apply(\"tom\", 20); System.out.println(user);//User [name=tom, age=20] } 四个基本接口参数个数不够用也可以类似的去java.util.function包下找找有没有申明好的函数式接口\n最后一个问题，我发现\nlist.forEach(System.out::println); 遍历List时，使用的forEach的参数Consumer的accept方法是这么写的，我第一个想到的是，out是System的一个内部类，但是当我点进去，发现是这样的\npublic final static PrintStream out = null; out是一个静态的成员变量，那我的理解就是System.out其实是一个对象\n这样System.out::println的写法其实也就是\t对象名::方法名\n我是这样理解的，如果错了还请赐教！\nStream 介绍 java8添加了一个抽象流Stream，可以让我们像写sql一样操作集合元素。Stream将要处理的元素看做是一种流，\t在管道中传输，并进行处理，最后由终止操作得到处理的结果。\n什么是Stream？ Stream是一个来自特定元素队列并支持聚合操作\n元素是具体类型的对象，形成一个队列。 数据源是流的来源。 聚合操作是类似sql一样的操作，比如filter, map, reduce, find, match, sorted等。 Stream自己不会存储元素。 Stream不会改变源对象。 Stream操作是延迟执行的。 创建流 串行流 stream()：即单线程的方式去操作流\n并行流 parallelStream():即多线程方式去操作流\n@Test public void test() { //1通过Collection提供的stream()和parallelStream()方法 List\u003cString\u003e list = Arrays.asList(\"a\",\"b\",\"c\"); Stream\u003cString\u003e stream1 = list.stream(); Stream\u003cString\u003e stream2 = list.parallelStream(); //2通过Arrays的静态方法stream() String[] strs= {\"a\",\"b\",\"c\"}; Stream\u003cString\u003e stream3 = Arrays.stream(strs); //3通过Stream类中的静态方法of() Stream\u003cString\u003e stream4 = Stream.of(\"a\",\"b\",\"c\"); //4通过Stream类的iterate方法生成无限流 Stream\u003cInteger\u003e stream5 = Stream.iterate(0, (x)-\u003ex+1); //5通过Stream的generate方法生成无限流 Stream.generate(()-\u003eMath.random()); } 中间操作 过滤 使用 filter(Predicate\u003c? super T\u003e predicate)来按照一定规则对流中元素进行过滤\n@Test public void test() { List\u003cInteger\u003e list = Arrays.asList(1,2,3,4,5); Stream\u003cInteger\u003e stream = list.stream(); stream = stream.filter((x)-\u003ex.compareTo(2)\u003e0); stream.forEach(System.out::println); } 输出： 3 4 5 @Test public void test2() { List\u003cInteger\u003e list = Arrays.asList(1,2,3,4,5); Stream\u003cInteger\u003e stream = list.stream(); stream = stream.filter( (x)-\u003e{ System.out.println(x); return x.compareTo(2)\u003e0;} ); } 结果：没有任何输出，这也就是前面说的Stream操作是延迟执行的，只有当终止操作这些中间操作才会依次执行 截断 使元素的个数不超过指定的数目\n@Test public void test() { List\u003cInteger\u003e list = Arrays.asList(1,2,3,4,5); Stream\u003cInteger\u003e stream = list.stream(); stream=stream.limit(3); stream.forEach(System.out::println); } 输出： 1 2 3 可以看到只输出了给定个元素 跳过元素 跳过流中前几个元素\n@Test public void test4() { List\u003cInteger\u003e list = Arrays.asList(1,2,3,4,5); Stream\u003cInteger\u003e stream = list.stream(); stream=stream.skip(2); stream.forEach(System.out::println); } 输出: 3 4 5 跳过了前两个元素 唯一筛选 两个元素通过hashCode()判断两个元素是否相同\n@Test public void test5() { List\u003cInteger\u003e list = Arrays.asList(1,2,3,4,5,5); Stream\u003cInteger\u003e stream = list.stream(); stream.distinct().forEach(System.out::println); } 输出: 1 2 3 4 5 映射 map(method)接受一个方法，把流中的元素按照方法进行转换\n@Test public void test() { List\u003cString\u003e list = Arrays.asList(\"a\",\"b\",\"c\"); Stream\u003cString\u003e stream = list.stream(); stream=stream.map((x)-\u003ex.toUpperCase()); stream.forEach(System.out::println); } 输出： A B C flatMap(method)也是接受一个函数作为参数，但是与map，不同的是如果这个函数生成的本来就是流，它会把函数生成流中的元素加到流中\n//这个函数本身就生成流 public static Stream\u003cCharacter\u003e toStream(String s){ List\u003cCharacter\u003e list=new ArrayList\u003cCharacter\u003e(); char[] chs = s.toCharArray(); for (char c : chs) { list.add(c); } Stream\u003cCharacter\u003e stream = list.stream(); return stream; } @Test public void test() { List\u003cString\u003e list = Arrays.asList(\"aaa\",\"bbb\",\"ccc\"); Stream\u003cStream\u003cCharacter\u003e\u003e stream = //由于函数本身就生成流，所以流中加入的还是流 list.stream().map(StreamTest::toStream); //遍历的时候需要先从流中取出流，在遍历 stream.forEach((s)-\u003es.forEach(System.out::println)); } //然而我们可以使用flatMap进行改进 @Test public void test() { List\u003cString\u003e list = Arrays.asList(\"aaa\",\"bbb\",\"ccc\"); list.stream().flatMap(StreamTest::toStream).forEach(System.out::println); } 输出： a a a b b b c c c 终止操作 所有匹配 当所有元素都匹配时，allMatch(Predicate\u003c? super T\u003e predicate)才会返回true\n@Test public void test() { List\u003cString\u003e list = Arrays.asList(\"aaa\",\"bbb\",\"ccc\"); boolean allMatch = list.stream().allMatch((s)-\u003es.length()\u003e2); System.out.println(allMatch); } 输出： true 任一匹配 当Stream中任一一个元素匹配时，anyMatch(Predicate\u003c? super T\u003e predicate)返回true\n@Test public void test() { List\u003cString\u003e list = Arrays.asList(\"aaa\",\"bbb\",\"ccc\"); boolean anyMatch = list.stream().anyMatch((s)-\u003es.equals(\"bbb\")); System.out.println(anyMatch); } 输出： true 所有不匹配 当Stream中所有的元素都不匹配时，noneMatch(Predicate\u003c? super T\u003e predicate)返回true\n@Test public void test() { List\u003cString\u003e list = Arrays.asList(\"aaa\",\"bbb\",\"ccc\"); boolean noneMatch = list.stream().noneMatch((s)-\u003es.equals(\"ddd\")); System.out.println(noneMatch); } 输出： true 第一个元素 返回当前流中的第一个元素\n@Test public void test() { List\u003cInteger\u003e list = Arrays.asList(1,2,3,4,5); Optional\u003cInteger\u003e findFirst = list.stream().findFirst(); System.out.println(findFirst.get()); } 输出： 1 任一一个元素 返回当前流中的任一一个元素\n@Test public void test() { List\u003cInteger\u003e list = Arrays.asList(1,2,3,4,5); Optional\u003cInteger\u003e findAny = list.stream().findAny(); System.out.println(findAny.get()); } 输出： 1 //使用并行流试试 @Test public void test13() { List\u003cInteger\u003e list = Arrays.asList(1,2,3,4,5); Optional\u003cInteger\u003e findAny = list.parallelStream().findAny(); System.out.println(findAny.get()); } 输出： 3 流中元素个数 返回流中的元素个数\n@Test public void test14() { List\u003cInteger\u003e list = Arrays.asList(1,2,3,4,5); long count = list.stream().count(); System.out.println(count); } 输出： 5 流中的最大值 返回流中元素的最大值\n@Test public void test15() { List\u003cInteger\u003e list = Arrays.asList(1,2,3,4,5); Optional\u003cInteger\u003e max = list.stream().max(Integer::compare); System.out.println(max.get()); } 输出： 5 流中的最小值 返回流中的最小值\n@Test public void test16() { List\u003cInteger\u003e list = Arrays.asList(1,2,3,4,5); Optional\u003cInteger\u003e min = list.stream().min(Integer::compare); System.out.println(min.get()); } 输出： 1 规约 将流中的元素反复结合得到一个最终值\n@Test public void test() { List\u003cInteger\u003e list = Arrays.asList(1,2,3,4,5); Optional\u003cInteger\u003e reduce = list.stream().reduce(Integer::sum); System.out.println(reduce.get()); Integer reduce2 = list.stream().reduce(0, (x,y)-\u003e{ System.out.println(x+\"-\u003e\"+y); return x+y; }); System.out.println(reduce2); } 输出： 15 0-\u003e1 1-\u003e2 3-\u003e3 6-\u003e4 10-\u003e5 15 可以看到当使用(T identity, BinaryOperator accumulator)时，identity即为最初和流中元素进行运算的，所以值不能为空，所以返回的不是Optional\n收集 将流转换成其他形式\n@Test public void test() { List\u003cInteger\u003e list = Arrays.asList(1,2,3,4,5,5); Set\u003cInteger\u003e collect = list.stream().collect(Collectors.toSet()); System.out.println(collect); } 输出： [1, 2, 3, 4, 5] @Test public void test() { List\u003cInteger\u003e list = Arrays.asList(1,2,3,4,5,5); Optional\u003cInteger\u003e collect = list.stream().collect(Collectors.maxBy(Integer::compareTo)); System.out.println(collect.get()); } 输出： 5 class Stu{ String name; Integer age; String gender; public Stu(String name, Integer age, String gender) { super(); this.name = name; this.age = age; this.gender = gender; } public String getName() { return name; } public void setName(String name) { this.name = name; } public Integer getAge() { return age; } public void setAge(Integer age) { this.age = age; } public String getGender() { return gender; } public void setGender(String gender) { this.gender = gender; } @Override public String toString() { return \"Stu [name=\" + name + \", age=\" + age + \", gender=\" + gender + \"]\"; } } //一级分组 @Test public void test() { List\u003cStu\u003e list = Arrays.asList( new Stu(\"张三\",20,\"男\"), new Stu(\"李四\",22,\"女\"), new Stu(\"王五\",18,\"男\"), new Stu(\"赵六\",20,\"女\"), new Stu(\"田七\",22,\"女\") ); Map\u003cString, List\u003cStu\u003e\u003e collect = list.stream().collect(Collectors.groupingBy(Stu::getGender)); System.out.println(collect); } 输出： {女=[Stu [name=李四, age=22, gender=女], Stu [name=赵六, age=20, gender=女], Stu [name=田七, age=22, gender=女]], 男=[Stu [name=张三, age=20, gender=男], Stu [name=王五, age=18, gender=男]]} //二级分组 @Test public void test21() { List\u003cStu\u003e list = Arrays.asList( new Stu(\"张三\",20,\"男\"), new Stu(\"李四\",22,\"女\"), new Stu(\"王五\",18,\"男\"), new Stu(\"赵六\",20,\"女\"), new Stu(\"田七\",22,\"女\") ); Map\u003cInteger, Map\u003cString, List\u003cStu\u003e\u003e\u003e collect = list.stream() .collect(Collectors.groupingBy(Stu::getAge, Collectors.groupingBy(Stu::getGender))); System.out.println(collect); } 输出： {18={男=[Stu [name=王五, age=18, gender=男]]}, 20={女=[Stu [name=赵六, age=20, gender=女]], 男=[Stu [name=张三, age=20, gender=男]]}, 22={女=[Stu [name=李四, age=22, gender=女], Stu [name=田七, age=22, gender=女]]}} //分区 @Test public void test22() { List\u003cStu\u003e list = Arrays.asList( new Stu(\"张三\",20,\"男\"), new Stu(\"李四\",22,\"女\"), new Stu(\"王五\",18,\"男\"), new Stu(\"赵六\",20,\"女\"), new Stu(\"田七\",22,\"女\") ); Map\u003cBoolean, List\u003cStu\u003e\u003e collect = list.stream() .collect(Collectors.partitioningBy((e)-\u003e((Stu)e).getAge()\u003e20)); System.out.println(collect); } 输出： {false=[Stu [name=张三, age=20, gender=男], Stu [name=王五, age=18, gender=男], Stu [name=赵六, age=20, gender=女]], true=[Stu [name=李四, age=22, gender=女], Stu [name=田七, age=22, gender=女]]} 接口默认方法和静态方法 默认方法 interface MyInterface1 { default String method1() { return \"myInterface1 default method\"; } } class MyClass{ public String method1() { return \"myClass method\"; } } /** * 父类和接口中都有相同的方法，默认使用父类的方法，即类优先 * @author 莫雨朵 * */ class MySubClass1 extends MyClass implements MyInterface1{ } @Test public void test1() { MySubClass1 mySubClass1=new MySubClass1(); System.out.println(mySubClass1.method1());//myClass method } 如果类的父类的方法和接口中方法名字相同且参数一致，子类还没有重写方法，那么默认使用父类的方法，即类优先\ninterface MyInterface1 { default String method1() { return \"myInterface1 default method\"; } } interface MyInterface2 { default String method1() { return \"myInterface2 default method\"; } } /** * 如果类实现的接口中有名字相同参数类型一致的默认方法，那么在类中必须重写 * @author 莫雨朵 * */ class MySubClass2 implements MyInterface1,MyInterface2{ @Override public String method1() { return MyInterface1.super.method1(); } } @Test public void test2() { MySubClass2 mySubClass2=new MySubClass2(); System.out.println(mySubClass2.method1());//myInterface1 default method } 如果类实现的接口中有名字相同参数类型一致的默认方法，那么在类中必须重写\n静态方法 interface MyInterface1 {\tstatic String method2() { return \"interface static method\"; } } @Test public void test3() { System.out.println(MyInterface1.method2());//interface static method } 时间 java8以前使用的时间很多方法都已经废弃了，而且不是线程安全的，java8提供了一系列的时间类，这些时间类都是线程安全的\nLocalDate、LocalTime、LocalDateTime 这三个关于时间的类在使用上都类似\n/** * LocalDate */ @Test public void test1() { LocalDate date1 = LocalDate.now(); System.out.println(date1);//2020-03-30 LocalDate plusYears = date1.plusYears(1); System.out.println(plusYears);//2021-03-30 LocalDate minusDays = date1.minusDays(2); System.out.println(minusDays);//2020-03-28 LocalDate date2 = LocalDate.of(2019, 3, 30); System.out.println(date2.getYear());//2019 } /** * LocalTime */ @Test public void test2() { LocalTime now = LocalTime.now(); System.out.println(now);//21:15:23.418 int minute = now.getMinute(); System.out.println(minute);//15 int second = now.getSecond(); System.out.println(second);//23 LocalTime of = LocalTime.of(10, 10, 10); System.out.println(of);//10:10:10 LocalTime minusMinutes = of.minusMinutes(2); System.out.println(minusMinutes);//10:08:10 LocalTime plusHours = of.plusHours(2); System.out.println(plusHours);//12:10:10 } /** * LocalDateTime */ @Test public void test3() { LocalDateTime now = LocalDateTime.now(); System.out.println(now);//2020-03-30T21:20:37.961 int minute = now.getMinute(); System.out.println(minute);//20 LocalDateTime plusMinutes = now.plusMinutes(20); System.out.println(plusMinutes);//2020-03-30T21:40:37.961 LocalDateTime minusYears = now.minusYears(2); System.out.println(minusYears);//2018-03-30T21:20:37.961 LocalDateTime of = LocalDateTime.of(2021, 3, 30, 21, 19, 50); System.out.println(of);//2021-03-30T21:19:50 } 时间戳 /** * Instant */ @Test public void test4() { Instant now = Instant.now(); System.out.println(now);//2020-03-30T13:26:10.640Z Instant plusSeconds = now.plusSeconds(10); System.out.println(plusSeconds);//2020-03-30T13:26:20.640Z //获取时间戳相对于1970年0时0分0秒的毫秒数 long epochMilli = plusSeconds.toEpochMilli(); System.out.println(epochMilli);//1585574780640 } Duration获取时间间隔 /** * Duration */ @Test public void test5() { Instant start = Instant.now(); Instant end = start.plusSeconds(10); Duration duration = Duration.between(start, end); long seconds = duration.getSeconds(); //获取时间间隔的秒数 System.out.println(seconds);//10 //获取时间间隔的毫秒数 long millis = duration.toMillis(); System.out.println(millis);//10000 } Peroid获取日期间隔 @Test public void test6() { LocalDate date1 = LocalDate.now(); LocalDate date2 = date1.plusYears(2); Period period = Period.between(date1, date2); //获取两时间间隔的月数,指两个月份的间隔数，并不是时间间隔的总月数 int months = period.getMonths(); System.out.println(months);//0 } TemporalAdjuster矫正日期 @Test public void test7() { LocalDate date1 = LocalDate.now(); System.out.println(date1);//2020-03-31 //TemporalAdjusters类中封装了一些常用地时间矫正方法 TemporalAdjuster next = TemporalAdjusters.next(DayOfWeek.FRIDAY); LocalDate date2 = date1.with(next); System.out.println(date2);//2020-04-03 //自定义时间矫正器 LocalDate date3 = date1.with(x-\u003e{ LocalDate ld=(LocalDate)x; DayOfWeek dayOfWeek = ld.getDayOfWeek(); if(dayOfWeek.equals(DayOfWeek.FRIDAY)) { return ld.plusDays(3); }else if(dayOfWeek.equals(DayOfWeek.SATURDAY)) { return ld.plusDays(2); }else { return ld.plusDays(1); } }); System.out.println(date3);//2020-04-01 } 由于TemporalAdjuster是一个函数式接口，所以我们可以使用lambda表达式自定义矫正规则\n@FunctionalInterface public interface TemporalAdjuster { Temporal adjustInto(Temporal temporal); } DateTimeFormatter格式化日期时间 @Test public void test8() { LocalDateTime dateTime1 = LocalDateTime.now(); System.out.println(dateTime1);//2020-03-31T18:28:04.256 DateTimeFormatter formatter1 = DateTimeFormatter.ISO_DATE; String format1 = dateTime1.format(formatter1); System.out.println(format1);//2020-03-31 DateTimeFormatter formatter2 = DateTimeFormatter.ofPattern(\"yyyy年MM月dd日HH时mm分ss秒\"); String format2 = dateTime1.format(formatter2); System.out.println(format2);//2020年03月31日18时28分04秒 LocalDateTime dateTime2 = LocalDateTime.parse(format2, formatter2); System.out.println(dateTime2);//2020-03-31T18:28:04 } ZoneDate @Test public void test9() { //获取可用时区 ZoneId.getAvailableZoneIds().forEach(System.out::println); LocalDate date1 = LocalDate.now(ZoneId.of(\"Asia/Tokyo\")); System.out.println(date1);//2020-03-31 } ZoneTime @Test public void test10() { LocalTime time1 = LocalTime.now(ZoneId.of(\"Asia/Tokyo\")); System.out.println(time1);//19:44:15.228 OffsetTime atOffset = time1.atOffset(ZoneOffset.ofHours(2)); System.out.println(atOffset);//19:44:15.228+02:00 } ZoneDateTime @Test public void test11() { LocalDateTime dateTime1 = LocalDateTime.now(ZoneId.of(\"Asia/Shanghai\")); System.out.println(dateTime1);//2020-03-31T18:51:07.136 ZonedDateTime atZone = dateTime1.atZone(ZoneId.of(\"Asia/Shanghai\")); System.out.println(atZone);//2020-03-31T18:51:07.136+08:00[Asia/Shanghai]\t+09:00表示时间比格林尼治时间快9小时 } 重复注解 @Retention(RetentionPolicy.RUNTIME) @Target(ElementType.METHOD) public @interface MAnnotation { String name() default \"\"; int age(); } public class AnnotataionTest { @Test public void test() throws Exception { Class\u003cAnnotataionTest\u003e clazz=AnnotataionTest.class; Method method = clazz.getMethod(\"good\", null); MAnnotation annotation = method.getAnnotation(MAnnotation.class); System.out.println(annotation.name()+\":\"+annotation.age()); } @MAnnotation(name=\"tom\",age=20) public void good() { } } 以前我们是这样使用注解，当要在一个方法上标注两个相同的注解时会报错，java8允许使用一个注解来存储注解，可以实现一个注解重复标注\n@Retention(RetentionPolicy.RUNTIME) @Target(ElementType.METHOD) @Repeatable(MAnnotations.class)//使用@Repeatable来标注存储注解的注解 public @interface MAnnotation { String name() default \"\"; int age(); } @Retention(RetentionPolicy.RUNTIME) @Target(ElementType.METHOD) public @interface MAnnotations { MAnnotation[] value(); } public class AnnotataionTest { @Test public void test() throws Exception { Class\u003cAnnotataionTest\u003e clazz=AnnotataionTest.class; Method method = clazz.getMethod(\"good\"); MAnnotation[] mAnnotations = method.getAnnotationsByType(MAnnotation.class); for (MAnnotation annotation : mAnnotations) { System.out.println(annotation.name()+\":\"+annotation.age()); } } @MAnnotation(name=\"tom\",age=20) @MAnnotation(name=\"jack\",age=25) public void good() { } } ","wordCount":"1835","inLanguage":"en","datePublished":"2022-11-27T16:16:14+08:00","dateModified":"2022-11-27T16:16:14+08:00","author":{"@type":"Person","name":"Me"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://moyuduo.github.io/posts/java8%E6%96%B0%E7%89%B9%E6%80%A7/"},"publisher":{"@type":"Organization","name":"Moyuduo's Blog","logo":{"@type":"ImageObject","url":"https://moyuduo.github.io/%3Clink%20/%20abs%20url%3E"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://moyuduo.github.io/ accesskey=h title="Moyuduo's Blog (Alt + H)"><img src=https://moyuduo.github.io/apple-touch-icon.png alt aria-label=logo height=35>Moyuduo's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://moyuduo.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://moyuduo.github.io/archives title=Archive><span>Archive</span></a></li><li><a href=https://moyuduo.github.io/categories/ title=Categories><span>Categories</span></a></li><li><a href=https://moyuduo.github.io/tags/ title=Tags><span>Tags</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>Java8新特性</h1></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#lambda表达式>Lambda表达式</a><ul><li><a href=#简介>简介</a></li><li><a href=#lambda表达式基本语法>Lambda表达式基本语法</a></li></ul></li><li><a href=#lambda表达式引用方法>Lambda表达式引用方法</a></li><li><a href=#java8为我们提供了4个核心的函数式接口>java8为我们提供了4个核心的函数式接口</a></li><li><a href=#stream>Stream</a><ul><li><a href=#介绍>介绍</a></li><li><a href=#什么是stream>什么是Stream？</a></li><li><a href=#创建流>创建流</a></li><li><a href=#中间操作>中间操作</a></li><li><a href=#终止操作>终止操作</a></li></ul></li><li><a href=#接口默认方法和静态方法>接口默认方法和静态方法</a><ul><li><a href=#默认方法>默认方法</a></li><li><a href=#静态方法>静态方法</a></li></ul></li><li><a href=#时间>时间</a><ul><li><a href=#localdatelocaltimelocaldatetime>LocalDate、LocalTime、LocalDateTime</a></li><li><a href=#时间戳>时间戳</a></li><li><a href=#duration获取时间间隔>Duration获取时间间隔</a></li><li><a href=#peroid获取日期间隔>Peroid获取日期间隔</a></li><li><a href=#temporaladjuster矫正日期>TemporalAdjuster矫正日期</a></li><li><a href=#datetimeformatter格式化日期时间>DateTimeFormatter格式化日期时间</a></li><li><a href=#zonedate>ZoneDate</a></li><li><a href=#zonetime>ZoneTime</a></li><li><a href=#zonedatetime>ZoneDateTime</a></li></ul></li><li><a href=#重复注解>重复注解</a></li></ul></nav></div></details></div><div class=post-content><h1 id=java8新特性>Java8新特性<a hidden class=anchor aria-hidden=true href=#java8新特性>#</a></h1><h2 id=lambda表达式>Lambda表达式<a hidden class=anchor aria-hidden=true href=#lambda表达式>#</a></h2><h3 id=简介>简介<a hidden class=anchor aria-hidden=true href=#简介>#</a></h3><blockquote><p>Lambda表达式可以取代大部分匿名内部类，可以优化代码结构。</p></blockquote><p>可以取代匿名内部类？什么意思呢？</p><p>在以前如果我们需要对集合排序，我们是这样做：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>Integer</span><span class=o>[]</span> <span class=n>arr</span><span class=o>=</span> <span class=o>{</span><span class=mi>3</span><span class=o>,</span><span class=mi>2</span><span class=o>,</span><span class=mi>1</span><span class=o>};</span>
</span></span><span class=line><span class=cl><span class=n>Arrays</span><span class=o>.</span><span class=na>sort</span><span class=o>(</span><span class=n>arr</span><span class=o>,</span> <span class=k>new</span> <span class=n>Comparator</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>&gt;()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=nd>@Override</span>
</span></span><span class=line><span class=cl>	<span class=kd>public</span> <span class=kt>int</span> <span class=nf>compare</span><span class=o>(</span><span class=n>Integer</span> <span class=n>o1</span><span class=o>,</span> <span class=n>Integer</span> <span class=n>o2</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>		<span class=k>return</span> <span class=n>o1</span><span class=o>-</span><span class=n>o2</span><span class=o>;</span>
</span></span><span class=line><span class=cl>	<span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>});</span>
</span></span><span class=line><span class=cl><span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>Arrays</span><span class=o>.</span><span class=na>toString</span><span class=o>(</span><span class=n>arr</span><span class=o>));</span>
</span></span></code></pre></div><p>使用Arrays类提供的sort方法传入一个指定排序规则的Comparator，如果我们使用匿名内部类的话，可以看到整个内部类中只用return o1-o2;语句是有用的，其他的都是多余的，为了这一句话我们多写了很多代码。那么，有了Lambda表达式后我们就可以很轻松的解决这个问题了。</p><p>java8中新增了Lambda表达式，现在我们可以这样做：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>Integer</span><span class=o>[]</span> <span class=n>arr</span><span class=o>=</span> <span class=o>{</span><span class=mi>3</span><span class=o>,</span><span class=mi>2</span><span class=o>,</span><span class=mi>1</span><span class=o>};</span>
</span></span><span class=line><span class=cl><span class=n>Arrays</span><span class=o>.</span><span class=na>sort</span><span class=o>(</span><span class=n>arr</span><span class=o>,</span> <span class=o>(</span><span class=n>x</span><span class=o>,</span><span class=n>y</span><span class=o>)-&gt;</span><span class=n>x</span><span class=o>-</span><span class=n>y</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>Arrays</span><span class=o>.</span><span class=na>toString</span><span class=o>(</span><span class=n>arr</span><span class=o>));</span>
</span></span></code></pre></div><p>那么Lambda是如何实现的呢？我们知道sort方法需要传入一个Comparator，而Comparator是一个接口，那么我们来看看Comparator接口是怎样定义的：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@FunctionalInterface</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>interface</span> <span class=nc>Comparator</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span> <span class=o>{</span>
</span></span></code></pre></div><p>Comparator能够支持Lambda表达式的秘密就是类上标注的@FunctionalInterface注解，被这个注解标注的接口只能有一个抽象方法，我们知道我们写Lambda表达式时并没有指定方法，那么当使用Lambda表达式时我们重新的就是这个方法。</p><h3 id=lambda表达式基本语法>Lambda表达式基本语法<a hidden class=anchor aria-hidden=true href=#lambda表达式基本语法>#</a></h3><p><strong>语法形式为 () -> {}，其中 () 用来描述参数列表，{} 用来描述方法体，-> 为 lambda运算符</strong></p><ol><li><p>接口<strong>无参无返回</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@FunctionalInterface</span>
</span></span><span class=line><span class=cl><span class=kd>interface</span> <span class=nc>NoParamNoReturn</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>	<span class=kt>void</span> <span class=nf>lambda</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nd>@Test</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kt>void</span> <span class=nf>test</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=n>NoParamNoReturn</span> <span class=n>noParamNoReturn</span><span class=o>=()-&gt;{</span><span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;No param No return&#34;</span><span class=o>);};</span>
</span></span><span class=line><span class=cl>  <span class=n>noParamNoReturn</span><span class=o>.</span><span class=na>lambda</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl><span class=c1>//如果方法内只有一个语句那么{}可以省略
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nd>@Test</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kt>void</span> <span class=nf>test</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=n>NoParamNoReturn</span> <span class=n>noParamNoReturn</span><span class=o>=()-&gt;</span><span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;No param No return&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>  <span class=n>noParamNoReturn</span><span class=o>.</span><span class=na>lambda</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div></li><li><p>接口<strong>有一个或多个参数无返回</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@FunctionalInterface</span>
</span></span><span class=line><span class=cl><span class=kd>interface</span> <span class=nc>OneParamNoReturn</span><span class=o>{</span>
</span></span><span class=line><span class=cl>	<span class=kt>void</span> <span class=nf>lambda</span><span class=o>(</span><span class=kt>int</span> <span class=n>x</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl><span class=nd>@Test</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kt>void</span> <span class=nf>test</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=n>OneParamNoReturn</span> <span class=n>oneParamNoReturn</span><span class=o>=(</span><span class=kt>int</span> <span class=n>x</span><span class=o>)-&gt;</span><span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>x</span><span class=o>);</span>
</span></span><span class=line><span class=cl>  <span class=n>oneParamNoReturn</span><span class=o>.</span><span class=na>lambda</span><span class=o>(</span><span class=mi>10</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl><span class=c1>//如果方法只有一个参数那么（）可以省略
</span></span></span><span class=line><span class=cl><span class=c1>//方法参数的类型也可以省略，编译器会根据方法参数类型推断
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nd>@Test</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kt>void</span> <span class=nf>test</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=n>OneParamNoReturn</span> <span class=n>oneParamNoReturn</span><span class=o>=</span><span class=n>x</span><span class=o>-&gt;</span><span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>x</span><span class=o>);</span>
</span></span><span class=line><span class=cl>  <span class=n>oneParamNoReturn</span><span class=o>.</span><span class=na>lambda</span><span class=o>(</span><span class=mi>10</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div></li><li><p>接口<strong>无参数有返回值</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@FunctionalInterface</span>
</span></span><span class=line><span class=cl><span class=kd>interface</span> <span class=nc>NoParamHasReturn</span><span class=o>{</span>
</span></span><span class=line><span class=cl>	<span class=kt>int</span> <span class=nf>lambda</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl><span class=nd>@Test</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kt>void</span> <span class=nf>test</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=n>NoParamHasReturn</span> <span class=n>noParamHasReturn</span><span class=o>=()-&gt;{</span><span class=k>return</span> <span class=mi>10</span><span class=o>;};</span>
</span></span><span class=line><span class=cl>  <span class=n>noParamHasReturn</span><span class=o>.</span><span class=na>lambda</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl><span class=c1>//当方法只有return语句时，可以省略{}和return
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nd>@Test</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kt>void</span> <span class=nf>test</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=n>NoParamHasReturn</span> <span class=n>noParamHasReturn</span><span class=o>=()-&gt;</span><span class=mi>10</span><span class=o>;</span>
</span></span><span class=line><span class=cl>  <span class=n>noParamHasReturn</span><span class=o>.</span><span class=na>lambda</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div></li><li><p>接口<strong>有一个或多个参数有返回值</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@FunctionalInterface</span>
</span></span><span class=line><span class=cl><span class=kd>interface</span> <span class=nc>HasParamHasReturn</span><span class=o>{</span>
</span></span><span class=line><span class=cl>	<span class=kt>int</span> <span class=nf>lambda</span><span class=o>(</span><span class=kt>int</span> <span class=n>x</span><span class=o>,</span><span class=kt>int</span> <span class=n>y</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl><span class=nd>@Test</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kt>void</span> <span class=nf>test</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=n>HasParamHasReturn</span> <span class=n>hasParamHasReturn</span><span class=o>=(</span><span class=n>x</span><span class=o>,</span><span class=n>y</span><span class=o>)-&gt;</span><span class=n>x</span><span class=o>+</span><span class=n>y</span><span class=o>;</span>
</span></span><span class=line><span class=cl>  <span class=n>hasParamHasReturn</span><span class=o>.</span><span class=na>lambda</span><span class=o>(</span><span class=mi>10</span><span class=o>,</span> <span class=mi>20</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div><h2 id=lambda表达式引用方法>Lambda表达式引用方法<a hidden class=anchor aria-hidden=true href=#lambda表达式引用方法>#</a></h2><p>我们可以使用lambda表达式把接口快速指向一个已经实现了的方法</p><p>语法：方法归属者::方法名 静态方法的归属者为类名，普通方法归属者为对象</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@FunctionalInterface</span>
</span></span><span class=line><span class=cl><span class=kd>interface</span> <span class=nc>HasParamHasReturn</span><span class=o>{</span>
</span></span><span class=line><span class=cl>	<span class=kt>int</span> <span class=nf>lambda</span><span class=o>(</span><span class=kt>int</span> <span class=n>x</span><span class=o>,</span><span class=kt>int</span> <span class=n>y</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>LambdaTest</span><span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=kd>public</span> <span class=kt>int</span> <span class=nf>add</span><span class=o>(</span><span class=kt>int</span> <span class=n>x</span><span class=o>,</span><span class=kt>int</span> <span class=n>y</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>x</span><span class=o>+</span><span class=n>y</span><span class=o>;</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=c1>//lambda表达式指向对象方法
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nd>@Test</span> <span class=kd>public</span> <span class=kt>void</span> <span class=nf>test</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>LambdaTest</span> <span class=n>lt</span><span class=o>=</span><span class=k>new</span> <span class=n>LambdaTest</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=n>HasParamHasReturn</span> <span class=n>hasParamHasReturn</span><span class=o>=</span><span class=n>lt</span><span class=o>::</span><span class=n>add</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=n>hasParamHasReturn</span><span class=o>.</span><span class=na>lambda</span><span class=o>(</span><span class=mi>10</span><span class=o>,</span> <span class=mi>20</span><span class=o>);</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kd>public</span> <span class=kd>static</span> <span class=kt>int</span> <span class=nf>sub</span><span class=o>(</span><span class=kt>int</span> <span class=n>x</span><span class=o>,</span><span class=kt>int</span> <span class=n>y</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>x</span><span class=o>-</span><span class=n>y</span><span class=o>;</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=c1>//lambda表达式引用静态方法
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nd>@Test</span>
</span></span><span class=line><span class=cl>  <span class=kd>public</span> <span class=kt>void</span> <span class=nf>test12</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>HasParamHasReturn</span> <span class=n>hasParamHasReturn</span><span class=o>=</span><span class=n>LambdaTest</span><span class=o>::</span><span class=n>sub</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=n>hasParamHasReturn</span><span class=o>.</span><span class=na>lambda</span><span class=o>(</span><span class=mi>10</span><span class=o>,</span> <span class=mi>20</span><span class=o>);</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span> 
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>//类名::实例方法 特殊情况,只有当参数列表为一个参数并且这个参数是方法调用者或多个参数并且第一个参数是调用者其他参数是参数列表
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nd>@Test</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kt>void</span> <span class=nf>test</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=n>BiPredicate</span><span class=o>&lt;</span><span class=n>String</span><span class=o>,</span><span class=n>String</span><span class=o>&gt;</span> <span class=n>bp</span><span class=o>=(</span><span class=n>x</span><span class=o>,</span><span class=n>y</span><span class=o>)-&gt;</span><span class=n>x</span><span class=o>.</span><span class=na>equals</span><span class=o>(</span><span class=n>y</span><span class=o>);</span>
</span></span><span class=line><span class=cl>  <span class=c1>//也可以简写为
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=n>BiPredicate</span><span class=o>&lt;</span><span class=n>String</span><span class=o>,</span><span class=n>String</span><span class=o>&gt;</span> <span class=n>bp2</span><span class=o>=</span><span class=n>String</span><span class=o>::</span><span class=n>equals</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div><p>lambda表达式引用构造函数创建对象</p><p>语法：类名::new；</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>class</span> <span class=nc>User</span><span class=o>{</span>
</span></span><span class=line><span class=cl>	<span class=n>String</span> <span class=n>name</span><span class=o>;</span>
</span></span><span class=line><span class=cl>	<span class=kt>int</span> <span class=n>age</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=kd>public</span> <span class=nf>User</span><span class=o>()</span> <span class=o>{}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=kd>public</span> <span class=nf>User</span><span class=o>(</span><span class=n>String</span> <span class=n>name</span><span class=o>,</span> <span class=kt>int</span> <span class=n>age</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>		<span class=kd>super</span><span class=o>();</span>
</span></span><span class=line><span class=cl>		<span class=k>this</span><span class=o>.</span><span class=na>name</span> <span class=o>=</span> <span class=n>name</span><span class=o>;</span>
</span></span><span class=line><span class=cl>		<span class=k>this</span><span class=o>.</span><span class=na>age</span> <span class=o>=</span> <span class=n>age</span><span class=o>;</span>
</span></span><span class=line><span class=cl>	<span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nd>@FunctionalInterface</span>
</span></span><span class=line><span class=cl><span class=kd>interface</span> <span class=nc>UserCreatorBlankConstruct</span><span class=o>{</span>
</span></span><span class=line><span class=cl>	<span class=n>User</span> <span class=nf>getUser</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>//使用lambda表达式引用构造器
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nd>@Test</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kt>void</span> <span class=nf>test</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=n>UserCreatorBlankConstruct</span> <span class=n>creator1</span><span class=o>=</span><span class=n>User</span><span class=o>::</span><span class=k>new</span><span class=o>;</span>
</span></span><span class=line><span class=cl>  <span class=n>creator1</span><span class=o>.</span><span class=na>getUser</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nd>@FunctionalInterface</span>
</span></span><span class=line><span class=cl><span class=kd>interface</span> <span class=nc>UserCreatorParamConstruct</span><span class=o>{</span>
</span></span><span class=line><span class=cl>	<span class=n>User</span> <span class=nf>getUser</span><span class=o>(</span><span class=n>String</span> <span class=n>name</span><span class=o>,</span><span class=kt>int</span> <span class=n>age</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nd>@Test</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kt>void</span> <span class=nf>test13</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=n>UserCreatorParamConstruct</span> <span class=n>creator2</span><span class=o>=</span><span class=n>User</span><span class=o>::</span><span class=k>new</span><span class=o>;</span>
</span></span><span class=line><span class=cl>  <span class=n>creator2</span><span class=o>.</span><span class=na>getUser</span><span class=o>(</span><span class=s>&#34;tom&#34;</span><span class=o>,</span> <span class=mi>20</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div><h2 id=java8为我们提供了4个核心的函数式接口>java8为我们提供了4个核心的函数式接口<a hidden class=anchor aria-hidden=true href=#java8为我们提供了4个核心的函数式接口>#</a></h2><ol><li>消费型接口</li></ol></li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@FunctionalInterface</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>interface</span> <span class=nc>Consumer</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span> <span class=o>{</span>
</span></span><span class=line><span class=cl><span class=kt>void</span> <span class=nf>accept</span><span class=o>(</span><span class=n>T</span> <span class=n>t</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div><ol start=2><li><p>供给型接口</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@FunctionalInterface</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>interface</span> <span class=nc>Supplier</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>T</span> <span class=nf>get</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div></li><li><p>函数型接口</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@FunctionalInterface</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>interface</span> <span class=nc>Function</span><span class=o>&lt;</span><span class=n>T</span><span class=o>,</span> <span class=n>R</span><span class=o>&gt;</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>R</span> <span class=nf>apply</span><span class=o>(</span><span class=n>T</span> <span class=n>t</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div></li><li><p>断言型接口</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@FunctionalInterface</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>interface</span> <span class=nc>Predicate</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>boolean</span> <span class=nf>test</span><span class=o>(</span><span class=n>T</span> <span class=n>t</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div><p>怎么用呢？</p><p>遍历数组</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@Test</span>
</span></span><span class=line><span class=cl>	<span class=kd>public</span> <span class=kt>void</span> <span class=nf>test</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>		<span class=n>List</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>&gt;</span> <span class=n>list</span><span class=o>=</span><span class=k>new</span> <span class=n>ArrayList</span><span class=o>&lt;&gt;();</span>
</span></span><span class=line><span class=cl>		<span class=n>list</span><span class=o>.</span><span class=na>add</span><span class=o>(</span><span class=mi>1</span><span class=o>);</span>
</span></span><span class=line><span class=cl>		<span class=n>list</span><span class=o>.</span><span class=na>add</span><span class=o>(</span><span class=mi>3</span><span class=o>);</span>
</span></span><span class=line><span class=cl>		<span class=n>list</span><span class=o>.</span><span class=na>add</span><span class=o>(</span><span class=mi>5</span><span class=o>);</span>
</span></span><span class=line><span class=cl>		<span class=n>list</span><span class=o>.</span><span class=na>add</span><span class=o>(</span><span class=mi>7</span><span class=o>);</span>
</span></span><span class=line><span class=cl>		<span class=n>list</span><span class=o>.</span><span class=na>forEach</span><span class=o>(</span><span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>::</span><span class=n>println</span><span class=o>);</span>
</span></span><span class=line><span class=cl>	<span class=o>}</span>
</span></span></code></pre></div><p>创建对象</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@Test</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kt>void</span> <span class=nf>test</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=n>Supplier</span><span class=o>&lt;</span><span class=n>User</span><span class=o>&gt;</span> <span class=n>supplier</span><span class=o>=</span><span class=n>User</span><span class=o>::</span><span class=k>new</span><span class=o>;</span>
</span></span><span class=line><span class=cl>  <span class=n>User</span> <span class=n>user</span> <span class=o>=</span> <span class=n>supplier</span><span class=o>.</span><span class=na>get</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div><p>去除前后空格并转为大写</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@Test</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kt>void</span> <span class=nf>test16</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=n>Function</span><span class=o>&lt;</span><span class=n>String</span><span class=o>,</span> <span class=n>String</span><span class=o>&gt;</span> <span class=n>fun</span><span class=o>=</span><span class=n>s</span><span class=o>-&gt;{</span><span class=n>s</span><span class=o>=</span><span class=n>s</span><span class=o>.</span><span class=na>trim</span><span class=o>();</span><span class=n>s</span><span class=o>=</span><span class=n>s</span><span class=o>.</span><span class=na>toUpperCase</span><span class=o>();</span><span class=k>return</span> <span class=n>s</span><span class=o>;};</span>
</span></span><span class=line><span class=cl>  <span class=n>String</span> <span class=n>apply</span> <span class=o>=</span> <span class=n>fun</span><span class=o>.</span><span class=na>apply</span><span class=o>(</span><span class=s>&#34; abCd&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div><p>删除集合元素</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@Test</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kt>void</span> <span class=nf>test</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=n>List</span><span class=o>&lt;</span><span class=n>User</span><span class=o>&gt;</span> <span class=n>list</span><span class=o>=</span><span class=k>new</span> <span class=n>ArrayList</span><span class=o>&lt;&gt;();</span>
</span></span><span class=line><span class=cl>  <span class=n>list</span><span class=o>.</span><span class=na>add</span><span class=o>(</span><span class=k>new</span> <span class=n>User</span><span class=o>(</span><span class=s>&#34;tom&#34;</span><span class=o>,</span><span class=mi>20</span><span class=o>));</span>
</span></span><span class=line><span class=cl>  <span class=n>list</span><span class=o>.</span><span class=na>add</span><span class=o>(</span><span class=k>new</span> <span class=n>User</span><span class=o>(</span><span class=s>&#34;jack&#34;</span><span class=o>,</span><span class=mi>18</span><span class=o>));</span>
</span></span><span class=line><span class=cl>  <span class=n>list</span><span class=o>.</span><span class=na>add</span><span class=o>(</span><span class=k>new</span> <span class=n>User</span><span class=o>(</span><span class=s>&#34;marry&#34;</span><span class=o>,</span><span class=mi>22</span><span class=o>));</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=n>list</span><span class=o>.</span><span class=na>removeIf</span><span class=o>(</span><span class=n>e</span><span class=o>-&gt;</span><span class=n>e</span><span class=o>.</span><span class=na>getName</span><span class=o>()==</span><span class=s>&#34;jack&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div><p>那如果我们要用内置函数式接口创建对象，怎么做呢？</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@Test</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kt>void</span> <span class=nf>test</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=n>Supplier</span><span class=o>&lt;</span><span class=n>User</span><span class=o>&gt;</span> <span class=n>supplier</span><span class=o>=</span><span class=n>User</span><span class=o>::</span><span class=k>new</span><span class=o>;</span>
</span></span><span class=line><span class=cl>  <span class=n>User</span> <span class=n>user</span> <span class=o>=</span> <span class=n>supplier</span><span class=o>.</span><span class=na>get</span><span class=o>();</span>
</span></span><span class=line><span class=cl>  <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>user</span><span class=o>);</span><span class=c1>//User [name=null, age=0]
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=o>}</span>
</span></span></code></pre></div><p>那到底使用的是哪个构造器呢？通过输出创建的对象可以发现调用的是无参构造器，即调用构造器参数个数对应Supplier中get方法的参数个数的构造器</p><p>那么问题又来了，如果我们要使用两个参数的构造器，那Supplier也不行啊，Function的apply方法也只有一个参数，怎么办？那我们去java.util.function包下找找有没有可以用的接口</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@FunctionalInterface</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>interface</span> <span class=nc>BiFunction</span><span class=o>&lt;</span><span class=n>T</span><span class=o>,</span> <span class=n>U</span><span class=o>,</span> <span class=n>R</span><span class=o>&gt;</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>R</span> <span class=nf>apply</span><span class=o>(</span><span class=n>T</span> <span class=n>t</span><span class=o>,</span> <span class=n>U</span> <span class=n>u</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl><span class=c1>//使用内置函数式接口创建对象
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nd>@Test</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kt>void</span> <span class=nf>test20</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=n>BiFunction</span><span class=o>&lt;</span><span class=n>String</span><span class=o>,</span><span class=n>Integer</span><span class=o>,</span><span class=n>User</span><span class=o>&gt;</span> <span class=n>biFunction</span><span class=o>=</span><span class=n>User</span><span class=o>::</span><span class=k>new</span><span class=o>;</span>
</span></span><span class=line><span class=cl>  <span class=n>User</span> <span class=n>user</span> <span class=o>=</span> <span class=n>biFunction</span><span class=o>.</span><span class=na>apply</span><span class=o>(</span><span class=s>&#34;tom&#34;</span><span class=o>,</span> <span class=mi>20</span><span class=o>);</span>
</span></span><span class=line><span class=cl>  <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>user</span><span class=o>);</span><span class=c1>//User [name=tom, age=20]
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=o>}</span>
</span></span></code></pre></div><p>四个基本接口参数个数不够用也可以类似的去java.util.function包下找找有没有申明好的函数式接口</p></li></ol><p>最后一个问题，我发现</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>list</span><span class=o>.</span><span class=na>forEach</span><span class=o>(</span><span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>::</span><span class=n>println</span><span class=o>);</span>
</span></span></code></pre></div><p>遍历List时，使用的forEach的参数Consumer的accept方法是这么写的，我第一个想到的是，out是System的一个内部类，但是当我点进去，发现是这样的</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span> <span class=kd>final</span> <span class=kd>static</span> <span class=n>PrintStream</span> <span class=n>out</span> <span class=o>=</span> <span class=kc>null</span><span class=o>;</span>
</span></span></code></pre></div><p>out是一个静态的成员变量，那我的理解就是System.out其实是一个对象</p><p>这样System.out::println的写法其实也就是 对象名::方法名</p><p>我是这样理解的，如果错了还请赐教！</p><h2 id=stream>Stream<a hidden class=anchor aria-hidden=true href=#stream>#</a></h2><h3 id=介绍>介绍<a hidden class=anchor aria-hidden=true href=#介绍>#</a></h3><p>java8添加了一个抽象流Stream，可以让我们像写sql一样操作集合元素。Stream将要处理的元素看做是一种流， 在管道中传输，并进行处理，最后由终止操作得到处理的结果。</p><h3 id=什么是stream>什么是Stream？<a hidden class=anchor aria-hidden=true href=#什么是stream>#</a></h3><p>Stream是一个来自特定元素队列并支持聚合操作</p><ul><li>元素是具体类型的对象，形成一个队列。</li><li><strong>数据源是流的来源。</strong></li><li>聚合操作是类似sql一样的操作，比如filter, map, reduce, find, match, sorted等。</li><li>Stream自己不会存储元素。</li><li>Stream不会改变源对象。</li><li>Stream操作是延迟执行的。</li></ul><h3 id=创建流>创建流<a hidden class=anchor aria-hidden=true href=#创建流>#</a></h3><h4 id=串行流>串行流<a hidden class=anchor aria-hidden=true href=#串行流>#</a></h4><p>stream()：即单线程的方式去操作流</p><h4 id=并行流>并行流<a hidden class=anchor aria-hidden=true href=#并行流>#</a></h4><p>parallelStream():即多线程方式去操作流</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@Test</span>
</span></span><span class=line><span class=cl>	<span class=kd>public</span> <span class=kt>void</span> <span class=nf>test</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>		<span class=c1>//1通过Collection提供的stream()和parallelStream()方法
</span></span></span><span class=line><span class=cl><span class=c1></span>		<span class=n>List</span><span class=o>&lt;</span><span class=n>String</span><span class=o>&gt;</span> <span class=n>list</span> <span class=o>=</span> <span class=n>Arrays</span><span class=o>.</span><span class=na>asList</span><span class=o>(</span><span class=s>&#34;a&#34;</span><span class=o>,</span><span class=s>&#34;b&#34;</span><span class=o>,</span><span class=s>&#34;c&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>		<span class=n>Stream</span><span class=o>&lt;</span><span class=n>String</span><span class=o>&gt;</span> <span class=n>stream1</span> <span class=o>=</span> <span class=n>list</span><span class=o>.</span><span class=na>stream</span><span class=o>();</span>
</span></span><span class=line><span class=cl>		<span class=n>Stream</span><span class=o>&lt;</span><span class=n>String</span><span class=o>&gt;</span> <span class=n>stream2</span> <span class=o>=</span> <span class=n>list</span><span class=o>.</span><span class=na>parallelStream</span><span class=o>();</span>
</span></span><span class=line><span class=cl>		
</span></span><span class=line><span class=cl>		<span class=c1>//2通过Arrays的静态方法stream()
</span></span></span><span class=line><span class=cl><span class=c1></span>		<span class=n>String</span><span class=o>[]</span> <span class=n>strs</span><span class=o>=</span> <span class=o>{</span><span class=s>&#34;a&#34;</span><span class=o>,</span><span class=s>&#34;b&#34;</span><span class=o>,</span><span class=s>&#34;c&#34;</span><span class=o>};</span>
</span></span><span class=line><span class=cl>		<span class=n>Stream</span><span class=o>&lt;</span><span class=n>String</span><span class=o>&gt;</span> <span class=n>stream3</span> <span class=o>=</span> <span class=n>Arrays</span><span class=o>.</span><span class=na>stream</span><span class=o>(</span><span class=n>strs</span><span class=o>);</span>
</span></span><span class=line><span class=cl>		
</span></span><span class=line><span class=cl>		<span class=c1>//3通过Stream类中的静态方法of()
</span></span></span><span class=line><span class=cl><span class=c1></span>		<span class=n>Stream</span><span class=o>&lt;</span><span class=n>String</span><span class=o>&gt;</span> <span class=n>stream4</span> <span class=o>=</span> <span class=n>Stream</span><span class=o>.</span><span class=na>of</span><span class=o>(</span><span class=s>&#34;a&#34;</span><span class=o>,</span><span class=s>&#34;b&#34;</span><span class=o>,</span><span class=s>&#34;c&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>		
</span></span><span class=line><span class=cl>		<span class=c1>//4通过Stream类的iterate方法生成无限流
</span></span></span><span class=line><span class=cl><span class=c1></span>		<span class=n>Stream</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>&gt;</span> <span class=n>stream5</span> <span class=o>=</span> <span class=n>Stream</span><span class=o>.</span><span class=na>iterate</span><span class=o>(</span><span class=mi>0</span><span class=o>,</span> <span class=o>(</span><span class=n>x</span><span class=o>)-&gt;</span><span class=n>x</span><span class=o>+</span><span class=mi>1</span><span class=o>);</span>
</span></span><span class=line><span class=cl>		
</span></span><span class=line><span class=cl>		<span class=c1>//5通过Stream的generate方法生成无限流
</span></span></span><span class=line><span class=cl><span class=c1></span>		<span class=n>Stream</span><span class=o>.</span><span class=na>generate</span><span class=o>(()-&gt;</span><span class=n>Math</span><span class=o>.</span><span class=na>random</span><span class=o>());</span>
</span></span><span class=line><span class=cl>		
</span></span><span class=line><span class=cl>	<span class=o>}</span>
</span></span></code></pre></div><h3 id=中间操作>中间操作<a hidden class=anchor aria-hidden=true href=#中间操作>#</a></h3><h4 id=过滤>过滤<a hidden class=anchor aria-hidden=true href=#过滤>#</a></h4><p>使用 filter(Predicate&lt;? super T> predicate)来按照一定规则对流中元素进行过滤</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@Test</span>
</span></span><span class=line><span class=cl>	<span class=kd>public</span> <span class=kt>void</span> <span class=nf>test</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>		<span class=n>List</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>&gt;</span> <span class=n>list</span> <span class=o>=</span> <span class=n>Arrays</span><span class=o>.</span><span class=na>asList</span><span class=o>(</span><span class=mi>1</span><span class=o>,</span><span class=mi>2</span><span class=o>,</span><span class=mi>3</span><span class=o>,</span><span class=mi>4</span><span class=o>,</span><span class=mi>5</span><span class=o>);</span>
</span></span><span class=line><span class=cl>		<span class=n>Stream</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>&gt;</span> <span class=n>stream</span> <span class=o>=</span> <span class=n>list</span><span class=o>.</span><span class=na>stream</span><span class=o>();</span>
</span></span><span class=line><span class=cl>		<span class=n>stream</span> <span class=o>=</span> <span class=n>stream</span><span class=o>.</span><span class=na>filter</span><span class=o>((</span><span class=n>x</span><span class=o>)-&gt;</span><span class=n>x</span><span class=o>.</span><span class=na>compareTo</span><span class=o>(</span><span class=mi>2</span><span class=o>)&gt;</span><span class=mi>0</span><span class=o>);</span>
</span></span><span class=line><span class=cl>		
</span></span><span class=line><span class=cl>		<span class=n>stream</span><span class=o>.</span><span class=na>forEach</span><span class=o>(</span><span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>::</span><span class=n>println</span><span class=o>);</span>
</span></span><span class=line><span class=cl>	<span class=o>}</span>
</span></span><span class=line><span class=cl><span class=err>输出：</span>
</span></span><span class=line><span class=cl><span class=mi>3</span>
</span></span><span class=line><span class=cl><span class=mi>4</span>
</span></span><span class=line><span class=cl><span class=mi>5</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nd>@Test</span>
</span></span><span class=line><span class=cl>	<span class=kd>public</span> <span class=kt>void</span> <span class=nf>test2</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>		<span class=n>List</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>&gt;</span> <span class=n>list</span> <span class=o>=</span> <span class=n>Arrays</span><span class=o>.</span><span class=na>asList</span><span class=o>(</span><span class=mi>1</span><span class=o>,</span><span class=mi>2</span><span class=o>,</span><span class=mi>3</span><span class=o>,</span><span class=mi>4</span><span class=o>,</span><span class=mi>5</span><span class=o>);</span>
</span></span><span class=line><span class=cl>		<span class=n>Stream</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>&gt;</span> <span class=n>stream</span> <span class=o>=</span> <span class=n>list</span><span class=o>.</span><span class=na>stream</span><span class=o>();</span>
</span></span><span class=line><span class=cl>		<span class=n>stream</span> <span class=o>=</span> <span class=n>stream</span><span class=o>.</span><span class=na>filter</span><span class=o>(</span>
</span></span><span class=line><span class=cl>				<span class=o>(</span><span class=n>x</span><span class=o>)-&gt;{</span>
</span></span><span class=line><span class=cl>			<span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>x</span><span class=o>);</span>
</span></span><span class=line><span class=cl>			<span class=k>return</span> <span class=n>x</span><span class=o>.</span><span class=na>compareTo</span><span class=o>(</span><span class=mi>2</span><span class=o>)&gt;</span><span class=mi>0</span><span class=o>;}</span>
</span></span><span class=line><span class=cl>			<span class=o>);</span>
</span></span><span class=line><span class=cl>	<span class=o>}</span>
</span></span><span class=line><span class=cl><span class=err>结果：没有任何输出，这也就是前面说的</span><span class=n>Stream</span><span class=err>操作是延迟执行的，只有当终止操作这些中间操作才会依次执行</span>
</span></span></code></pre></div><h4 id=截断>截断<a hidden class=anchor aria-hidden=true href=#截断>#</a></h4><p>使元素的个数不超过指定的数目</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@Test</span>
</span></span><span class=line><span class=cl>	<span class=kd>public</span> <span class=kt>void</span> <span class=nf>test</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>		<span class=n>List</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>&gt;</span> <span class=n>list</span> <span class=o>=</span> <span class=n>Arrays</span><span class=o>.</span><span class=na>asList</span><span class=o>(</span><span class=mi>1</span><span class=o>,</span><span class=mi>2</span><span class=o>,</span><span class=mi>3</span><span class=o>,</span><span class=mi>4</span><span class=o>,</span><span class=mi>5</span><span class=o>);</span>
</span></span><span class=line><span class=cl>		<span class=n>Stream</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>&gt;</span> <span class=n>stream</span> <span class=o>=</span> <span class=n>list</span><span class=o>.</span><span class=na>stream</span><span class=o>();</span>
</span></span><span class=line><span class=cl>		<span class=n>stream</span><span class=o>=</span><span class=n>stream</span><span class=o>.</span><span class=na>limit</span><span class=o>(</span><span class=mi>3</span><span class=o>);</span>
</span></span><span class=line><span class=cl>		<span class=n>stream</span><span class=o>.</span><span class=na>forEach</span><span class=o>(</span><span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>::</span><span class=n>println</span><span class=o>);</span>
</span></span><span class=line><span class=cl>	<span class=o>}</span>
</span></span><span class=line><span class=cl><span class=err>输出：</span>
</span></span><span class=line><span class=cl><span class=mi>1</span>
</span></span><span class=line><span class=cl><span class=mi>2</span>
</span></span><span class=line><span class=cl><span class=mi>3</span>
</span></span><span class=line><span class=cl><span class=err>可以看到只输出了给定个元素</span>
</span></span></code></pre></div><h4 id=跳过元素>跳过元素<a hidden class=anchor aria-hidden=true href=#跳过元素>#</a></h4><p>跳过流中前几个元素</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@Test</span>
</span></span><span class=line><span class=cl>	<span class=kd>public</span> <span class=kt>void</span> <span class=nf>test4</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>		<span class=n>List</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>&gt;</span> <span class=n>list</span> <span class=o>=</span> <span class=n>Arrays</span><span class=o>.</span><span class=na>asList</span><span class=o>(</span><span class=mi>1</span><span class=o>,</span><span class=mi>2</span><span class=o>,</span><span class=mi>3</span><span class=o>,</span><span class=mi>4</span><span class=o>,</span><span class=mi>5</span><span class=o>);</span>
</span></span><span class=line><span class=cl>		<span class=n>Stream</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>&gt;</span> <span class=n>stream</span> <span class=o>=</span> <span class=n>list</span><span class=o>.</span><span class=na>stream</span><span class=o>();</span>
</span></span><span class=line><span class=cl>		<span class=n>stream</span><span class=o>=</span><span class=n>stream</span><span class=o>.</span><span class=na>skip</span><span class=o>(</span><span class=mi>2</span><span class=o>);</span>
</span></span><span class=line><span class=cl>		<span class=n>stream</span><span class=o>.</span><span class=na>forEach</span><span class=o>(</span><span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>::</span><span class=n>println</span><span class=o>);</span>
</span></span><span class=line><span class=cl>	<span class=o>}</span>
</span></span><span class=line><span class=cl><span class=err>输出</span><span class=o>:</span>
</span></span><span class=line><span class=cl><span class=mi>3</span>
</span></span><span class=line><span class=cl><span class=mi>4</span>
</span></span><span class=line><span class=cl><span class=mi>5</span>
</span></span><span class=line><span class=cl><span class=err>跳过了前两个元素</span>
</span></span></code></pre></div><h4 id=唯一筛选>唯一筛选<a hidden class=anchor aria-hidden=true href=#唯一筛选>#</a></h4><p>两个元素通过hashCode()判断两个元素是否相同</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@Test</span>
</span></span><span class=line><span class=cl>	<span class=kd>public</span> <span class=kt>void</span> <span class=nf>test5</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>		<span class=n>List</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>&gt;</span> <span class=n>list</span> <span class=o>=</span> <span class=n>Arrays</span><span class=o>.</span><span class=na>asList</span><span class=o>(</span><span class=mi>1</span><span class=o>,</span><span class=mi>2</span><span class=o>,</span><span class=mi>3</span><span class=o>,</span><span class=mi>4</span><span class=o>,</span><span class=mi>5</span><span class=o>,</span><span class=mi>5</span><span class=o>);</span>
</span></span><span class=line><span class=cl>		<span class=n>Stream</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>&gt;</span> <span class=n>stream</span> <span class=o>=</span> <span class=n>list</span><span class=o>.</span><span class=na>stream</span><span class=o>();</span>
</span></span><span class=line><span class=cl>		<span class=n>stream</span><span class=o>.</span><span class=na>distinct</span><span class=o>().</span><span class=na>forEach</span><span class=o>(</span><span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>::</span><span class=n>println</span><span class=o>);</span>
</span></span><span class=line><span class=cl>	<span class=o>}</span>
</span></span><span class=line><span class=cl><span class=err>输出</span><span class=o>:</span>
</span></span><span class=line><span class=cl><span class=mi>1</span>
</span></span><span class=line><span class=cl><span class=mi>2</span>
</span></span><span class=line><span class=cl><span class=mi>3</span>
</span></span><span class=line><span class=cl><span class=mi>4</span>
</span></span><span class=line><span class=cl><span class=mi>5</span>
</span></span></code></pre></div><h4 id=映射>映射<a hidden class=anchor aria-hidden=true href=#映射>#</a></h4><p>map(method)接受一个方法，把流中的元素按照方法进行转换</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@Test</span>
</span></span><span class=line><span class=cl>	<span class=kd>public</span> <span class=kt>void</span> <span class=nf>test</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>		<span class=n>List</span><span class=o>&lt;</span><span class=n>String</span><span class=o>&gt;</span> <span class=n>list</span> <span class=o>=</span> <span class=n>Arrays</span><span class=o>.</span><span class=na>asList</span><span class=o>(</span><span class=s>&#34;a&#34;</span><span class=o>,</span><span class=s>&#34;b&#34;</span><span class=o>,</span><span class=s>&#34;c&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>		<span class=n>Stream</span><span class=o>&lt;</span><span class=n>String</span><span class=o>&gt;</span> <span class=n>stream</span> <span class=o>=</span> <span class=n>list</span><span class=o>.</span><span class=na>stream</span><span class=o>();</span>
</span></span><span class=line><span class=cl>		<span class=n>stream</span><span class=o>=</span><span class=n>stream</span><span class=o>.</span><span class=na>map</span><span class=o>((</span><span class=n>x</span><span class=o>)-&gt;</span><span class=n>x</span><span class=o>.</span><span class=na>toUpperCase</span><span class=o>());</span>
</span></span><span class=line><span class=cl>		<span class=n>stream</span><span class=o>.</span><span class=na>forEach</span><span class=o>(</span><span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>::</span><span class=n>println</span><span class=o>);</span>
</span></span><span class=line><span class=cl>	<span class=o>}</span>
</span></span><span class=line><span class=cl><span class=err>输出：</span>
</span></span><span class=line><span class=cl><span class=n>A</span>
</span></span><span class=line><span class=cl><span class=n>B</span>
</span></span><span class=line><span class=cl><span class=n>C</span>
</span></span></code></pre></div><p>flatMap(method)也是接受一个函数作为参数，但是与map，不同的是如果这个函数生成的本来就是流，它会把函数生成流中的元素加到流中</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>//这个函数本身就生成流
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>public</span> <span class=kd>static</span> <span class=n>Stream</span><span class=o>&lt;</span><span class=n>Character</span><span class=o>&gt;</span> <span class=nf>toStream</span><span class=o>(</span><span class=n>String</span> <span class=n>s</span><span class=o>){</span>
</span></span><span class=line><span class=cl>  <span class=n>List</span><span class=o>&lt;</span><span class=n>Character</span><span class=o>&gt;</span> <span class=n>list</span><span class=o>=</span><span class=k>new</span> <span class=n>ArrayList</span><span class=o>&lt;</span><span class=n>Character</span><span class=o>&gt;();</span>
</span></span><span class=line><span class=cl>  <span class=kt>char</span><span class=o>[]</span> <span class=n>chs</span> <span class=o>=</span> <span class=n>s</span><span class=o>.</span><span class=na>toCharArray</span><span class=o>();</span>
</span></span><span class=line><span class=cl>  <span class=k>for</span> <span class=o>(</span><span class=kt>char</span> <span class=n>c</span> <span class=o>:</span> <span class=n>chs</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>list</span><span class=o>.</span><span class=na>add</span><span class=o>(</span><span class=n>c</span><span class=o>);</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl>  <span class=n>Stream</span><span class=o>&lt;</span><span class=n>Character</span><span class=o>&gt;</span> <span class=n>stream</span> <span class=o>=</span> <span class=n>list</span><span class=o>.</span><span class=na>stream</span><span class=o>();</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=n>stream</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl><span class=nd>@Test</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kt>void</span> <span class=nf>test</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=n>List</span><span class=o>&lt;</span><span class=n>String</span><span class=o>&gt;</span> <span class=n>list</span> <span class=o>=</span> <span class=n>Arrays</span><span class=o>.</span><span class=na>asList</span><span class=o>(</span><span class=s>&#34;aaa&#34;</span><span class=o>,</span><span class=s>&#34;bbb&#34;</span><span class=o>,</span><span class=s>&#34;ccc&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>  <span class=n>Stream</span><span class=o>&lt;</span><span class=n>Stream</span><span class=o>&lt;</span><span class=n>Character</span><span class=o>&gt;&gt;</span> <span class=n>stream</span> <span class=o>=</span> 
</span></span><span class=line><span class=cl>  <span class=c1>//由于函数本身就生成流，所以流中加入的还是流
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=n>list</span><span class=o>.</span><span class=na>stream</span><span class=o>().</span><span class=na>map</span><span class=o>(</span><span class=n>StreamTest</span><span class=o>::</span><span class=n>toStream</span><span class=o>);</span>
</span></span><span class=line><span class=cl>  <span class=c1>//遍历的时候需要先从流中取出流，在遍历
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=n>stream</span><span class=o>.</span><span class=na>forEach</span><span class=o>((</span><span class=n>s</span><span class=o>)-&gt;</span><span class=n>s</span><span class=o>.</span><span class=na>forEach</span><span class=o>(</span><span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>::</span><span class=n>println</span><span class=o>));</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>//然而我们可以使用flatMap进行改进
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nd>@Test</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kt>void</span> <span class=nf>test</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=n>List</span><span class=o>&lt;</span><span class=n>String</span><span class=o>&gt;</span> <span class=n>list</span> <span class=o>=</span> <span class=n>Arrays</span><span class=o>.</span><span class=na>asList</span><span class=o>(</span><span class=s>&#34;aaa&#34;</span><span class=o>,</span><span class=s>&#34;bbb&#34;</span><span class=o>,</span><span class=s>&#34;ccc&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>  <span class=n>list</span><span class=o>.</span><span class=na>stream</span><span class=o>().</span><span class=na>flatMap</span><span class=o>(</span><span class=n>StreamTest</span><span class=o>::</span><span class=n>toStream</span><span class=o>).</span><span class=na>forEach</span><span class=o>(</span><span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>::</span><span class=n>println</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl><span class=err>输出：</span>
</span></span><span class=line><span class=cl><span class=n>a</span>
</span></span><span class=line><span class=cl><span class=n>a</span>
</span></span><span class=line><span class=cl><span class=n>a</span>
</span></span><span class=line><span class=cl><span class=n>b</span>
</span></span><span class=line><span class=cl><span class=n>b</span>
</span></span><span class=line><span class=cl><span class=n>b</span>
</span></span><span class=line><span class=cl><span class=n>c</span>
</span></span><span class=line><span class=cl><span class=n>c</span>
</span></span><span class=line><span class=cl><span class=n>c</span>
</span></span></code></pre></div><h3 id=终止操作>终止操作<a hidden class=anchor aria-hidden=true href=#终止操作>#</a></h3><h4 id=所有匹配>所有匹配<a hidden class=anchor aria-hidden=true href=#所有匹配>#</a></h4><p>当所有元素都匹配时，allMatch(Predicate&lt;? super T> predicate)才会返回true</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@Test</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kt>void</span> <span class=nf>test</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=n>List</span><span class=o>&lt;</span><span class=n>String</span><span class=o>&gt;</span> <span class=n>list</span> <span class=o>=</span> <span class=n>Arrays</span><span class=o>.</span><span class=na>asList</span><span class=o>(</span><span class=s>&#34;aaa&#34;</span><span class=o>,</span><span class=s>&#34;bbb&#34;</span><span class=o>,</span><span class=s>&#34;ccc&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>  <span class=kt>boolean</span> <span class=n>allMatch</span> <span class=o>=</span> <span class=n>list</span><span class=o>.</span><span class=na>stream</span><span class=o>().</span><span class=na>allMatch</span><span class=o>((</span><span class=n>s</span><span class=o>)-&gt;</span><span class=n>s</span><span class=o>.</span><span class=na>length</span><span class=o>()&gt;</span><span class=mi>2</span><span class=o>);</span>
</span></span><span class=line><span class=cl>  <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>allMatch</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl><span class=err>输出：</span>
</span></span><span class=line><span class=cl><span class=kc>true</span>
</span></span></code></pre></div><h4 id=任一匹配>任一匹配<a hidden class=anchor aria-hidden=true href=#任一匹配>#</a></h4><p>当Stream中任一一个元素匹配时，anyMatch(Predicate&lt;? super T> predicate)返回true</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@Test</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kt>void</span> <span class=nf>test</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=n>List</span><span class=o>&lt;</span><span class=n>String</span><span class=o>&gt;</span> <span class=n>list</span> <span class=o>=</span> <span class=n>Arrays</span><span class=o>.</span><span class=na>asList</span><span class=o>(</span><span class=s>&#34;aaa&#34;</span><span class=o>,</span><span class=s>&#34;bbb&#34;</span><span class=o>,</span><span class=s>&#34;ccc&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>  <span class=kt>boolean</span> <span class=n>anyMatch</span> <span class=o>=</span> <span class=n>list</span><span class=o>.</span><span class=na>stream</span><span class=o>().</span><span class=na>anyMatch</span><span class=o>((</span><span class=n>s</span><span class=o>)-&gt;</span><span class=n>s</span><span class=o>.</span><span class=na>equals</span><span class=o>(</span><span class=s>&#34;bbb&#34;</span><span class=o>));</span>
</span></span><span class=line><span class=cl>  <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>anyMatch</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl><span class=err>输出：</span>
</span></span><span class=line><span class=cl><span class=kc>true</span>
</span></span></code></pre></div><h4 id=所有不匹配>所有不匹配<a hidden class=anchor aria-hidden=true href=#所有不匹配>#</a></h4><p>当Stream中所有的元素都不匹配时，noneMatch(Predicate&lt;? super T> predicate)返回true</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@Test</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kt>void</span> <span class=nf>test</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=n>List</span><span class=o>&lt;</span><span class=n>String</span><span class=o>&gt;</span> <span class=n>list</span> <span class=o>=</span> <span class=n>Arrays</span><span class=o>.</span><span class=na>asList</span><span class=o>(</span><span class=s>&#34;aaa&#34;</span><span class=o>,</span><span class=s>&#34;bbb&#34;</span><span class=o>,</span><span class=s>&#34;ccc&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>  <span class=kt>boolean</span> <span class=n>noneMatch</span> <span class=o>=</span> <span class=n>list</span><span class=o>.</span><span class=na>stream</span><span class=o>().</span><span class=na>noneMatch</span><span class=o>((</span><span class=n>s</span><span class=o>)-&gt;</span><span class=n>s</span><span class=o>.</span><span class=na>equals</span><span class=o>(</span><span class=s>&#34;ddd&#34;</span><span class=o>));</span>
</span></span><span class=line><span class=cl>  <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>noneMatch</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl><span class=err>输出：</span>
</span></span><span class=line><span class=cl><span class=kc>true</span>
</span></span></code></pre></div><h4 id=第一个元素>第一个元素<a hidden class=anchor aria-hidden=true href=#第一个元素>#</a></h4><p>返回当前流中的第一个元素</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@Test</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kt>void</span> <span class=nf>test</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=n>List</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>&gt;</span> <span class=n>list</span> <span class=o>=</span> <span class=n>Arrays</span><span class=o>.</span><span class=na>asList</span><span class=o>(</span><span class=mi>1</span><span class=o>,</span><span class=mi>2</span><span class=o>,</span><span class=mi>3</span><span class=o>,</span><span class=mi>4</span><span class=o>,</span><span class=mi>5</span><span class=o>);</span>
</span></span><span class=line><span class=cl>  <span class=n>Optional</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>&gt;</span> <span class=n>findFirst</span> <span class=o>=</span> <span class=n>list</span><span class=o>.</span><span class=na>stream</span><span class=o>().</span><span class=na>findFirst</span><span class=o>();</span>
</span></span><span class=line><span class=cl>  <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>findFirst</span><span class=o>.</span><span class=na>get</span><span class=o>());</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl><span class=err>输出：</span>
</span></span><span class=line><span class=cl><span class=mi>1</span>
</span></span></code></pre></div><h4 id=任一一个元素>任一一个元素<a hidden class=anchor aria-hidden=true href=#任一一个元素>#</a></h4><p>返回当前流中的任一一个元素</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@Test</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kt>void</span> <span class=nf>test</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=n>List</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>&gt;</span> <span class=n>list</span> <span class=o>=</span> <span class=n>Arrays</span><span class=o>.</span><span class=na>asList</span><span class=o>(</span><span class=mi>1</span><span class=o>,</span><span class=mi>2</span><span class=o>,</span><span class=mi>3</span><span class=o>,</span><span class=mi>4</span><span class=o>,</span><span class=mi>5</span><span class=o>);</span>
</span></span><span class=line><span class=cl>  <span class=n>Optional</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>&gt;</span> <span class=n>findAny</span> <span class=o>=</span> <span class=n>list</span><span class=o>.</span><span class=na>stream</span><span class=o>().</span><span class=na>findAny</span><span class=o>();</span>
</span></span><span class=line><span class=cl>  <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>findAny</span><span class=o>.</span><span class=na>get</span><span class=o>());</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl><span class=err>输出：</span>
</span></span><span class=line><span class=cl><span class=mi>1</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>//使用并行流试试
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nd>@Test</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kt>void</span> <span class=nf>test13</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>	<span class=n>List</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>&gt;</span> <span class=n>list</span> <span class=o>=</span> <span class=n>Arrays</span><span class=o>.</span><span class=na>asList</span><span class=o>(</span><span class=mi>1</span><span class=o>,</span><span class=mi>2</span><span class=o>,</span><span class=mi>3</span><span class=o>,</span><span class=mi>4</span><span class=o>,</span><span class=mi>5</span><span class=o>);</span>
</span></span><span class=line><span class=cl>	<span class=n>Optional</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>&gt;</span> <span class=n>findAny</span> <span class=o>=</span>   		<span class=n>list</span><span class=o>.</span><span class=na>parallelStream</span><span class=o>().</span><span class=na>findAny</span><span class=o>();</span>
</span></span><span class=line><span class=cl>	<span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>findAny</span><span class=o>.</span><span class=na>get</span><span class=o>());</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl><span class=err>输出：</span>
</span></span><span class=line><span class=cl><span class=mi>3</span>
</span></span></code></pre></div><h4 id=流中元素个数>流中元素个数<a hidden class=anchor aria-hidden=true href=#流中元素个数>#</a></h4><p>返回流中的元素个数</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@Test</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kt>void</span> <span class=nf>test14</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=n>List</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>&gt;</span> <span class=n>list</span> <span class=o>=</span> <span class=n>Arrays</span><span class=o>.</span><span class=na>asList</span><span class=o>(</span><span class=mi>1</span><span class=o>,</span><span class=mi>2</span><span class=o>,</span><span class=mi>3</span><span class=o>,</span><span class=mi>4</span><span class=o>,</span><span class=mi>5</span><span class=o>);</span>
</span></span><span class=line><span class=cl>  <span class=kt>long</span> <span class=n>count</span> <span class=o>=</span> <span class=n>list</span><span class=o>.</span><span class=na>stream</span><span class=o>().</span><span class=na>count</span><span class=o>();</span>
</span></span><span class=line><span class=cl>  <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>count</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl><span class=err>输出：</span>
</span></span><span class=line><span class=cl><span class=mi>5</span>
</span></span></code></pre></div><h4 id=流中的最大值>流中的最大值<a hidden class=anchor aria-hidden=true href=#流中的最大值>#</a></h4><p>返回流中元素的最大值</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@Test</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kt>void</span> <span class=nf>test15</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=n>List</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>&gt;</span> <span class=n>list</span> <span class=o>=</span> <span class=n>Arrays</span><span class=o>.</span><span class=na>asList</span><span class=o>(</span><span class=mi>1</span><span class=o>,</span><span class=mi>2</span><span class=o>,</span><span class=mi>3</span><span class=o>,</span><span class=mi>4</span><span class=o>,</span><span class=mi>5</span><span class=o>);</span>
</span></span><span class=line><span class=cl>  <span class=n>Optional</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>&gt;</span> <span class=n>max</span> <span class=o>=</span> <span class=n>list</span><span class=o>.</span><span class=na>stream</span><span class=o>().</span><span class=na>max</span><span class=o>(</span><span class=n>Integer</span><span class=o>::</span><span class=n>compare</span><span class=o>);</span>
</span></span><span class=line><span class=cl>  <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>max</span><span class=o>.</span><span class=na>get</span><span class=o>());</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl><span class=err>输出：</span>
</span></span><span class=line><span class=cl><span class=mi>5</span>
</span></span></code></pre></div><h4 id=流中的最小值>流中的最小值<a hidden class=anchor aria-hidden=true href=#流中的最小值>#</a></h4><p>返回流中的最小值</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@Test</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kt>void</span> <span class=nf>test16</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=n>List</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>&gt;</span> <span class=n>list</span> <span class=o>=</span> <span class=n>Arrays</span><span class=o>.</span><span class=na>asList</span><span class=o>(</span><span class=mi>1</span><span class=o>,</span><span class=mi>2</span><span class=o>,</span><span class=mi>3</span><span class=o>,</span><span class=mi>4</span><span class=o>,</span><span class=mi>5</span><span class=o>);</span>
</span></span><span class=line><span class=cl>  <span class=n>Optional</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>&gt;</span> <span class=n>min</span> <span class=o>=</span> <span class=n>list</span><span class=o>.</span><span class=na>stream</span><span class=o>().</span><span class=na>min</span><span class=o>(</span><span class=n>Integer</span><span class=o>::</span><span class=n>compare</span><span class=o>);</span>
</span></span><span class=line><span class=cl>  <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>min</span><span class=o>.</span><span class=na>get</span><span class=o>());</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl><span class=err>输出：</span>
</span></span><span class=line><span class=cl><span class=mi>1</span>
</span></span></code></pre></div><h4 id=规约>规约<a hidden class=anchor aria-hidden=true href=#规约>#</a></h4><p>将流中的元素反复结合得到一个最终值</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@Test</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kt>void</span> <span class=nf>test</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=n>List</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>&gt;</span> <span class=n>list</span> <span class=o>=</span> <span class=n>Arrays</span><span class=o>.</span><span class=na>asList</span><span class=o>(</span><span class=mi>1</span><span class=o>,</span><span class=mi>2</span><span class=o>,</span><span class=mi>3</span><span class=o>,</span><span class=mi>4</span><span class=o>,</span><span class=mi>5</span><span class=o>);</span>
</span></span><span class=line><span class=cl>  <span class=n>Optional</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>&gt;</span> <span class=n>reduce</span> <span class=o>=</span> <span class=n>list</span><span class=o>.</span><span class=na>stream</span><span class=o>().</span><span class=na>reduce</span><span class=o>(</span><span class=n>Integer</span><span class=o>::</span><span class=n>sum</span><span class=o>);</span>
</span></span><span class=line><span class=cl>  <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>reduce</span><span class=o>.</span><span class=na>get</span><span class=o>());</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=n>Integer</span> <span class=n>reduce2</span> <span class=o>=</span> <span class=n>list</span><span class=o>.</span><span class=na>stream</span><span class=o>().</span><span class=na>reduce</span><span class=o>(</span><span class=mi>0</span><span class=o>,</span> <span class=o>(</span><span class=n>x</span><span class=o>,</span><span class=n>y</span><span class=o>)-&gt;{</span>
</span></span><span class=line><span class=cl>    <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>x</span><span class=o>+</span><span class=s>&#34;-&gt;&#34;</span><span class=o>+</span><span class=n>y</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>x</span><span class=o>+</span><span class=n>y</span><span class=o>;</span>
</span></span><span class=line><span class=cl>  <span class=o>});</span>
</span></span><span class=line><span class=cl>  <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>reduce2</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl><span class=err>输出：</span>
</span></span><span class=line><span class=cl><span class=mi>15</span>
</span></span><span class=line><span class=cl><span class=mi>0</span><span class=o>-&gt;</span><span class=mi>1</span>
</span></span><span class=line><span class=cl><span class=mi>1</span><span class=o>-&gt;</span><span class=mi>2</span>
</span></span><span class=line><span class=cl><span class=mi>3</span><span class=o>-&gt;</span><span class=mi>3</span>
</span></span><span class=line><span class=cl><span class=mi>6</span><span class=o>-&gt;</span><span class=mi>4</span>
</span></span><span class=line><span class=cl><span class=mi>10</span><span class=o>-&gt;</span><span class=mi>5</span>
</span></span><span class=line><span class=cl><span class=mi>15</span>
</span></span></code></pre></div><p>可以看到当使用(T identity, BinaryOperator accumulator)时，identity即为最初和流中元素进行运算的，所以值不能为空，所以返回的不是Optional</p><h4 id=收集>收集<a hidden class=anchor aria-hidden=true href=#收集>#</a></h4><p>将流转换成其他形式</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@Test</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kt>void</span> <span class=nf>test</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=n>List</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>&gt;</span> <span class=n>list</span> <span class=o>=</span> <span class=n>Arrays</span><span class=o>.</span><span class=na>asList</span><span class=o>(</span><span class=mi>1</span><span class=o>,</span><span class=mi>2</span><span class=o>,</span><span class=mi>3</span><span class=o>,</span><span class=mi>4</span><span class=o>,</span><span class=mi>5</span><span class=o>,</span><span class=mi>5</span><span class=o>);</span>
</span></span><span class=line><span class=cl>  <span class=n>Set</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>&gt;</span> <span class=n>collect</span> <span class=o>=</span> <span class=n>list</span><span class=o>.</span><span class=na>stream</span><span class=o>().</span><span class=na>collect</span><span class=o>(</span><span class=n>Collectors</span><span class=o>.</span><span class=na>toSet</span><span class=o>());</span>
</span></span><span class=line><span class=cl>  <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>collect</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl><span class=err>输出：</span>
</span></span><span class=line><span class=cl><span class=o>[</span><span class=mi>1</span><span class=o>,</span> <span class=mi>2</span><span class=o>,</span> <span class=mi>3</span><span class=o>,</span> <span class=mi>4</span><span class=o>,</span> <span class=mi>5</span><span class=o>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nd>@Test</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kt>void</span> <span class=nf>test</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>		<span class=n>List</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>&gt;</span> <span class=n>list</span> <span class=o>=</span> <span class=n>Arrays</span><span class=o>.</span><span class=na>asList</span><span class=o>(</span><span class=mi>1</span><span class=o>,</span><span class=mi>2</span><span class=o>,</span><span class=mi>3</span><span class=o>,</span><span class=mi>4</span><span class=o>,</span><span class=mi>5</span><span class=o>,</span><span class=mi>5</span><span class=o>);</span>
</span></span><span class=line><span class=cl>		<span class=n>Optional</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>&gt;</span> <span class=n>collect</span> <span class=o>=</span> <span class=n>list</span><span class=o>.</span><span class=na>stream</span><span class=o>().</span><span class=na>collect</span><span class=o>(</span><span class=n>Collectors</span><span class=o>.</span><span class=na>maxBy</span><span class=o>(</span><span class=n>Integer</span><span class=o>::</span><span class=n>compareTo</span><span class=o>));</span>
</span></span><span class=line><span class=cl>		<span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>collect</span><span class=o>.</span><span class=na>get</span><span class=o>());</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl><span class=err>输出：</span>
</span></span><span class=line><span class=cl><span class=mi>5</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>class</span> <span class=nc>Stu</span><span class=o>{</span>
</span></span><span class=line><span class=cl>	<span class=n>String</span> <span class=n>name</span><span class=o>;</span>
</span></span><span class=line><span class=cl>	<span class=n>Integer</span> <span class=n>age</span><span class=o>;</span>
</span></span><span class=line><span class=cl>	<span class=n>String</span> <span class=n>gender</span><span class=o>;</span>
</span></span><span class=line><span class=cl>	<span class=kd>public</span> <span class=nf>Stu</span><span class=o>(</span><span class=n>String</span> <span class=n>name</span><span class=o>,</span> <span class=n>Integer</span> <span class=n>age</span><span class=o>,</span> <span class=n>String</span> <span class=n>gender</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>		<span class=kd>super</span><span class=o>();</span>
</span></span><span class=line><span class=cl>		<span class=k>this</span><span class=o>.</span><span class=na>name</span> <span class=o>=</span> <span class=n>name</span><span class=o>;</span>
</span></span><span class=line><span class=cl>		<span class=k>this</span><span class=o>.</span><span class=na>age</span> <span class=o>=</span> <span class=n>age</span><span class=o>;</span>
</span></span><span class=line><span class=cl>		<span class=k>this</span><span class=o>.</span><span class=na>gender</span> <span class=o>=</span> <span class=n>gender</span><span class=o>;</span>
</span></span><span class=line><span class=cl>	<span class=o>}</span>
</span></span><span class=line><span class=cl>	<span class=kd>public</span> <span class=n>String</span> <span class=nf>getName</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>		<span class=k>return</span> <span class=n>name</span><span class=o>;</span>
</span></span><span class=line><span class=cl>	<span class=o>}</span>
</span></span><span class=line><span class=cl>	<span class=kd>public</span> <span class=kt>void</span> <span class=nf>setName</span><span class=o>(</span><span class=n>String</span> <span class=n>name</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>		<span class=k>this</span><span class=o>.</span><span class=na>name</span> <span class=o>=</span> <span class=n>name</span><span class=o>;</span>
</span></span><span class=line><span class=cl>	<span class=o>}</span>
</span></span><span class=line><span class=cl>	<span class=kd>public</span> <span class=n>Integer</span> <span class=nf>getAge</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>		<span class=k>return</span> <span class=n>age</span><span class=o>;</span>
</span></span><span class=line><span class=cl>	<span class=o>}</span>
</span></span><span class=line><span class=cl>	<span class=kd>public</span> <span class=kt>void</span> <span class=nf>setAge</span><span class=o>(</span><span class=n>Integer</span> <span class=n>age</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>		<span class=k>this</span><span class=o>.</span><span class=na>age</span> <span class=o>=</span> <span class=n>age</span><span class=o>;</span>
</span></span><span class=line><span class=cl>	<span class=o>}</span>
</span></span><span class=line><span class=cl>	<span class=kd>public</span> <span class=n>String</span> <span class=nf>getGender</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>		<span class=k>return</span> <span class=n>gender</span><span class=o>;</span>
</span></span><span class=line><span class=cl>	<span class=o>}</span>
</span></span><span class=line><span class=cl>	<span class=kd>public</span> <span class=kt>void</span> <span class=nf>setGender</span><span class=o>(</span><span class=n>String</span> <span class=n>gender</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>		<span class=k>this</span><span class=o>.</span><span class=na>gender</span> <span class=o>=</span> <span class=n>gender</span><span class=o>;</span>
</span></span><span class=line><span class=cl>	<span class=o>}</span>
</span></span><span class=line><span class=cl>	<span class=nd>@Override</span>
</span></span><span class=line><span class=cl>	<span class=kd>public</span> <span class=n>String</span> <span class=nf>toString</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>		<span class=k>return</span> <span class=s>&#34;Stu [name=&#34;</span> <span class=o>+</span> <span class=n>name</span> <span class=o>+</span> <span class=s>&#34;, age=&#34;</span> <span class=o>+</span> <span class=n>age</span> <span class=o>+</span> <span class=s>&#34;, gender=&#34;</span> <span class=o>+</span> <span class=n>gender</span> <span class=o>+</span> <span class=s>&#34;]&#34;</span><span class=o>;</span>
</span></span><span class=line><span class=cl>	<span class=o>}</span>
</span></span><span class=line><span class=cl>	
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl><span class=c1>//一级分组
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nd>@Test</span>
</span></span><span class=line><span class=cl>	<span class=kd>public</span> <span class=kt>void</span> <span class=nf>test</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>		<span class=n>List</span><span class=o>&lt;</span><span class=n>Stu</span><span class=o>&gt;</span> <span class=n>list</span> <span class=o>=</span> <span class=n>Arrays</span><span class=o>.</span><span class=na>asList</span><span class=o>(</span>
</span></span><span class=line><span class=cl>				<span class=k>new</span> <span class=n>Stu</span><span class=o>(</span><span class=s>&#34;张三&#34;</span><span class=o>,</span><span class=mi>20</span><span class=o>,</span><span class=s>&#34;男&#34;</span><span class=o>),</span>
</span></span><span class=line><span class=cl>				<span class=k>new</span> <span class=n>Stu</span><span class=o>(</span><span class=s>&#34;李四&#34;</span><span class=o>,</span><span class=mi>22</span><span class=o>,</span><span class=s>&#34;女&#34;</span><span class=o>),</span>
</span></span><span class=line><span class=cl>				<span class=k>new</span> <span class=n>Stu</span><span class=o>(</span><span class=s>&#34;王五&#34;</span><span class=o>,</span><span class=mi>18</span><span class=o>,</span><span class=s>&#34;男&#34;</span><span class=o>),</span>
</span></span><span class=line><span class=cl>				<span class=k>new</span> <span class=n>Stu</span><span class=o>(</span><span class=s>&#34;赵六&#34;</span><span class=o>,</span><span class=mi>20</span><span class=o>,</span><span class=s>&#34;女&#34;</span><span class=o>),</span>
</span></span><span class=line><span class=cl>				<span class=k>new</span> <span class=n>Stu</span><span class=o>(</span><span class=s>&#34;田七&#34;</span><span class=o>,</span><span class=mi>22</span><span class=o>,</span><span class=s>&#34;女&#34;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>				<span class=o>);</span>
</span></span><span class=line><span class=cl>		<span class=n>Map</span><span class=o>&lt;</span><span class=n>String</span><span class=o>,</span> <span class=n>List</span><span class=o>&lt;</span><span class=n>Stu</span><span class=o>&gt;&gt;</span> <span class=n>collect</span> <span class=o>=</span> 				<span class=n>list</span><span class=o>.</span><span class=na>stream</span><span class=o>().</span><span class=na>collect</span><span class=o>(</span><span class=n>Collectors</span><span class=o>.</span><span class=na>groupingBy</span><span class=o>(</span><span class=n>Stu</span><span class=o>::</span><span class=n>getGender</span><span class=o>));</span>
</span></span><span class=line><span class=cl>		<span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>collect</span><span class=o>);</span>
</span></span><span class=line><span class=cl>	<span class=o>}</span>
</span></span><span class=line><span class=cl><span class=err>输出：</span>
</span></span><span class=line><span class=cl><span class=o>{</span><span class=err>女</span><span class=o>=[</span><span class=n>Stu</span> <span class=o>[</span><span class=n>name</span><span class=o>=</span><span class=err>李四</span><span class=o>,</span> <span class=n>age</span><span class=o>=</span><span class=mi>22</span><span class=o>,</span> <span class=n>gender</span><span class=o>=</span><span class=err>女</span><span class=o>],</span> <span class=n>Stu</span> <span class=o>[</span><span class=n>name</span><span class=o>=</span><span class=err>赵六</span><span class=o>,</span> <span class=n>age</span><span class=o>=</span><span class=mi>20</span><span class=o>,</span> <span class=n>gender</span><span class=o>=</span><span class=err>女</span><span class=o>],</span> <span class=n>Stu</span> <span class=o>[</span><span class=n>name</span><span class=o>=</span><span class=err>田七</span><span class=o>,</span> <span class=n>age</span><span class=o>=</span><span class=mi>22</span><span class=o>,</span> <span class=n>gender</span><span class=o>=</span><span class=err>女</span><span class=o>]],</span> <span class=err>男</span><span class=o>=[</span><span class=n>Stu</span> <span class=o>[</span><span class=n>name</span><span class=o>=</span><span class=err>张三</span><span class=o>,</span> <span class=n>age</span><span class=o>=</span><span class=mi>20</span><span class=o>,</span> <span class=n>gender</span><span class=o>=</span><span class=err>男</span><span class=o>],</span> <span class=n>Stu</span> <span class=o>[</span><span class=n>name</span><span class=o>=</span><span class=err>王五</span><span class=o>,</span> <span class=n>age</span><span class=o>=</span><span class=mi>18</span><span class=o>,</span> <span class=n>gender</span><span class=o>=</span><span class=err>男</span><span class=o>]]}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>//二级分组
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nd>@Test</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kt>void</span> <span class=nf>test21</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=n>List</span><span class=o>&lt;</span><span class=n>Stu</span><span class=o>&gt;</span> <span class=n>list</span> <span class=o>=</span> <span class=n>Arrays</span><span class=o>.</span><span class=na>asList</span><span class=o>(</span>
</span></span><span class=line><span class=cl>    <span class=k>new</span> <span class=n>Stu</span><span class=o>(</span><span class=s>&#34;张三&#34;</span><span class=o>,</span><span class=mi>20</span><span class=o>,</span><span class=s>&#34;男&#34;</span><span class=o>),</span>
</span></span><span class=line><span class=cl>    <span class=k>new</span> <span class=n>Stu</span><span class=o>(</span><span class=s>&#34;李四&#34;</span><span class=o>,</span><span class=mi>22</span><span class=o>,</span><span class=s>&#34;女&#34;</span><span class=o>),</span>
</span></span><span class=line><span class=cl>    <span class=k>new</span> <span class=n>Stu</span><span class=o>(</span><span class=s>&#34;王五&#34;</span><span class=o>,</span><span class=mi>18</span><span class=o>,</span><span class=s>&#34;男&#34;</span><span class=o>),</span>
</span></span><span class=line><span class=cl>    <span class=k>new</span> <span class=n>Stu</span><span class=o>(</span><span class=s>&#34;赵六&#34;</span><span class=o>,</span><span class=mi>20</span><span class=o>,</span><span class=s>&#34;女&#34;</span><span class=o>),</span>
</span></span><span class=line><span class=cl>    <span class=k>new</span> <span class=n>Stu</span><span class=o>(</span><span class=s>&#34;田七&#34;</span><span class=o>,</span><span class=mi>22</span><span class=o>,</span><span class=s>&#34;女&#34;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>  <span class=o>);</span>
</span></span><span class=line><span class=cl>  <span class=n>Map</span><span class=o>&lt;</span><span class=n>Integer</span><span class=o>,</span> <span class=n>Map</span><span class=o>&lt;</span><span class=n>String</span><span class=o>,</span> <span class=n>List</span><span class=o>&lt;</span><span class=n>Stu</span><span class=o>&gt;&gt;&gt;</span> <span class=n>collect</span> <span class=o>=</span> <span class=n>list</span><span class=o>.</span><span class=na>stream</span><span class=o>()</span>
</span></span><span class=line><span class=cl>    <span class=o>.</span><span class=na>collect</span><span class=o>(</span><span class=n>Collectors</span><span class=o>.</span><span class=na>groupingBy</span><span class=o>(</span><span class=n>Stu</span><span class=o>::</span><span class=n>getAge</span><span class=o>,</span> <span class=n>Collectors</span><span class=o>.</span><span class=na>groupingBy</span><span class=o>(</span><span class=n>Stu</span><span class=o>::</span><span class=n>getGender</span><span class=o>)));</span>
</span></span><span class=line><span class=cl>  <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>collect</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl><span class=err>输出：</span>
</span></span><span class=line><span class=cl><span class=o>{</span><span class=mi>18</span><span class=o>={</span><span class=err>男</span><span class=o>=[</span><span class=n>Stu</span> <span class=o>[</span><span class=n>name</span><span class=o>=</span><span class=err>王五</span><span class=o>,</span> <span class=n>age</span><span class=o>=</span><span class=mi>18</span><span class=o>,</span> <span class=n>gender</span><span class=o>=</span><span class=err>男</span><span class=o>]]},</span> <span class=mi>20</span><span class=o>={</span><span class=err>女</span><span class=o>=[</span><span class=n>Stu</span> <span class=o>[</span><span class=n>name</span><span class=o>=</span><span class=err>赵六</span><span class=o>,</span> <span class=n>age</span><span class=o>=</span><span class=mi>20</span><span class=o>,</span> <span class=n>gender</span><span class=o>=</span><span class=err>女</span><span class=o>]],</span> <span class=err>男</span><span class=o>=[</span><span class=n>Stu</span> <span class=o>[</span><span class=n>name</span><span class=o>=</span><span class=err>张三</span><span class=o>,</span> <span class=n>age</span><span class=o>=</span><span class=mi>20</span><span class=o>,</span> <span class=n>gender</span><span class=o>=</span><span class=err>男</span><span class=o>]]},</span> <span class=mi>22</span><span class=o>={</span><span class=err>女</span><span class=o>=[</span><span class=n>Stu</span> <span class=o>[</span><span class=n>name</span><span class=o>=</span><span class=err>李四</span><span class=o>,</span> <span class=n>age</span><span class=o>=</span><span class=mi>22</span><span class=o>,</span> <span class=n>gender</span><span class=o>=</span><span class=err>女</span><span class=o>],</span> <span class=n>Stu</span> <span class=o>[</span><span class=n>name</span><span class=o>=</span><span class=err>田七</span><span class=o>,</span> <span class=n>age</span><span class=o>=</span><span class=mi>22</span><span class=o>,</span> <span class=n>gender</span><span class=o>=</span><span class=err>女</span><span class=o>]]}}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>//分区
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nd>@Test</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kt>void</span> <span class=nf>test22</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=n>List</span><span class=o>&lt;</span><span class=n>Stu</span><span class=o>&gt;</span> <span class=n>list</span> <span class=o>=</span> <span class=n>Arrays</span><span class=o>.</span><span class=na>asList</span><span class=o>(</span>
</span></span><span class=line><span class=cl>    <span class=k>new</span> <span class=n>Stu</span><span class=o>(</span><span class=s>&#34;张三&#34;</span><span class=o>,</span><span class=mi>20</span><span class=o>,</span><span class=s>&#34;男&#34;</span><span class=o>),</span>
</span></span><span class=line><span class=cl>    <span class=k>new</span> <span class=n>Stu</span><span class=o>(</span><span class=s>&#34;李四&#34;</span><span class=o>,</span><span class=mi>22</span><span class=o>,</span><span class=s>&#34;女&#34;</span><span class=o>),</span>
</span></span><span class=line><span class=cl>    <span class=k>new</span> <span class=n>Stu</span><span class=o>(</span><span class=s>&#34;王五&#34;</span><span class=o>,</span><span class=mi>18</span><span class=o>,</span><span class=s>&#34;男&#34;</span><span class=o>),</span>
</span></span><span class=line><span class=cl>    <span class=k>new</span> <span class=n>Stu</span><span class=o>(</span><span class=s>&#34;赵六&#34;</span><span class=o>,</span><span class=mi>20</span><span class=o>,</span><span class=s>&#34;女&#34;</span><span class=o>),</span>
</span></span><span class=line><span class=cl>    <span class=k>new</span> <span class=n>Stu</span><span class=o>(</span><span class=s>&#34;田七&#34;</span><span class=o>,</span><span class=mi>22</span><span class=o>,</span><span class=s>&#34;女&#34;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>  <span class=o>);</span>
</span></span><span class=line><span class=cl>  <span class=n>Map</span><span class=o>&lt;</span><span class=n>Boolean</span><span class=o>,</span> <span class=n>List</span><span class=o>&lt;</span><span class=n>Stu</span><span class=o>&gt;&gt;</span> <span class=n>collect</span> <span class=o>=</span> <span class=n>list</span><span class=o>.</span><span class=na>stream</span><span class=o>()</span>
</span></span><span class=line><span class=cl>    <span class=o>.</span><span class=na>collect</span><span class=o>(</span><span class=n>Collectors</span><span class=o>.</span><span class=na>partitioningBy</span><span class=o>((</span><span class=n>e</span><span class=o>)-&gt;((</span><span class=n>Stu</span><span class=o>)</span><span class=n>e</span><span class=o>).</span><span class=na>getAge</span><span class=o>()&gt;</span><span class=mi>20</span><span class=o>));</span>
</span></span><span class=line><span class=cl>  <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>collect</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl><span class=err>输出：</span>
</span></span><span class=line><span class=cl><span class=o>{</span><span class=kc>false</span><span class=o>=[</span><span class=n>Stu</span> <span class=o>[</span><span class=n>name</span><span class=o>=</span><span class=err>张三</span><span class=o>,</span> <span class=n>age</span><span class=o>=</span><span class=mi>20</span><span class=o>,</span> <span class=n>gender</span><span class=o>=</span><span class=err>男</span><span class=o>],</span> <span class=n>Stu</span> <span class=o>[</span><span class=n>name</span><span class=o>=</span><span class=err>王五</span><span class=o>,</span> <span class=n>age</span><span class=o>=</span><span class=mi>18</span><span class=o>,</span> <span class=n>gender</span><span class=o>=</span><span class=err>男</span><span class=o>],</span> <span class=n>Stu</span> <span class=o>[</span><span class=n>name</span><span class=o>=</span><span class=err>赵六</span><span class=o>,</span> <span class=n>age</span><span class=o>=</span><span class=mi>20</span><span class=o>,</span> <span class=n>gender</span><span class=o>=</span><span class=err>女</span><span class=o>]],</span> <span class=kc>true</span><span class=o>=[</span><span class=n>Stu</span> <span class=o>[</span><span class=n>name</span><span class=o>=</span><span class=err>李四</span><span class=o>,</span> <span class=n>age</span><span class=o>=</span><span class=mi>22</span><span class=o>,</span> <span class=n>gender</span><span class=o>=</span><span class=err>女</span><span class=o>],</span> <span class=n>Stu</span> <span class=o>[</span><span class=n>name</span><span class=o>=</span><span class=err>田七</span><span class=o>,</span> <span class=n>age</span><span class=o>=</span><span class=mi>22</span><span class=o>,</span> <span class=n>gender</span><span class=o>=</span><span class=err>女</span><span class=o>]]}</span>
</span></span></code></pre></div><h2 id=接口默认方法和静态方法>接口默认方法和静态方法<a hidden class=anchor aria-hidden=true href=#接口默认方法和静态方法>#</a></h2><h3 id=默认方法>默认方法<a hidden class=anchor aria-hidden=true href=#默认方法>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>interface</span> <span class=nc>MyInterface1</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=k>default</span> <span class=n>String</span> <span class=nf>method1</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>		<span class=k>return</span> <span class=s>&#34;myInterface1 default method&#34;</span><span class=o>;</span>
</span></span><span class=line><span class=cl>	<span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>class</span> <span class=nc>MyClass</span><span class=o>{</span>
</span></span><span class=line><span class=cl>	<span class=kd>public</span> <span class=n>String</span> <span class=nf>method1</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>		<span class=k>return</span> <span class=s>&#34;myClass method&#34;</span><span class=o>;</span>
</span></span><span class=line><span class=cl>	<span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm> * 父类和接口中都有相同的方法，默认使用父类的方法，即类优先
</span></span></span><span class=line><span class=cl><span class=cm> * @author 莫雨朵
</span></span></span><span class=line><span class=cl><span class=cm> *
</span></span></span><span class=line><span class=cl><span class=cm> */</span>
</span></span><span class=line><span class=cl><span class=kd>class</span> <span class=nc>MySubClass1</span> <span class=kd>extends</span> <span class=n>MyClass</span> <span class=kd>implements</span> <span class=n>MyInterface1</span><span class=o>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nd>@Test</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kt>void</span> <span class=nf>test1</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=n>MySubClass1</span> <span class=n>mySubClass1</span><span class=o>=</span><span class=k>new</span> <span class=n>MySubClass1</span><span class=o>();</span>
</span></span><span class=line><span class=cl>  <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>mySubClass1</span><span class=o>.</span><span class=na>method1</span><span class=o>());</span><span class=c1>//myClass method
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=o>}</span>
</span></span></code></pre></div><p>如果类的父类的方法和接口中方法名字相同且参数一致，子类还没有重写方法，那么默认使用父类的方法，即类优先</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>interface</span> <span class=nc>MyInterface1</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=k>default</span> <span class=n>String</span> <span class=nf>method1</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>		<span class=k>return</span> <span class=s>&#34;myInterface1 default method&#34;</span><span class=o>;</span>
</span></span><span class=line><span class=cl>	<span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>interface</span> <span class=nc>MyInterface2</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=k>default</span> <span class=n>String</span> <span class=nf>method1</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>		<span class=k>return</span> <span class=s>&#34;myInterface2 default method&#34;</span><span class=o>;</span>
</span></span><span class=line><span class=cl>	<span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm> * 如果类实现的接口中有名字相同参数类型一致的默认方法，那么在类中必须重写
</span></span></span><span class=line><span class=cl><span class=cm> * @author 莫雨朵
</span></span></span><span class=line><span class=cl><span class=cm> *
</span></span></span><span class=line><span class=cl><span class=cm> */</span>
</span></span><span class=line><span class=cl><span class=kd>class</span> <span class=nc>MySubClass2</span> <span class=kd>implements</span> <span class=n>MyInterface1</span><span class=o>,</span><span class=n>MyInterface2</span><span class=o>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=nd>@Override</span>
</span></span><span class=line><span class=cl>	<span class=kd>public</span> <span class=n>String</span> <span class=nf>method1</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>		<span class=k>return</span> <span class=n>MyInterface1</span><span class=o>.</span><span class=na>super</span><span class=o>.</span><span class=na>method1</span><span class=o>();</span>
</span></span><span class=line><span class=cl>	<span class=o>}</span>
</span></span><span class=line><span class=cl>	
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nd>@Test</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kt>void</span> <span class=nf>test2</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=n>MySubClass2</span> <span class=n>mySubClass2</span><span class=o>=</span><span class=k>new</span> <span class=n>MySubClass2</span><span class=o>();</span>
</span></span><span class=line><span class=cl>  <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>mySubClass2</span><span class=o>.</span><span class=na>method1</span><span class=o>());</span><span class=c1>//myInterface1 default method
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=o>}</span>
</span></span></code></pre></div><p>如果类实现的接口中有名字相同参数类型一致的默认方法，那么在类中必须重写</p><h3 id=静态方法>静态方法<a hidden class=anchor aria-hidden=true href=#静态方法>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>interface</span> <span class=nc>MyInterface1</span> <span class=o>{</span>	
</span></span><span class=line><span class=cl>	<span class=kd>static</span> <span class=n>String</span> <span class=nf>method2</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>		<span class=k>return</span> <span class=s>&#34;interface static method&#34;</span><span class=o>;</span>
</span></span><span class=line><span class=cl>	<span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nd>@Test</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kt>void</span> <span class=nf>test3</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>MyInterface1</span><span class=o>.</span><span class=na>method2</span><span class=o>());</span><span class=c1>//interface static method
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=o>}</span>
</span></span></code></pre></div><h2 id=时间>时间<a hidden class=anchor aria-hidden=true href=#时间>#</a></h2><p>java8以前使用的时间很多方法都已经废弃了，而且不是线程安全的，java8提供了一系列的时间类，这些时间类都是线程安全的</p><h3 id=localdatelocaltimelocaldatetime>LocalDate、LocalTime、LocalDateTime<a hidden class=anchor aria-hidden=true href=#localdatelocaltimelocaldatetime>#</a></h3><p>这三个关于时间的类在使用上都类似</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>	 * LocalDate
</span></span></span><span class=line><span class=cl><span class=cm>	 */</span>
</span></span><span class=line><span class=cl><span class=nd>@Test</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kt>void</span> <span class=nf>test1</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=n>LocalDate</span> <span class=n>date1</span> <span class=o>=</span> <span class=n>LocalDate</span><span class=o>.</span><span class=na>now</span><span class=o>();</span>
</span></span><span class=line><span class=cl>  <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>date1</span><span class=o>);</span><span class=c1>//2020-03-30
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>  <span class=n>LocalDate</span> <span class=n>plusYears</span> <span class=o>=</span> <span class=n>date1</span><span class=o>.</span><span class=na>plusYears</span><span class=o>(</span><span class=mi>1</span><span class=o>);</span>
</span></span><span class=line><span class=cl>  <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>plusYears</span><span class=o>);</span><span class=c1>//2021-03-30
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>  <span class=n>LocalDate</span> <span class=n>minusDays</span> <span class=o>=</span> <span class=n>date1</span><span class=o>.</span><span class=na>minusDays</span><span class=o>(</span><span class=mi>2</span><span class=o>);</span>
</span></span><span class=line><span class=cl>  <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>minusDays</span><span class=o>);</span><span class=c1>//2020-03-28
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>  <span class=n>LocalDate</span> <span class=n>date2</span> <span class=o>=</span> <span class=n>LocalDate</span><span class=o>.</span><span class=na>of</span><span class=o>(</span><span class=mi>2019</span><span class=o>,</span> <span class=mi>3</span><span class=o>,</span> <span class=mi>30</span><span class=o>);</span>
</span></span><span class=line><span class=cl>  <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>date2</span><span class=o>.</span><span class=na>getYear</span><span class=o>());</span><span class=c1>//2019
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>	 * LocalTime
</span></span></span><span class=line><span class=cl><span class=cm>	 */</span>
</span></span><span class=line><span class=cl><span class=nd>@Test</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kt>void</span> <span class=nf>test2</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=n>LocalTime</span> <span class=n>now</span> <span class=o>=</span> <span class=n>LocalTime</span><span class=o>.</span><span class=na>now</span><span class=o>();</span>
</span></span><span class=line><span class=cl>  <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>now</span><span class=o>);</span><span class=c1>//21:15:23.418
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>  <span class=kt>int</span> <span class=n>minute</span> <span class=o>=</span> <span class=n>now</span><span class=o>.</span><span class=na>getMinute</span><span class=o>();</span>
</span></span><span class=line><span class=cl>  <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>minute</span><span class=o>);</span><span class=c1>//15
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>  <span class=kt>int</span> <span class=n>second</span> <span class=o>=</span> <span class=n>now</span><span class=o>.</span><span class=na>getSecond</span><span class=o>();</span>
</span></span><span class=line><span class=cl>  <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>second</span><span class=o>);</span><span class=c1>//23
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>  <span class=n>LocalTime</span> <span class=n>of</span> <span class=o>=</span> <span class=n>LocalTime</span><span class=o>.</span><span class=na>of</span><span class=o>(</span><span class=mi>10</span><span class=o>,</span> <span class=mi>10</span><span class=o>,</span> <span class=mi>10</span><span class=o>);</span>
</span></span><span class=line><span class=cl>  <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>of</span><span class=o>);</span><span class=c1>//10:10:10
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>  <span class=n>LocalTime</span> <span class=n>minusMinutes</span> <span class=o>=</span> <span class=n>of</span><span class=o>.</span><span class=na>minusMinutes</span><span class=o>(</span><span class=mi>2</span><span class=o>);</span>
</span></span><span class=line><span class=cl>  <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>minusMinutes</span><span class=o>);</span><span class=c1>//10:08:10
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>  <span class=n>LocalTime</span> <span class=n>plusHours</span> <span class=o>=</span> <span class=n>of</span><span class=o>.</span><span class=na>plusHours</span><span class=o>(</span><span class=mi>2</span><span class=o>);</span>
</span></span><span class=line><span class=cl>  <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>plusHours</span><span class=o>);</span><span class=c1>//12:10:10
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>	 * LocalDateTime
</span></span></span><span class=line><span class=cl><span class=cm>	 */</span>
</span></span><span class=line><span class=cl><span class=nd>@Test</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kt>void</span> <span class=nf>test3</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=n>LocalDateTime</span> <span class=n>now</span> <span class=o>=</span> <span class=n>LocalDateTime</span><span class=o>.</span><span class=na>now</span><span class=o>();</span>
</span></span><span class=line><span class=cl>  <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>now</span><span class=o>);</span><span class=c1>//2020-03-30T21:20:37.961
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>  <span class=kt>int</span> <span class=n>minute</span> <span class=o>=</span> <span class=n>now</span><span class=o>.</span><span class=na>getMinute</span><span class=o>();</span>
</span></span><span class=line><span class=cl>  <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>minute</span><span class=o>);</span><span class=c1>//20
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>  <span class=n>LocalDateTime</span> <span class=n>plusMinutes</span> <span class=o>=</span> <span class=n>now</span><span class=o>.</span><span class=na>plusMinutes</span><span class=o>(</span><span class=mi>20</span><span class=o>);</span>
</span></span><span class=line><span class=cl>  <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>plusMinutes</span><span class=o>);</span><span class=c1>//2020-03-30T21:40:37.961
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>  <span class=n>LocalDateTime</span> <span class=n>minusYears</span> <span class=o>=</span> <span class=n>now</span><span class=o>.</span><span class=na>minusYears</span><span class=o>(</span><span class=mi>2</span><span class=o>);</span>
</span></span><span class=line><span class=cl>  <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>minusYears</span><span class=o>);</span><span class=c1>//2018-03-30T21:20:37.961
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>  <span class=n>LocalDateTime</span> <span class=n>of</span> <span class=o>=</span> <span class=n>LocalDateTime</span><span class=o>.</span><span class=na>of</span><span class=o>(</span><span class=mi>2021</span><span class=o>,</span> <span class=mi>3</span><span class=o>,</span> <span class=mi>30</span><span class=o>,</span> <span class=mi>21</span><span class=o>,</span> <span class=mi>19</span><span class=o>,</span> <span class=mi>50</span><span class=o>);</span>
</span></span><span class=line><span class=cl>  <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>of</span><span class=o>);</span><span class=c1>//2021-03-30T21:19:50
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=o>}</span>
</span></span></code></pre></div><h3 id=时间戳>时间戳<a hidden class=anchor aria-hidden=true href=#时间戳>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>	 * Instant
</span></span></span><span class=line><span class=cl><span class=cm>	 */</span>
</span></span><span class=line><span class=cl><span class=nd>@Test</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kt>void</span> <span class=nf>test4</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=n>Instant</span> <span class=n>now</span> <span class=o>=</span> <span class=n>Instant</span><span class=o>.</span><span class=na>now</span><span class=o>();</span>
</span></span><span class=line><span class=cl>  <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>now</span><span class=o>);</span><span class=c1>//2020-03-30T13:26:10.640Z
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>  <span class=n>Instant</span> <span class=n>plusSeconds</span> <span class=o>=</span> <span class=n>now</span><span class=o>.</span><span class=na>plusSeconds</span><span class=o>(</span><span class=mi>10</span><span class=o>);</span>
</span></span><span class=line><span class=cl>  <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>plusSeconds</span><span class=o>);</span><span class=c1>//2020-03-30T13:26:20.640Z
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>  <span class=c1>//获取时间戳相对于1970年0时0分0秒的毫秒数
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=kt>long</span> <span class=n>epochMilli</span> <span class=o>=</span> <span class=n>plusSeconds</span><span class=o>.</span><span class=na>toEpochMilli</span><span class=o>();</span>
</span></span><span class=line><span class=cl>  <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>epochMilli</span><span class=o>);</span><span class=c1>//1585574780640
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=o>}</span>
</span></span></code></pre></div><h3 id=duration获取时间间隔>Duration获取时间间隔<a hidden class=anchor aria-hidden=true href=#duration获取时间间隔>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>	 * Duration
</span></span></span><span class=line><span class=cl><span class=cm>	 */</span>
</span></span><span class=line><span class=cl><span class=nd>@Test</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kt>void</span> <span class=nf>test5</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=n>Instant</span> <span class=n>start</span> <span class=o>=</span> <span class=n>Instant</span><span class=o>.</span><span class=na>now</span><span class=o>();</span>
</span></span><span class=line><span class=cl>  <span class=n>Instant</span> <span class=n>end</span> <span class=o>=</span> <span class=n>start</span><span class=o>.</span><span class=na>plusSeconds</span><span class=o>(</span><span class=mi>10</span><span class=o>);</span>
</span></span><span class=line><span class=cl>  <span class=n>Duration</span> <span class=n>duration</span> <span class=o>=</span> <span class=n>Duration</span><span class=o>.</span><span class=na>between</span><span class=o>(</span><span class=n>start</span><span class=o>,</span> <span class=n>end</span><span class=o>);</span>
</span></span><span class=line><span class=cl>  <span class=kt>long</span> <span class=n>seconds</span> <span class=o>=</span> <span class=n>duration</span><span class=o>.</span><span class=na>getSeconds</span><span class=o>();</span>
</span></span><span class=line><span class=cl>  <span class=c1>//获取时间间隔的秒数
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>seconds</span><span class=o>);</span><span class=c1>//10
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>  <span class=c1>//获取时间间隔的毫秒数
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=kt>long</span> <span class=n>millis</span> <span class=o>=</span> <span class=n>duration</span><span class=o>.</span><span class=na>toMillis</span><span class=o>();</span>
</span></span><span class=line><span class=cl>  <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>millis</span><span class=o>);</span><span class=c1>//10000
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=o>}</span>
</span></span></code></pre></div><h3 id=peroid获取日期间隔>Peroid获取日期间隔<a hidden class=anchor aria-hidden=true href=#peroid获取日期间隔>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@Test</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kt>void</span> <span class=nf>test6</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=n>LocalDate</span> <span class=n>date1</span> <span class=o>=</span> <span class=n>LocalDate</span><span class=o>.</span><span class=na>now</span><span class=o>();</span>
</span></span><span class=line><span class=cl>  <span class=n>LocalDate</span> <span class=n>date2</span> <span class=o>=</span> <span class=n>date1</span><span class=o>.</span><span class=na>plusYears</span><span class=o>(</span><span class=mi>2</span><span class=o>);</span>
</span></span><span class=line><span class=cl>  <span class=n>Period</span> <span class=n>period</span> <span class=o>=</span> <span class=n>Period</span><span class=o>.</span><span class=na>between</span><span class=o>(</span><span class=n>date1</span><span class=o>,</span> <span class=n>date2</span><span class=o>);</span>
</span></span><span class=line><span class=cl>  <span class=c1>//获取两时间间隔的月数,指两个月份的间隔数，并不是时间间隔的总月数
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=kt>int</span> <span class=n>months</span> <span class=o>=</span> <span class=n>period</span><span class=o>.</span><span class=na>getMonths</span><span class=o>();</span>
</span></span><span class=line><span class=cl>  <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>months</span><span class=o>);</span><span class=c1>//0
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=o>}</span>
</span></span></code></pre></div><h3 id=temporaladjuster矫正日期>TemporalAdjuster矫正日期<a hidden class=anchor aria-hidden=true href=#temporaladjuster矫正日期>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@Test</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kt>void</span> <span class=nf>test7</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=n>LocalDate</span> <span class=n>date1</span> <span class=o>=</span> <span class=n>LocalDate</span><span class=o>.</span><span class=na>now</span><span class=o>();</span>
</span></span><span class=line><span class=cl>  <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>date1</span><span class=o>);</span><span class=c1>//2020-03-31
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>  <span class=c1>//TemporalAdjusters类中封装了一些常用地时间矫正方法
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=n>TemporalAdjuster</span> <span class=n>next</span> <span class=o>=</span> <span class=n>TemporalAdjusters</span><span class=o>.</span><span class=na>next</span><span class=o>(</span><span class=n>DayOfWeek</span><span class=o>.</span><span class=na>FRIDAY</span><span class=o>);</span>
</span></span><span class=line><span class=cl>  <span class=n>LocalDate</span> <span class=n>date2</span> <span class=o>=</span> <span class=n>date1</span><span class=o>.</span><span class=na>with</span><span class=o>(</span><span class=n>next</span><span class=o>);</span>
</span></span><span class=line><span class=cl>  <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>date2</span><span class=o>);</span><span class=c1>//2020-04-03
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>  <span class=c1>//自定义时间矫正器
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=n>LocalDate</span> <span class=n>date3</span> <span class=o>=</span> <span class=n>date1</span><span class=o>.</span><span class=na>with</span><span class=o>(</span><span class=n>x</span><span class=o>-&gt;{</span>
</span></span><span class=line><span class=cl>    <span class=n>LocalDate</span> <span class=n>ld</span><span class=o>=(</span><span class=n>LocalDate</span><span class=o>)</span><span class=n>x</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=n>DayOfWeek</span> <span class=n>dayOfWeek</span> <span class=o>=</span> <span class=n>ld</span><span class=o>.</span><span class=na>getDayOfWeek</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span><span class=o>(</span><span class=n>dayOfWeek</span><span class=o>.</span><span class=na>equals</span><span class=o>(</span><span class=n>DayOfWeek</span><span class=o>.</span><span class=na>FRIDAY</span><span class=o>))</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>      <span class=k>return</span> <span class=n>ld</span><span class=o>.</span><span class=na>plusDays</span><span class=o>(</span><span class=mi>3</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span><span class=k>else</span> <span class=k>if</span><span class=o>(</span><span class=n>dayOfWeek</span><span class=o>.</span><span class=na>equals</span><span class=o>(</span><span class=n>DayOfWeek</span><span class=o>.</span><span class=na>SATURDAY</span><span class=o>))</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>      <span class=k>return</span> <span class=n>ld</span><span class=o>.</span><span class=na>plusDays</span><span class=o>(</span><span class=mi>2</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span><span class=k>else</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>      <span class=k>return</span> <span class=n>ld</span><span class=o>.</span><span class=na>plusDays</span><span class=o>(</span><span class=mi>1</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>  <span class=o>});</span>
</span></span><span class=line><span class=cl>  <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>date3</span><span class=o>);</span><span class=c1>//2020-04-01
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=o>}</span>
</span></span></code></pre></div><p>由于TemporalAdjuster是一个函数式接口，所以我们可以使用lambda表达式自定义矫正规则</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@FunctionalInterface</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>interface</span> <span class=nc>TemporalAdjuster</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=n>Temporal</span> <span class=nf>adjustInto</span><span class=o>(</span><span class=n>Temporal</span> <span class=n>temporal</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div><h3 id=datetimeformatter格式化日期时间>DateTimeFormatter格式化日期时间<a hidden class=anchor aria-hidden=true href=#datetimeformatter格式化日期时间>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@Test</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kt>void</span> <span class=nf>test8</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=n>LocalDateTime</span> <span class=n>dateTime1</span> <span class=o>=</span> <span class=n>LocalDateTime</span><span class=o>.</span><span class=na>now</span><span class=o>();</span>
</span></span><span class=line><span class=cl>  <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>dateTime1</span><span class=o>);</span><span class=c1>//2020-03-31T18:28:04.256
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>  <span class=n>DateTimeFormatter</span> <span class=n>formatter1</span> <span class=o>=</span> <span class=n>DateTimeFormatter</span><span class=o>.</span><span class=na>ISO_DATE</span><span class=o>;</span>
</span></span><span class=line><span class=cl>  <span class=n>String</span> <span class=n>format1</span> <span class=o>=</span> <span class=n>dateTime1</span><span class=o>.</span><span class=na>format</span><span class=o>(</span><span class=n>formatter1</span><span class=o>);</span>
</span></span><span class=line><span class=cl>  <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>format1</span><span class=o>);</span><span class=c1>//2020-03-31
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>  <span class=n>DateTimeFormatter</span> <span class=n>formatter2</span> <span class=o>=</span> <span class=n>DateTimeFormatter</span><span class=o>.</span><span class=na>ofPattern</span><span class=o>(</span><span class=s>&#34;yyyy年MM月dd日HH时mm分ss秒&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>  <span class=n>String</span> <span class=n>format2</span> <span class=o>=</span> <span class=n>dateTime1</span><span class=o>.</span><span class=na>format</span><span class=o>(</span><span class=n>formatter2</span><span class=o>);</span>
</span></span><span class=line><span class=cl>  <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>format2</span><span class=o>);</span><span class=c1>//2020年03月31日18时28分04秒
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>  <span class=n>LocalDateTime</span> <span class=n>dateTime2</span> <span class=o>=</span> <span class=n>LocalDateTime</span><span class=o>.</span><span class=na>parse</span><span class=o>(</span><span class=n>format2</span><span class=o>,</span> <span class=n>formatter2</span><span class=o>);</span>
</span></span><span class=line><span class=cl>  <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>dateTime2</span><span class=o>);</span><span class=c1>//2020-03-31T18:28:04
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=o>}</span>
</span></span></code></pre></div><h3 id=zonedate>ZoneDate<a hidden class=anchor aria-hidden=true href=#zonedate>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@Test</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kt>void</span> <span class=nf>test9</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=c1>//获取可用时区
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=n>ZoneId</span><span class=o>.</span><span class=na>getAvailableZoneIds</span><span class=o>().</span><span class=na>forEach</span><span class=o>(</span><span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>::</span><span class=n>println</span><span class=o>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=n>LocalDate</span> <span class=n>date1</span> <span class=o>=</span> <span class=n>LocalDate</span><span class=o>.</span><span class=na>now</span><span class=o>(</span><span class=n>ZoneId</span><span class=o>.</span><span class=na>of</span><span class=o>(</span><span class=s>&#34;Asia/Tokyo&#34;</span><span class=o>));</span>
</span></span><span class=line><span class=cl>  <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>date1</span><span class=o>);</span><span class=c1>//2020-03-31
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=o>}</span>
</span></span></code></pre></div><h3 id=zonetime>ZoneTime<a hidden class=anchor aria-hidden=true href=#zonetime>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@Test</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kt>void</span> <span class=nf>test10</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=n>LocalTime</span> <span class=n>time1</span> <span class=o>=</span> <span class=n>LocalTime</span><span class=o>.</span><span class=na>now</span><span class=o>(</span><span class=n>ZoneId</span><span class=o>.</span><span class=na>of</span><span class=o>(</span><span class=s>&#34;Asia/Tokyo&#34;</span><span class=o>));</span>
</span></span><span class=line><span class=cl>  <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>time1</span><span class=o>);</span><span class=c1>//19:44:15.228
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>  <span class=n>OffsetTime</span> <span class=n>atOffset</span> <span class=o>=</span> <span class=n>time1</span><span class=o>.</span><span class=na>atOffset</span><span class=o>(</span><span class=n>ZoneOffset</span><span class=o>.</span><span class=na>ofHours</span><span class=o>(</span><span class=mi>2</span><span class=o>));</span>
</span></span><span class=line><span class=cl>  <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>atOffset</span><span class=o>);</span><span class=c1>//19:44:15.228+02:00
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=o>}</span>
</span></span></code></pre></div><h3 id=zonedatetime>ZoneDateTime<a hidden class=anchor aria-hidden=true href=#zonedatetime>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@Test</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kt>void</span> <span class=nf>test11</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=n>LocalDateTime</span> <span class=n>dateTime1</span> <span class=o>=</span> <span class=n>LocalDateTime</span><span class=o>.</span><span class=na>now</span><span class=o>(</span><span class=n>ZoneId</span><span class=o>.</span><span class=na>of</span><span class=o>(</span><span class=s>&#34;Asia/Shanghai&#34;</span><span class=o>));</span>
</span></span><span class=line><span class=cl>  <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>dateTime1</span><span class=o>);</span><span class=c1>//2020-03-31T18:51:07.136
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>  <span class=n>ZonedDateTime</span> <span class=n>atZone</span> <span class=o>=</span> <span class=n>dateTime1</span><span class=o>.</span><span class=na>atZone</span><span class=o>(</span><span class=n>ZoneId</span><span class=o>.</span><span class=na>of</span><span class=o>(</span><span class=s>&#34;Asia/Shanghai&#34;</span><span class=o>));</span>
</span></span><span class=line><span class=cl>  <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>atZone</span><span class=o>);</span><span class=c1>//2020-03-31T18:51:07.136+08:00[Asia/Shanghai]	+09:00表示时间比格林尼治时间快9小时
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=o>}</span>
</span></span></code></pre></div><h2 id=重复注解>重复注解<a hidden class=anchor aria-hidden=true href=#重复注解>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@Retention</span><span class=o>(</span><span class=n>RetentionPolicy</span><span class=o>.</span><span class=na>RUNTIME</span><span class=o>)</span>
</span></span><span class=line><span class=cl><span class=nd>@Target</span><span class=o>(</span><span class=n>ElementType</span><span class=o>.</span><span class=na>METHOD</span><span class=o>)</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=nd>@interface</span> <span class=n>MAnnotation</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>	<span class=n>String</span> <span class=nf>name</span><span class=o>()</span> <span class=k>default</span> <span class=s>&#34;&#34;</span><span class=o>;</span>
</span></span><span class=line><span class=cl>	<span class=kt>int</span> <span class=nf>age</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>AnnotataionTest</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=nd>@Test</span>
</span></span><span class=line><span class=cl>	<span class=kd>public</span> <span class=kt>void</span> <span class=nf>test</span><span class=o>()</span> <span class=kd>throws</span> <span class=n>Exception</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>		<span class=n>Class</span><span class=o>&lt;</span><span class=n>AnnotataionTest</span><span class=o>&gt;</span> <span class=n>clazz</span><span class=o>=</span><span class=n>AnnotataionTest</span><span class=o>.</span><span class=na>class</span><span class=o>;</span>
</span></span><span class=line><span class=cl>		<span class=n>Method</span> <span class=n>method</span> <span class=o>=</span> <span class=n>clazz</span><span class=o>.</span><span class=na>getMethod</span><span class=o>(</span><span class=s>&#34;good&#34;</span><span class=o>,</span> <span class=kc>null</span><span class=o>);</span>
</span></span><span class=line><span class=cl>		<span class=n>MAnnotation</span> <span class=n>annotation</span> <span class=o>=</span> <span class=n>method</span><span class=o>.</span><span class=na>getAnnotation</span><span class=o>(</span><span class=n>MAnnotation</span><span class=o>.</span><span class=na>class</span><span class=o>);</span>
</span></span><span class=line><span class=cl>		<span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>annotation</span><span class=o>.</span><span class=na>name</span><span class=o>()+</span><span class=s>&#34;:&#34;</span><span class=o>+</span><span class=n>annotation</span><span class=o>.</span><span class=na>age</span><span class=o>());</span>
</span></span><span class=line><span class=cl>	<span class=o>}</span>
</span></span><span class=line><span class=cl>	
</span></span><span class=line><span class=cl>	<span class=nd>@MAnnotation</span><span class=o>(</span><span class=n>name</span><span class=o>=</span><span class=s>&#34;tom&#34;</span><span class=o>,</span><span class=n>age</span><span class=o>=</span><span class=mi>20</span><span class=o>)</span>
</span></span><span class=line><span class=cl>	<span class=kd>public</span> <span class=kt>void</span> <span class=nf>good</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>		
</span></span><span class=line><span class=cl>	<span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div><p>以前我们是这样使用注解，当要在一个方法上标注两个相同的注解时会报错，java8允许使用一个注解来存储注解，可以实现一个注解重复标注</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@Retention</span><span class=o>(</span><span class=n>RetentionPolicy</span><span class=o>.</span><span class=na>RUNTIME</span><span class=o>)</span>
</span></span><span class=line><span class=cl><span class=nd>@Target</span><span class=o>(</span><span class=n>ElementType</span><span class=o>.</span><span class=na>METHOD</span><span class=o>)</span>
</span></span><span class=line><span class=cl><span class=nd>@Repeatable</span><span class=o>(</span><span class=n>MAnnotations</span><span class=o>.</span><span class=na>class</span><span class=o>)</span><span class=c1>//使用@Repeatable来标注存储注解的注解
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>public</span> <span class=nd>@interface</span> <span class=n>MAnnotation</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>	<span class=n>String</span> <span class=nf>name</span><span class=o>()</span> <span class=k>default</span> <span class=s>&#34;&#34;</span><span class=o>;</span>
</span></span><span class=line><span class=cl>	<span class=kt>int</span> <span class=nf>age</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nd>@Retention</span><span class=o>(</span><span class=n>RetentionPolicy</span><span class=o>.</span><span class=na>RUNTIME</span><span class=o>)</span>
</span></span><span class=line><span class=cl><span class=nd>@Target</span><span class=o>(</span><span class=n>ElementType</span><span class=o>.</span><span class=na>METHOD</span><span class=o>)</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=nd>@interface</span> <span class=n>MAnnotations</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>	<span class=n>MAnnotation</span><span class=o>[]</span> <span class=nf>value</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>AnnotataionTest</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=nd>@Test</span>
</span></span><span class=line><span class=cl>	<span class=kd>public</span> <span class=kt>void</span> <span class=nf>test</span><span class=o>()</span> <span class=kd>throws</span> <span class=n>Exception</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>		<span class=n>Class</span><span class=o>&lt;</span><span class=n>AnnotataionTest</span><span class=o>&gt;</span> <span class=n>clazz</span><span class=o>=</span><span class=n>AnnotataionTest</span><span class=o>.</span><span class=na>class</span><span class=o>;</span>
</span></span><span class=line><span class=cl>		<span class=n>Method</span> <span class=n>method</span> <span class=o>=</span> <span class=n>clazz</span><span class=o>.</span><span class=na>getMethod</span><span class=o>(</span><span class=s>&#34;good&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>		<span class=n>MAnnotation</span><span class=o>[]</span> <span class=n>mAnnotations</span> <span class=o>=</span> <span class=n>method</span><span class=o>.</span><span class=na>getAnnotationsByType</span><span class=o>(</span><span class=n>MAnnotation</span><span class=o>.</span><span class=na>class</span><span class=o>);</span>
</span></span><span class=line><span class=cl>		<span class=k>for</span> <span class=o>(</span><span class=n>MAnnotation</span> <span class=n>annotation</span> <span class=o>:</span> <span class=n>mAnnotations</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>			<span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>annotation</span><span class=o>.</span><span class=na>name</span><span class=o>()+</span><span class=s>&#34;:&#34;</span><span class=o>+</span><span class=n>annotation</span><span class=o>.</span><span class=na>age</span><span class=o>());</span>
</span></span><span class=line><span class=cl>		<span class=o>}</span>
</span></span><span class=line><span class=cl>	<span class=o>}</span>
</span></span><span class=line><span class=cl>	
</span></span><span class=line><span class=cl>	<span class=nd>@MAnnotation</span><span class=o>(</span><span class=n>name</span><span class=o>=</span><span class=s>&#34;tom&#34;</span><span class=o>,</span><span class=n>age</span><span class=o>=</span><span class=mi>20</span><span class=o>)</span>
</span></span><span class=line><span class=cl>	<span class=nd>@MAnnotation</span><span class=o>(</span><span class=n>name</span><span class=o>=</span><span class=s>&#34;jack&#34;</span><span class=o>,</span><span class=n>age</span><span class=o>=</span><span class=mi>25</span><span class=o>)</span>
</span></span><span class=line><span class=cl>	<span class=kd>public</span> <span class=kt>void</span> <span class=nf>good</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>		
</span></span><span class=line><span class=cl>	<span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div></div><footer class=post-footer><ul class=post-tags></ul></footer></article></main><footer class=footer><span>&copy; 2022 <a href=https://moyuduo.github.io/>Moyuduo's Blog</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>