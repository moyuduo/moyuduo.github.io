<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>String源码分析 | Moyuduo's Blog</title><meta name=keywords content><meta name=description content="String源码分析 类结构 public final class String implements java.io.Serializable, Comparable<String>, CharSequence String类实现了Serializable可以被序列化
String类实现了Comparable可以进行比较
String类实现了CharSequence可以按下标进行相关操作
并且String类使用final进行修饰，不可以被继承
属性 //用来存储字符串的每一个字符 private final char value[]; //hash值 private int hash; // Default to 0 //序列化版本号 private static final long serialVersionUID = -6849794470754667710L; //从变量名大致可以看出和序列化有关，具体的不明白 private static final ObjectStreamField[] serialPersistentFields = new ObjectStreamField[0]; 构造方法 //无参，直接使用空字符串赋值，hash为0 public String() { this.value = &#34;&#34;.value; } //使用已有字符串初始化 public String(String original) { this.value = original.value; this.hash = original.hash; } //使用char数组初始化，hash为0 public String(char value[]) { this."><meta name=author content="Me"><link rel=canonical href=https://moyuduo.github.io/posts/string%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.bc1149f4a72aa4858d3a9f71462f75e5884ffe8073ea9d6d5761d5663d651e20.css integrity="sha256-vBFJ9KcqpIWNOp9xRi915YhP/oBz6p1tV2HVZj1lHiA=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://moyuduo.github.io/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=16x16 href=https://moyuduo.github.io/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=https://moyuduo.github.io/%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=https://moyuduo.github.io/%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=https://moyuduo.github.io/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-123-45","auto"),ga("send","pageview"))</script><meta property="og:title" content="String源码分析"><meta property="og:description" content="String源码分析 类结构 public final class String implements java.io.Serializable, Comparable<String>, CharSequence String类实现了Serializable可以被序列化
String类实现了Comparable可以进行比较
String类实现了CharSequence可以按下标进行相关操作
并且String类使用final进行修饰，不可以被继承
属性 //用来存储字符串的每一个字符 private final char value[]; //hash值 private int hash; // Default to 0 //序列化版本号 private static final long serialVersionUID = -6849794470754667710L; //从变量名大致可以看出和序列化有关，具体的不明白 private static final ObjectStreamField[] serialPersistentFields = new ObjectStreamField[0]; 构造方法 //无参，直接使用空字符串赋值，hash为0 public String() { this.value = &#34;&#34;.value; } //使用已有字符串初始化 public String(String original) { this.value = original.value; this.hash = original.hash; } //使用char数组初始化，hash为0 public String(char value[]) { this."><meta property="og:type" content="article"><meta property="og:url" content="https://moyuduo.github.io/posts/string%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/"><meta property="og:image" content="https://moyuduo.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-11-27T16:16:14+08:00"><meta property="article:modified_time" content="2022-11-27T16:16:14+08:00"><meta property="og:site_name" content="Moyuduo's Blog"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://moyuduo.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="String源码分析"><meta name=twitter:description content="String源码分析 类结构 public final class String implements java.io.Serializable, Comparable<String>, CharSequence String类实现了Serializable可以被序列化
String类实现了Comparable可以进行比较
String类实现了CharSequence可以按下标进行相关操作
并且String类使用final进行修饰，不可以被继承
属性 //用来存储字符串的每一个字符 private final char value[]; //hash值 private int hash; // Default to 0 //序列化版本号 private static final long serialVersionUID = -6849794470754667710L; //从变量名大致可以看出和序列化有关，具体的不明白 private static final ObjectStreamField[] serialPersistentFields = new ObjectStreamField[0]; 构造方法 //无参，直接使用空字符串赋值，hash为0 public String() { this.value = &#34;&#34;.value; } //使用已有字符串初始化 public String(String original) { this.value = original.value; this.hash = original.hash; } //使用char数组初始化，hash为0 public String(char value[]) { this."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://moyuduo.github.io/posts/"},{"@type":"ListItem","position":2,"name":"String源码分析","item":"https://moyuduo.github.io/posts/string%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"String源码分析","name":"String源码分析","description":"String源码分析 类结构 public final class String implements java.io.Serializable, Comparable\u0026lt;String\u0026gt;, CharSequence String类实现了Serializable可以被序列化\nString类实现了Comparable可以进行比较\nString类实现了CharSequence可以按下标进行相关操作\n并且String类使用final进行修饰，不可以被继承\n属性 //用来存储字符串的每一个字符 private final char value[]; //hash值 private int hash; // Default to 0 //序列化版本号 private static final long serialVersionUID = -6849794470754667710L; //从变量名大致可以看出和序列化有关，具体的不明白 private static final ObjectStreamField[] serialPersistentFields = new ObjectStreamField[0]; 构造方法 //无参，直接使用空字符串赋值，hash为0 public String() { this.value = \u0026#34;\u0026#34;.value; } //使用已有字符串初始化 public String(String original) { this.value = original.value; this.hash = original.hash; } //使用char数组初始化，hash为0 public String(char value[]) { this.","keywords":[],"articleBody":"String源码分析 类结构 public final class String implements java.io.Serializable, Comparable\u003cString\u003e, CharSequence String类实现了Serializable可以被序列化\nString类实现了Comparable可以进行比较\nString类实现了CharSequence可以按下标进行相关操作\n并且String类使用final进行修饰，不可以被继承\n属性 //用来存储字符串的每一个字符 private final char value[]; //hash值 private int hash; // Default to 0 //序列化版本号 private static final long serialVersionUID = -6849794470754667710L; //从变量名大致可以看出和序列化有关，具体的不明白 private static final ObjectStreamField[] serialPersistentFields = new ObjectStreamField[0]; 构造方法 //无参，直接使用空字符串赋值，hash为0 public String() { this.value = \"\".value; } //使用已有字符串初始化 public String(String original) { this.value = original.value; this.hash = original.hash; } //使用char数组初始化，hash为0 public String(char value[]) { this.value = Arrays.copyOf(value, value.length); } //使用字符数组，并指定偏移、字符个数初始化 public String(char value[], int offset, int count) { if (offset \u003c 0) { throw new StringIndexOutOfBoundsException(offset); } if (count \u003c= 0) { if (count \u003c 0) { throw new StringIndexOutOfBoundsException(count); } if (offset \u003c= value.length) { this.value = \"\".value; return; } } // Note: offset or count might be near -1\u003e\u003e\u003e1. if (offset \u003e value.length - count) { throw new StringIndexOutOfBoundsException(offset + count); } this.value = Arrays.copyOfRange(value, offset, offset+count); } //使用unicode编码数组并指定偏移和数量进行初始化 public String(int[] codePoints, int offset, int count) { if (offset \u003c 0) { throw new StringIndexOutOfBoundsException(offset); } if (count \u003c= 0) { if (count \u003c 0) { throw new StringIndexOutOfBoundsException(count); } if (offset \u003c= codePoints.length) { this.value = \"\".value; return; } } // Note: offset or count might be near -1\u003e\u003e\u003e1. if (offset \u003e codePoints.length - count) { throw new StringIndexOutOfBoundsException(offset + count); } final int end = offset + count; // Pass 1: Compute precise size of char[]\t计算char数组大小 int n = count; for (int i = offset; i \u003c end; i++) { int c = codePoints[i]; if (Character.isBmpCodePoint(c))//判断编码是不是BMP（Basic Mutilingual Plane） continue; else if (Character.isValidCodePoint(c))//验证编码是否在unicode编码范围内 n++; else throw new IllegalArgumentException(Integer.toString(c)); } // Pass 2: Allocate and fill in char[] 申明char数组并填入编码对应char final char[] v = new char[n]; for (int i = offset, j = 0; i \u003c end; i++, j++) { int c = codePoints[i]; if (Character.isBmpCodePoint(c))//如果编码是BMP直接一个字符就是接受 v[j] = (char)c; else Character.toSurrogates(c, v, j++);//转换成两个字符存储 } this.value = v; } //使用ascii码数组进行初始化 @Deprecated public String(byte ascii[], int hibyte, int offset, int count) { checkBounds(ascii, offset, count); char value[] = new char[count]; if (hibyte == 0) { for (int i = count; i-- \u003e 0;) { value[i] = (char)(ascii[i + offset] \u0026 0xff); } } else { hibyte \u003c\u003c= 8; for (int i = count; i-- \u003e 0;) { value[i] = (char)(hibyte | (ascii[i + offset] \u0026 0xff)); } } this.value = value; } @Deprecated public String(byte ascii[], int hibyte) { this(ascii, hibyte, 0, ascii.length); } //使用字节数组+字符集名初始化 public String(byte bytes[], int offset, int length, String charsetName) throws UnsupportedEncodingException { if (charsetName == null) throw new NullPointerException(\"charsetName\"); checkBounds(bytes, offset, length); this.value = StringCoding.decode(charsetName, bytes, offset, length); } //使用字节数组+字符集名初始化 public String(byte bytes[], int offset, int length, Charset charset) { if (charset == null) throw new NullPointerException(\"charset\"); checkBounds(bytes, offset, length); this.value = StringCoding.decode(charset, bytes, offset, length); } //使用字节数组+字符集名初始化 public String(byte bytes[], String charsetName) throws UnsupportedEncodingException { this(bytes, 0, bytes.length, charsetName); } //使用字节数组+字符集名初始化 public String(byte bytes[], Charset charset) { this(bytes, 0, bytes.length, charset); } //使用字节数组初始化 public String(byte bytes[], int offset, int length) { checkBounds(bytes, offset, length); this.value = StringCoding.decode(bytes, offset, length); } public String(byte bytes[]) { this(bytes, 0, bytes.length); } //使用StringBuffer初始化 public String(StringBuffer buffer) { synchronized(buffer) { this.value = Arrays.copyOf(buffer.getValue(), buffer.length()); } } //使用StringBuilder初始化 public String(StringBuilder builder) { this.value = Arrays.copyOf(builder.getValue(), builder.length()); } 方法 静态方法 join(CharSequence，CharSequence…）使用分隔符拼接字符串 public static String join(CharSequence delimiter, CharSequence... elements) { Objects.requireNonNull(delimiter); Objects.requireNonNull(elements); // Number of elements not likely worth Arrays.stream overhead. StringJoiner joiner = new StringJoiner(delimiter); for (CharSequence cs: elements) { joiner.add(cs); } return joiner.toString(); } join(CharSequence，Iterable\u003c? extends CharSequence\u003e）使用分隔符拼接字符串 public static String join(CharSequence delimiter, Iterable\u003c? extends CharSequence\u003e elements) { Objects.requireNonNull(delimiter); Objects.requireNonNull(elements); StringJoiner joiner = new StringJoiner(delimiter); for (CharSequence cs: elements) { joiner.add(cs); } return joiner.toString(); } format(String，Object…）使用字符串格式指定参数进行格式化生成字符串 public static String format(String format, Object... args) { return new Formatter().format(format, args).toString(); } format(Local，String，Object…）根据环境使用字符串格式指定参数进行格式化生成字符串 public static String format(Locale l, String format, Object... args) { return new Formatter(l).format(format, args).toString(); } valueOf(Object）对象转换成字符串，如果对象为null转为为字符串“null” public static String valueOf(Object obj) { return (obj == null) ? \"null\" : obj.toString(); } valueOf(char[]）char数组转换成字符串 public static String valueOf(char data[]) { return new String(data); } valueOf（xxx）xxx数据类型转换为字符串 public static String valueOf(boolean b) { return b ? \"true\" : \"false\"; } public static String valueOf(char c) { char data[] = {c}; return new String(data, true); } public static String valueOf(int i) { return Integer.toString(i); } public static String valueOf(long l) { return Long.toString(l); } public static String valueOf(float f) { return Float.toString(f); } public static String valueOf(double d) { return Double.toString(d); } valueOf(char[],int,int）char数组按照偏移个指定字符格式转换为字符串 public static String valueOf(char data[], int offset, int count) { return new String(data, offset, count); } copyValueOf(char，int，int）使用指定字符数组根据偏移和字符个数拷贝一个新字符串，同valueOf public static String copyValueOf(char data[], int offset, int count) { return new String(data, offset, count); } copyValueOf(char[])使用指定字符数组拷贝新字符串 public static String copyValueOf(char data[]) { return new String(data); } 成员方法 char charAt(int index)获取指定下标的字符 public char charAt(int index) { if ((index \u003c 0) || (index \u003e= value.length)) { throw new StringIndexOutOfBoundsException(index); } return value[index]; } void getChars(int srcBegin, int srcEnd, char dst[], int dstBegin)把当前字符串的char数组的指定范围拷贝到目标char数组的指定位置 public void getChars(int srcBegin, int srcEnd, char dst[], int dstBegin) { if (srcBegin \u003c 0) { throw new StringIndexOutOfBoundsException(srcBegin); } if (srcEnd \u003e value.length) { throw new StringIndexOutOfBoundsException(srcEnd); } if (srcBegin \u003e srcEnd) { throw new StringIndexOutOfBoundsException(srcEnd - srcBegin); } //System.arraycopy(Object src, int srcPos,Object dest, int destPos,int length) //src：要拷贝的源数组 //srcPos：源数组拷贝的起始位置 //dest：目标数组 //destPost：拷贝到目标数组的起始位置 //length：要拷贝元素的个数 System.arraycopy(value, srcBegin, dst, dstBegin, srcEnd - srcBegin); } byte[] getBytes(String charsetName)根据字符集获取字符串的编码后的字节数组 public byte[] getBytes(String charsetName) throws UnsupportedEncodingException { if (charsetName == null) throw new NullPointerException(); return StringCoding.encode(charsetName, value, 0, value.length); } boolean equals(Object anObject)方法比较两个字符串，重写的Object方法 public boolean equals(Object anObject) { if (this == anObject) {//地址相等两对象equals为true return true; } if (anObject instanceof String) { String anotherString = (String)anObject; int n = value.length; if (n == anotherString.value.length) {//判断两字符串的字符个数 char v1[] = value; char v2[] = anotherString.value; int i = 0; while (n-- != 0) { if (v1[i] != v2[i])//有一个字符不相等最直接为false return false; i++; } return true; } } return false; } contentEquals(CharSequence cs)判断当前String与其他字符序列是否相等，与equals不同的是，equals只有当两个对象都是String时equals才为true，contentEquals可以用来同其他StringBuffer、StringBuilder和其他字符序列进行比较 public boolean contentEquals(CharSequence cs) { // Argument is a StringBuffer, StringBuilder if (cs instanceof AbstractStringBuilder) { if (cs instanceof StringBuffer) { synchronized(cs) {//如果是StringBuffer那么进行上锁操作 return nonSyncContentEquals((AbstractStringBuilder)cs); } } else {//StringBuilder不上锁 return nonSyncContentEquals((AbstractStringBuilder)cs); } } // Argument is a String if (cs instanceof String) { return equals(cs); } // Argument is a generic CharSequence char v1[] = value; int n = v1.length; if (n != cs.length()) { return false; } for (int i = 0; i \u003c n; i++) {//其他字符序列，一个一个字符进行比较 if (v1[i] != cs.charAt(i)) { return false; } } return true; } equalsIgnoreCase(String anotherString)两个字符串忽略大小写进行比较是否相等 public boolean equalsIgnoreCase(String anotherString) { return (this == anotherString) ? true : (anotherString != null)//不为空 \u0026\u0026 (anotherString.value.length == value.length)//字符个数相等 \u0026\u0026 regionMatches(true, 0, anotherString, 0, value.length);//忽略大小写比较 } public boolean regionMatches(boolean ignoreCase, int toffset, String other, int ooffset, int len) { char ta[] = value; int to = toffset; char pa[] = other.value; int po = ooffset; // Note: toffset, ooffset, or len might be near -1\u003e\u003e\u003e1. if ((ooffset \u003c 0) || (toffset \u003c 0) || (toffset \u003e (long)value.length - len) || (ooffset \u003e (long)other.value.length - len)) { return false; } while (len-- \u003e 0) { char c1 = ta[to++]; char c2 = pa[po++]; if (c1 == c2) { continue; } if (ignoreCase) { // If characters don't match but case may be ignored, // try converting both characters to uppercase. // If the results match, then the comparison scan should // continue. //把两个字符转换成大写的 char u1 = Character.toUpperCase(c1); char u2 = Character.toUpperCase(c2); if (u1 == u2) { continue; } // Unfortunately, conversion to uppercase does not work properly // for the Georgian alphabet, which has strange rules about case // conversion. So we need to make one last check before // exiting. //转换成大写的不相等，在转换成小写的判断 if (Character.toLowerCase(u1) == Character.toLowerCase(u2)) { continue; } } return false; } return true; } int compareTo(String anotherString)进行字符串的比较 public int compareTo(String anotherString) { int len1 = value.length; int len2 = anotherString.value.length; int lim = Math.min(len1, len2); char v1[] = value; char v2[] = anotherString.value; int k = 0; while (k \u003c lim) { char c1 = v1[k]; char c2 = v2[k]; if (c1 != c2) {//如果当前字符串的字符比参数的大返回正数，否则返回负数 return c1 - c2; } k++; } //如果两个字符串，长度小的字符串与长度大的前部分每个字符都相等，如果两字符串长度相等返回0，当前字符串长度大于参数字符串返回整数，当前字符串长度小于参数字符串返回负数 return len1 - len2; } compareToIgnoreCase(String str)字符串忽略大小写进行比较 public int compareToIgnoreCase(String str) { return CASE_INSENSITIVE_ORDER.compare(this, str); } public int compare(String s1, String s2) { int n1 = s1.length(); int n2 = s2.length(); int min = Math.min(n1, n2); for (int i = 0; i \u003c min; i++) { char c1 = s1.charAt(i); char c2 = s2.charAt(i); if (c1 != c2) { c1 = Character.toUpperCase(c1); c2 = Character.toUpperCase(c2); if (c1 != c2) { c1 = Character.toLowerCase(c1); c2 = Character.toLowerCase(c2); if (c1 != c2) { //如果两字符不相等，最后是转换成小写的进行比较 return c1 - c2; } } } } return n1 - n2; } startsWith(String prefix)判断字符串是否以指定字符串开头 public boolean startsWith(String prefix) { return startsWith(prefix, 0); } public boolean startsWith(String prefix, int toffset) { char ta[] = value; int to = toffset; char pa[] = prefix.value; int po = 0; int pc = prefix.value.length; // Note: toffset might be near -1\u003e\u003e\u003e1. if ((toffset \u003c 0) || (toffset \u003e value.length - pc)) { return false; } while (--pc \u003e= 0) {//循环给定前缀字符串长度 if (ta[to++] != pa[po++]) {//前缀字符串字符和当前字符串字符比较 return false; } } return true; } boolean endsWith(String suffix)判断字符串是否以指定字符串结尾 public boolean endsWith(String suffix) { return startsWith(suffix, value.length - suffix.value.length); } int hashCode()获取字符串的hashCode public int hashCode() { //默认字符串hash为0，如果是用另一个字符串就等于另一个字符串的hash int h = hash; if (h == 0 \u0026\u0026 value.length \u003e 0) { char val[] = value; for (int i = 0; i \u003c value.length; i++) {//一个一个字符的变量 //前面字符的hash*31+当前字符的ascii码 h = 31 * h + val[i]; } hash = h; } return h; } int indexOf(int ch)根据unicode编码获取下标 public int indexOf(int ch) { return indexOf(ch, 0); } public int indexOf(int ch, int fromIndex) { final int max = value.length; if (fromIndex \u003c 0) { fromIndex = 0; } else if (fromIndex \u003e= max) {//如果查找的起始位置超过了数组下标 // Note: fromIndex might be near -1\u003e\u003e\u003e1. return -1; } if (ch \u003c Character.MIN_SUPPLEMENTARY_CODE_POINT) { //编码是一个基本多语言编码 // handle most cases here (ch is a BMP code point or a // negative value (invalid code point)) final char[] value = this.value; for (int i = fromIndex; i \u003c max; i++) { if (value[i] == ch) { return i; } } return -1; } else { //获取需要使用两个char存储的编码的下标 return indexOfSupplementary(ch, fromIndex); } } private int indexOfSupplementary(int ch, int fromIndex) { if (Character.isValidCodePoint(ch)) {//是一个合法的unicode编码 final char[] value = this.value; final char hi = Character.highSurrogate(ch); final char lo = Character.lowSurrogate(ch); final int max = value.length - 1; for (int i = fromIndex; i \u003c max; i++) { if (value[i] == hi \u0026\u0026 value[i + 1] == lo) { return i; } } } return -1; } int lastIndexOf(int ch)获取指定编码从后往前搜索的第一个下标 public int lastIndexOf(int ch) { return lastIndexOf(ch, value.length - 1); } public int lastIndexOf(int ch, int fromIndex) { if (ch \u003c Character.MIN_SUPPLEMENTARY_CODE_POINT) {//编码是一个基本多语言unicode编码，使用一个char存储 // handle most cases here (ch is a BMP code point or a // negative value (invalid code point)) final char[] value = this.value; int i = Math.min(fromIndex, value.length - 1); for (; i \u003e= 0; i--) { if (value[i] == ch) { return i; } } return -1; } else { //编码使用两个char存储 return lastIndexOfSupplementary(ch, fromIndex); } } private int lastIndexOfSupplementary(int ch, int fromIndex) { if (Character.isValidCodePoint(ch)) { final char[] value = this.value; char hi = Character.highSurrogate(ch); char lo = Character.lowSurrogate(ch); int i = Math.min(fromIndex, value.length - 2); for (; i \u003e= 0; i--) { if (value[i] == hi \u0026\u0026 value[i + 1] == lo) { return i; } } } return -1; } int indexOf(String str)获取指定字符串的的第一个字符在当前字符串的下标 public int indexOf(String str) { return indexOf(str, 0); } public int indexOf(String str, int fromIndex) { return indexOf(value, 0, value.length, str.value, 0, str.value.length, fromIndex); } static int indexOf(char[] source, int sourceOffset, int sourceCount, char[] target, int targetOffset, int targetCount, int fromIndex) { if (fromIndex \u003e= sourceCount) { return (targetCount == 0 ? sourceCount : -1); } if (fromIndex \u003c 0) { fromIndex = 0; } if (targetCount == 0) { return fromIndex; } char first = target[targetOffset]; int max = sourceOffset + (sourceCount - targetCount); for (int i = sourceOffset + fromIndex; i \u003c= max; i++) { /* Look for first character. */ if (source[i] != first) { while (++i \u003c= max \u0026\u0026 source[i] != first); } /* Found first character, now look at the rest of v2 */ if (i \u003c= max) { int j = i + 1; //计算终止下标 int end = j + targetCount - 1; for (int k = targetOffset + 1; j \u003c end \u0026\u0026 source[j] == target[k]; j++, k++); if (j == end) { /* Found whole string. */ return i - sourceOffset; } } } return -1; } String substring(int beginIndex)获取指定下标到最末下标的字符串 public String substring(int beginIndex) { if (beginIndex \u003c 0) { throw new StringIndexOutOfBoundsException(beginIndex); } //计算长度 int subLen = value.length - beginIndex; if (subLen \u003c 0) { throw new StringIndexOutOfBoundsException(subLen); } return (beginIndex == 0) ? this : new String(value, beginIndex, subLen); } String substring(int beginIndex, int endIndex)根据起始下标和结束下标获取字符串，包含起始下标字符，不包含结束下标字符 public String substring(int beginIndex, int endIndex) { if (beginIndex \u003c 0) { throw new StringIndexOutOfBoundsException(beginIndex); } if (endIndex \u003e value.length) { throw new StringIndexOutOfBoundsException(endIndex); } //计算字符个数 int subLen = endIndex - beginIndex; if (subLen \u003c 0) { throw new StringIndexOutOfBoundsException(subLen); } return ((beginIndex == 0) \u0026\u0026 (endIndex == value.length)) ? this : new String(value, beginIndex, subLen); } String concat(String str)把参数字符串拼接到当前字符串 public String concat(String str) { int otherLen = str.length(); if (otherLen == 0) { return this; } //获取拼接字符串的长度 int len = value.length; //把原字符串的字符拷贝到一个大小为原字符串大小+参数字符串大小的新数组中 char buf[] = Arrays.copyOf(value, len + otherLen); //把拼接字符串的字符拷贝到数组中 str.getChars(buf, len); return new String(buf, true); } String replace(char oldChar, char newChar)把指定字符替换为新字符 public String replace(char oldChar, char newChar) { if (oldChar != newChar) { int len = value.length; int i = -1; char[] val = value; /* avoid getfield opcode */ while (++i \u003c len) { if (val[i] == oldChar) {//找到需要替换字符的位置 break; } } if (i \u003c len) { char buf[] = new char[len]; for (int j = 0; j \u003c i; j++) { buf[j] = val[j]; } while (i \u003c len) { char c = val[i]; buf[i] = (c == oldChar) ? newChar : c;//把原字符替换为新字符 i++; } return new String(buf, true); } } return this; } boolean matches(String regex)判断正则表达式是否比配当前字符串 public boolean matches(String regex) { return Pattern.matches(regex, this); } boolean contains(CharSequence s)判断当前字符串是否包含另一个字符序列 public boolean contains(CharSequence s) { return indexOf(s.toString()) \u003e -1; } String trim()去掉字符串前后的空格 public String trim() { int len = value.length; int st = 0; char[] val = value; /* avoid getfield opcode */ //找到字符串由前往后第一个不是空格的位置 while ((st \u003c len) \u0026\u0026 (val[st] \u003c= ' ')) { st++; } //找到字符串由后往前第一个不是空格的位置 while ((st \u003c len) \u0026\u0026 (val[len - 1] \u003c= ' ')) { len--; } return ((st \u003e 0) || (len \u003c value.length)) ? substring(st, len) : this; } char[] toCharArray()把字符串转换成字符数组 public char[] toCharArray() { // Cannot use Arrays.copyOf because of class initialization order issues char result[] = new char[value.length]; //使用System.arraycopy方法拷贝 System.arraycopy(value, 0, result, 0, value.length); return result; } 本地方法 native String intern();获取字符串所指向的字符串常量池中对象的地址 @Test public void test8() { String s1=\"abc\"; String s2=new String(\"abc\"); System.out.println(s1==s2);//false System.out.println(s1==s2.intern());//true } 使用s1=“abc\"这种方式栈中变量s1直接指向字符串常量池中的常量“abc”，而s2=new String(“abc”)这种方式，栈中变量s2指向的是对中一个变量t，t指向字符串常量池中的“abc”，所以s1和s2指向的地址不相同\ns2.intern()获取的是字符串的常量池中的地址，也就是如果变量直接指向常量池，那么就是变量的地址，如果变量指向堆，那么会获取堆所指向字符串常量池中的地址\n","wordCount":"2421","inLanguage":"en","datePublished":"2022-11-27T16:16:14+08:00","dateModified":"2022-11-27T16:16:14+08:00","author":{"@type":"Person","name":"Me"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://moyuduo.github.io/posts/string%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/"},"publisher":{"@type":"Organization","name":"Moyuduo's Blog","logo":{"@type":"ImageObject","url":"https://moyuduo.github.io/%3Clink%20/%20abs%20url%3E"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://moyuduo.github.io/ accesskey=h title="Moyuduo's Blog (Alt + H)"><img src=https://moyuduo.github.io/apple-touch-icon.png alt aria-label=logo height=35>Moyuduo's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://moyuduo.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://moyuduo.github.io/archives title=Archive><span>Archive</span></a></li><li><a href=https://moyuduo.github.io/categories/ title=Categories><span>Categories</span></a></li><li><a href=https://moyuduo.github.io/tags/ title=Tags><span>Tags</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>String源码分析</h1></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#类结构>类结构</a></li><li><a href=#属性>属性</a></li><li><a href=#构造方法>构造方法</a></li><li><a href=#方法>方法</a><ul><li><a href=#静态方法>静态方法</a></li><li><a href=#成员方法>成员方法</a></li><li><a href=#本地方法>本地方法</a></li></ul></li></ul></nav></div></details></div><div class=post-content><h1 id=string源码分析>String源码分析<a hidden class=anchor aria-hidden=true href=#string源码分析>#</a></h1><h2 id=类结构>类结构<a hidden class=anchor aria-hidden=true href=#类结构>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span> <span class=kd>final</span> <span class=kd>class</span> <span class=nc>String</span>
</span></span><span class=line><span class=cl>    <span class=kd>implements</span> <span class=n>java</span><span class=o>.</span><span class=na>io</span><span class=o>.</span><span class=na>Serializable</span><span class=o>,</span> <span class=n>Comparable</span><span class=o>&lt;</span><span class=n>String</span><span class=o>&gt;,</span> <span class=n>CharSequence</span> 
</span></span></code></pre></div><p><img loading=lazy src=images/Snipaste_2020-04-27_10-25-55.jpg alt></p><p>String类实现了Serializable可以被序列化</p><p>String类实现了Comparable可以进行比较</p><p>String类实现了CharSequence可以按下标进行相关操作</p><p>并且String类使用final进行修饰，不可以被继承</p><h2 id=属性>属性<a hidden class=anchor aria-hidden=true href=#属性>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>//用来存储字符串的每一个字符
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>private</span> <span class=kd>final</span> <span class=kt>char</span> <span class=n>value</span><span class=o>[];</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>//hash值
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>private</span> <span class=kt>int</span> <span class=n>hash</span><span class=o>;</span> <span class=c1>// Default to 0
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=c1>//序列化版本号
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>private</span> <span class=kd>static</span> <span class=kd>final</span> <span class=kt>long</span> <span class=n>serialVersionUID</span> <span class=o>=</span> <span class=o>-</span><span class=mi>6849794470754667710L</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>//从变量名大致可以看出和序列化有关，具体的不明白
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>private</span> <span class=kd>static</span> <span class=kd>final</span> <span class=n>ObjectStreamField</span><span class=o>[]</span> <span class=n>serialPersistentFields</span> <span class=o>=</span>
</span></span><span class=line><span class=cl>        <span class=k>new</span> <span class=n>ObjectStreamField</span><span class=o>[</span><span class=mi>0</span><span class=o>];</span>
</span></span></code></pre></div><h2 id=构造方法>构造方法<a hidden class=anchor aria-hidden=true href=#构造方法>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>//无参，直接使用空字符串赋值，hash为0
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>public</span> <span class=nf>String</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=o>.</span><span class=na>value</span> <span class=o>=</span> <span class=s>&#34;&#34;</span><span class=o>.</span><span class=na>value</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>//使用已有字符串初始化
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>public</span> <span class=nf>String</span><span class=o>(</span><span class=n>String</span> <span class=n>original</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=o>.</span><span class=na>value</span> <span class=o>=</span> <span class=n>original</span><span class=o>.</span><span class=na>value</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=o>.</span><span class=na>hash</span> <span class=o>=</span> <span class=n>original</span><span class=o>.</span><span class=na>hash</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>//使用char数组初始化，hash为0
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>public</span> <span class=nf>String</span><span class=o>(</span><span class=kt>char</span> <span class=n>value</span><span class=o>[])</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=o>.</span><span class=na>value</span> <span class=o>=</span> <span class=n>Arrays</span><span class=o>.</span><span class=na>copyOf</span><span class=o>(</span><span class=n>value</span><span class=o>,</span> <span class=n>value</span><span class=o>.</span><span class=na>length</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>//使用字符数组，并指定偏移、字符个数初始化
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>public</span> <span class=nf>String</span><span class=o>(</span><span class=kt>char</span> <span class=n>value</span><span class=o>[],</span> <span class=kt>int</span> <span class=n>offset</span><span class=o>,</span> <span class=kt>int</span> <span class=n>count</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=o>(</span><span class=n>offset</span> <span class=o>&lt;</span> <span class=mi>0</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=k>throw</span> <span class=k>new</span> <span class=n>StringIndexOutOfBoundsException</span><span class=o>(</span><span class=n>offset</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=o>(</span><span class=n>count</span> <span class=o>&lt;=</span> <span class=mi>0</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=o>(</span><span class=n>count</span> <span class=o>&lt;</span> <span class=mi>0</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                <span class=k>throw</span> <span class=k>new</span> <span class=n>StringIndexOutOfBoundsException</span><span class=o>(</span><span class=n>count</span><span class=o>);</span>
</span></span><span class=line><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=o>(</span><span class=n>offset</span> <span class=o>&lt;=</span> <span class=n>value</span><span class=o>.</span><span class=na>length</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                <span class=k>this</span><span class=o>.</span><span class=na>value</span> <span class=o>=</span> <span class=s>&#34;&#34;</span><span class=o>.</span><span class=na>value</span><span class=o>;</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span><span class=o>;</span>
</span></span><span class=line><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=c1>// Note: offset or count might be near -1&gt;&gt;&gt;1.
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>if</span> <span class=o>(</span><span class=n>offset</span> <span class=o>&gt;</span> <span class=n>value</span><span class=o>.</span><span class=na>length</span> <span class=o>-</span> <span class=n>count</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=k>throw</span> <span class=k>new</span> <span class=n>StringIndexOutOfBoundsException</span><span class=o>(</span><span class=n>offset</span> <span class=o>+</span> <span class=n>count</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=o>.</span><span class=na>value</span> <span class=o>=</span> <span class=n>Arrays</span><span class=o>.</span><span class=na>copyOfRange</span><span class=o>(</span><span class=n>value</span><span class=o>,</span> <span class=n>offset</span><span class=o>,</span> <span class=n>offset</span><span class=o>+</span><span class=n>count</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>//使用unicode编码数组并指定偏移和数量进行初始化
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>public</span> <span class=nf>String</span><span class=o>(</span><span class=kt>int</span><span class=o>[]</span> <span class=n>codePoints</span><span class=o>,</span> <span class=kt>int</span> <span class=n>offset</span><span class=o>,</span> <span class=kt>int</span> <span class=n>count</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=o>(</span><span class=n>offset</span> <span class=o>&lt;</span> <span class=mi>0</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=k>throw</span> <span class=k>new</span> <span class=n>StringIndexOutOfBoundsException</span><span class=o>(</span><span class=n>offset</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=o>(</span><span class=n>count</span> <span class=o>&lt;=</span> <span class=mi>0</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=o>(</span><span class=n>count</span> <span class=o>&lt;</span> <span class=mi>0</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                <span class=k>throw</span> <span class=k>new</span> <span class=n>StringIndexOutOfBoundsException</span><span class=o>(</span><span class=n>count</span><span class=o>);</span>
</span></span><span class=line><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=o>(</span><span class=n>offset</span> <span class=o>&lt;=</span> <span class=n>codePoints</span><span class=o>.</span><span class=na>length</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                <span class=k>this</span><span class=o>.</span><span class=na>value</span> <span class=o>=</span> <span class=s>&#34;&#34;</span><span class=o>.</span><span class=na>value</span><span class=o>;</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span><span class=o>;</span>
</span></span><span class=line><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=c1>// Note: offset or count might be near -1&gt;&gt;&gt;1.
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>if</span> <span class=o>(</span><span class=n>offset</span> <span class=o>&gt;</span> <span class=n>codePoints</span><span class=o>.</span><span class=na>length</span> <span class=o>-</span> <span class=n>count</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=k>throw</span> <span class=k>new</span> <span class=n>StringIndexOutOfBoundsException</span><span class=o>(</span><span class=n>offset</span> <span class=o>+</span> <span class=n>count</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=kd>final</span> <span class=kt>int</span> <span class=n>end</span> <span class=o>=</span> <span class=n>offset</span> <span class=o>+</span> <span class=n>count</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// Pass 1: Compute precise size of char[]	计算char数组大小
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=kt>int</span> <span class=n>n</span> <span class=o>=</span> <span class=n>count</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=o>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=n>offset</span><span class=o>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>end</span><span class=o>;</span> <span class=n>i</span><span class=o>++)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=kt>int</span> <span class=n>c</span> <span class=o>=</span> <span class=n>codePoints</span><span class=o>[</span><span class=n>i</span><span class=o>];</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=o>(</span><span class=n>Character</span><span class=o>.</span><span class=na>isBmpCodePoint</span><span class=o>(</span><span class=n>c</span><span class=o>))</span><span class=c1>//判断编码是不是BMP（Basic Mutilingual Plane）
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=k>continue</span><span class=o>;</span>
</span></span><span class=line><span class=cl>            <span class=k>else</span> <span class=k>if</span> <span class=o>(</span><span class=n>Character</span><span class=o>.</span><span class=na>isValidCodePoint</span><span class=o>(</span><span class=n>c</span><span class=o>))</span><span class=c1>//验证编码是否在unicode编码范围内
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=n>n</span><span class=o>++;</span>
</span></span><span class=line><span class=cl>            <span class=k>else</span> <span class=k>throw</span> <span class=k>new</span> <span class=n>IllegalArgumentException</span><span class=o>(</span><span class=n>Integer</span><span class=o>.</span><span class=na>toString</span><span class=o>(</span><span class=n>c</span><span class=o>));</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// Pass 2: Allocate and fill in char[] 申明char数组并填入编码对应char
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=kd>final</span> <span class=kt>char</span><span class=o>[]</span> <span class=n>v</span> <span class=o>=</span> <span class=k>new</span> <span class=kt>char</span><span class=o>[</span><span class=n>n</span><span class=o>];</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=o>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=n>offset</span><span class=o>,</span> <span class=n>j</span> <span class=o>=</span> <span class=mi>0</span><span class=o>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>end</span><span class=o>;</span> <span class=n>i</span><span class=o>++,</span> <span class=n>j</span><span class=o>++)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=kt>int</span> <span class=n>c</span> <span class=o>=</span> <span class=n>codePoints</span><span class=o>[</span><span class=n>i</span><span class=o>];</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=o>(</span><span class=n>Character</span><span class=o>.</span><span class=na>isBmpCodePoint</span><span class=o>(</span><span class=n>c</span><span class=o>))</span><span class=c1>//如果编码是BMP直接一个字符就是接受
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=n>v</span><span class=o>[</span><span class=n>j</span><span class=o>]</span> <span class=o>=</span> <span class=o>(</span><span class=kt>char</span><span class=o>)</span><span class=n>c</span><span class=o>;</span>
</span></span><span class=line><span class=cl>            <span class=k>else</span>
</span></span><span class=line><span class=cl>                <span class=n>Character</span><span class=o>.</span><span class=na>toSurrogates</span><span class=o>(</span><span class=n>c</span><span class=o>,</span> <span class=n>v</span><span class=o>,</span> <span class=n>j</span><span class=o>++);</span><span class=c1>//转换成两个字符存储
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=o>.</span><span class=na>value</span> <span class=o>=</span> <span class=n>v</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>//使用ascii码数组进行初始化
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nd>@Deprecated</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=nf>String</span><span class=o>(</span><span class=kt>byte</span> <span class=n>ascii</span><span class=o>[],</span> <span class=kt>int</span> <span class=n>hibyte</span><span class=o>,</span> <span class=kt>int</span> <span class=n>offset</span><span class=o>,</span> <span class=kt>int</span> <span class=n>count</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>checkBounds</span><span class=o>(</span><span class=n>ascii</span><span class=o>,</span> <span class=n>offset</span><span class=o>,</span> <span class=n>count</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=kt>char</span> <span class=n>value</span><span class=o>[]</span> <span class=o>=</span> <span class=k>new</span> <span class=kt>char</span><span class=o>[</span><span class=n>count</span><span class=o>];</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=o>(</span><span class=n>hibyte</span> <span class=o>==</span> <span class=mi>0</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=k>for</span> <span class=o>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=n>count</span><span class=o>;</span> <span class=n>i</span><span class=o>--</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=o>;)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                <span class=n>value</span><span class=o>[</span><span class=n>i</span><span class=o>]</span> <span class=o>=</span> <span class=o>(</span><span class=kt>char</span><span class=o>)(</span><span class=n>ascii</span><span class=o>[</span><span class=n>i</span> <span class=o>+</span> <span class=n>offset</span><span class=o>]</span> <span class=o>&amp;</span> <span class=mh>0xff</span><span class=o>);</span>
</span></span><span class=line><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span> <span class=k>else</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=n>hibyte</span> <span class=o>&lt;&lt;=</span> <span class=mi>8</span><span class=o>;</span>
</span></span><span class=line><span class=cl>            <span class=k>for</span> <span class=o>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=n>count</span><span class=o>;</span> <span class=n>i</span><span class=o>--</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=o>;)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                <span class=n>value</span><span class=o>[</span><span class=n>i</span><span class=o>]</span> <span class=o>=</span> <span class=o>(</span><span class=kt>char</span><span class=o>)(</span><span class=n>hibyte</span> <span class=o>|</span> <span class=o>(</span><span class=n>ascii</span><span class=o>[</span><span class=n>i</span> <span class=o>+</span> <span class=n>offset</span><span class=o>]</span> <span class=o>&amp;</span> <span class=mh>0xff</span><span class=o>));</span>
</span></span><span class=line><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=o>.</span><span class=na>value</span> <span class=o>=</span> <span class=n>value</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nd>@Deprecated</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=nf>String</span><span class=o>(</span><span class=kt>byte</span> <span class=n>ascii</span><span class=o>[],</span> <span class=kt>int</span> <span class=n>hibyte</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=o>(</span><span class=n>ascii</span><span class=o>,</span> <span class=n>hibyte</span><span class=o>,</span> <span class=mi>0</span><span class=o>,</span> <span class=n>ascii</span><span class=o>.</span><span class=na>length</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>//使用字节数组+字符集名初始化
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>public</span> <span class=nf>String</span><span class=o>(</span><span class=kt>byte</span> <span class=n>bytes</span><span class=o>[],</span> <span class=kt>int</span> <span class=n>offset</span><span class=o>,</span> <span class=kt>int</span> <span class=n>length</span><span class=o>,</span> <span class=n>String</span> <span class=n>charsetName</span><span class=o>)</span>
</span></span><span class=line><span class=cl>            <span class=kd>throws</span> <span class=n>UnsupportedEncodingException</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=o>(</span><span class=n>charsetName</span> <span class=o>==</span> <span class=kc>null</span><span class=o>)</span>
</span></span><span class=line><span class=cl>            <span class=k>throw</span> <span class=k>new</span> <span class=n>NullPointerException</span><span class=o>(</span><span class=s>&#34;charsetName&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=n>checkBounds</span><span class=o>(</span><span class=n>bytes</span><span class=o>,</span> <span class=n>offset</span><span class=o>,</span> <span class=n>length</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=o>.</span><span class=na>value</span> <span class=o>=</span> <span class=n>StringCoding</span><span class=o>.</span><span class=na>decode</span><span class=o>(</span><span class=n>charsetName</span><span class=o>,</span> <span class=n>bytes</span><span class=o>,</span> <span class=n>offset</span><span class=o>,</span> <span class=n>length</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>//使用字节数组+字符集名初始化
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>public</span> <span class=nf>String</span><span class=o>(</span><span class=kt>byte</span> <span class=n>bytes</span><span class=o>[],</span> <span class=kt>int</span> <span class=n>offset</span><span class=o>,</span> <span class=kt>int</span> <span class=n>length</span><span class=o>,</span> <span class=n>Charset</span> <span class=n>charset</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=o>(</span><span class=n>charset</span> <span class=o>==</span> <span class=kc>null</span><span class=o>)</span>
</span></span><span class=line><span class=cl>            <span class=k>throw</span> <span class=k>new</span> <span class=n>NullPointerException</span><span class=o>(</span><span class=s>&#34;charset&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=n>checkBounds</span><span class=o>(</span><span class=n>bytes</span><span class=o>,</span> <span class=n>offset</span><span class=o>,</span> <span class=n>length</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=o>.</span><span class=na>value</span> <span class=o>=</span>  <span class=n>StringCoding</span><span class=o>.</span><span class=na>decode</span><span class=o>(</span><span class=n>charset</span><span class=o>,</span> <span class=n>bytes</span><span class=o>,</span> <span class=n>offset</span><span class=o>,</span> <span class=n>length</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>//使用字节数组+字符集名初始化
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>public</span> <span class=nf>String</span><span class=o>(</span><span class=kt>byte</span> <span class=n>bytes</span><span class=o>[],</span> <span class=n>String</span> <span class=n>charsetName</span><span class=o>)</span>
</span></span><span class=line><span class=cl>            <span class=kd>throws</span> <span class=n>UnsupportedEncodingException</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=o>(</span><span class=n>bytes</span><span class=o>,</span> <span class=mi>0</span><span class=o>,</span> <span class=n>bytes</span><span class=o>.</span><span class=na>length</span><span class=o>,</span> <span class=n>charsetName</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=c1>//使用字节数组+字符集名初始化
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>public</span> <span class=nf>String</span><span class=o>(</span><span class=kt>byte</span> <span class=n>bytes</span><span class=o>[],</span> <span class=n>Charset</span> <span class=n>charset</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=o>(</span><span class=n>bytes</span><span class=o>,</span> <span class=mi>0</span><span class=o>,</span> <span class=n>bytes</span><span class=o>.</span><span class=na>length</span><span class=o>,</span> <span class=n>charset</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>//使用字节数组初始化
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>public</span> <span class=nf>String</span><span class=o>(</span><span class=kt>byte</span> <span class=n>bytes</span><span class=o>[],</span> <span class=kt>int</span> <span class=n>offset</span><span class=o>,</span> <span class=kt>int</span> <span class=n>length</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>checkBounds</span><span class=o>(</span><span class=n>bytes</span><span class=o>,</span> <span class=n>offset</span><span class=o>,</span> <span class=n>length</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=o>.</span><span class=na>value</span> <span class=o>=</span> <span class=n>StringCoding</span><span class=o>.</span><span class=na>decode</span><span class=o>(</span><span class=n>bytes</span><span class=o>,</span> <span class=n>offset</span><span class=o>,</span> <span class=n>length</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=nf>String</span><span class=o>(</span><span class=kt>byte</span> <span class=n>bytes</span><span class=o>[])</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=o>(</span><span class=n>bytes</span><span class=o>,</span> <span class=mi>0</span><span class=o>,</span> <span class=n>bytes</span><span class=o>.</span><span class=na>length</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>//使用StringBuffer初始化
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>public</span> <span class=nf>String</span><span class=o>(</span><span class=n>StringBuffer</span> <span class=n>buffer</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=kd>synchronized</span><span class=o>(</span><span class=n>buffer</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=k>this</span><span class=o>.</span><span class=na>value</span> <span class=o>=</span> <span class=n>Arrays</span><span class=o>.</span><span class=na>copyOf</span><span class=o>(</span><span class=n>buffer</span><span class=o>.</span><span class=na>getValue</span><span class=o>(),</span> <span class=n>buffer</span><span class=o>.</span><span class=na>length</span><span class=o>());</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>//使用StringBuilder初始化
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>public</span> <span class=nf>String</span><span class=o>(</span><span class=n>StringBuilder</span> <span class=n>builder</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=o>.</span><span class=na>value</span> <span class=o>=</span> <span class=n>Arrays</span><span class=o>.</span><span class=na>copyOf</span><span class=o>(</span><span class=n>builder</span><span class=o>.</span><span class=na>getValue</span><span class=o>(),</span> <span class=n>builder</span><span class=o>.</span><span class=na>length</span><span class=o>());</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span></code></pre></div><h2 id=方法>方法<a hidden class=anchor aria-hidden=true href=#方法>#</a></h2><h3 id=静态方法>静态方法<a hidden class=anchor aria-hidden=true href=#静态方法>#</a></h3><h4 id=joincharsequencecharsequence使用分隔符拼接字符串>join(CharSequence，CharSequence&mldr;）使用分隔符拼接字符串<a hidden class=anchor aria-hidden=true href=#joincharsequencecharsequence使用分隔符拼接字符串>#</a></h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span> <span class=kd>static</span> <span class=n>String</span> <span class=nf>join</span><span class=o>(</span><span class=n>CharSequence</span> <span class=n>delimiter</span><span class=o>,</span> <span class=n>CharSequence</span><span class=o>...</span> <span class=n>elements</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>Objects</span><span class=o>.</span><span class=na>requireNonNull</span><span class=o>(</span><span class=n>delimiter</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=n>Objects</span><span class=o>.</span><span class=na>requireNonNull</span><span class=o>(</span><span class=n>elements</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=c1>// Number of elements not likely worth Arrays.stream overhead.
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=n>StringJoiner</span> <span class=n>joiner</span> <span class=o>=</span> <span class=k>new</span> <span class=n>StringJoiner</span><span class=o>(</span><span class=n>delimiter</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=o>(</span><span class=n>CharSequence</span> <span class=n>cs</span><span class=o>:</span> <span class=n>elements</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=n>joiner</span><span class=o>.</span><span class=na>add</span><span class=o>(</span><span class=n>cs</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>joiner</span><span class=o>.</span><span class=na>toString</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span></code></pre></div><h4 id=joincharsequenceiterable-extends-charsequence使用分隔符拼接字符串>join(CharSequence，Iterable&lt;? extends CharSequence>）使用分隔符拼接字符串<a hidden class=anchor aria-hidden=true href=#joincharsequenceiterable-extends-charsequence使用分隔符拼接字符串>#</a></h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span> <span class=kd>static</span> <span class=n>String</span> <span class=nf>join</span><span class=o>(</span><span class=n>CharSequence</span> <span class=n>delimiter</span><span class=o>,</span>
</span></span><span class=line><span class=cl>            <span class=n>Iterable</span><span class=o>&lt;?</span> <span class=kd>extends</span> <span class=n>CharSequence</span><span class=o>&gt;</span> <span class=n>elements</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>Objects</span><span class=o>.</span><span class=na>requireNonNull</span><span class=o>(</span><span class=n>delimiter</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=n>Objects</span><span class=o>.</span><span class=na>requireNonNull</span><span class=o>(</span><span class=n>elements</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=n>StringJoiner</span> <span class=n>joiner</span> <span class=o>=</span> <span class=k>new</span> <span class=n>StringJoiner</span><span class=o>(</span><span class=n>delimiter</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=o>(</span><span class=n>CharSequence</span> <span class=n>cs</span><span class=o>:</span> <span class=n>elements</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=n>joiner</span><span class=o>.</span><span class=na>add</span><span class=o>(</span><span class=n>cs</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>joiner</span><span class=o>.</span><span class=na>toString</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span></code></pre></div><h4 id=formatstringobject使用字符串格式指定参数进行格式化生成字符串>format(String，Object&mldr;）使用字符串格式指定参数进行格式化生成字符串<a hidden class=anchor aria-hidden=true href=#formatstringobject使用字符串格式指定参数进行格式化生成字符串>#</a></h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span> <span class=kd>static</span> <span class=n>String</span> <span class=nf>format</span><span class=o>(</span><span class=n>String</span> <span class=n>format</span><span class=o>,</span> <span class=n>Object</span><span class=o>...</span> <span class=n>args</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=k>new</span> <span class=n>Formatter</span><span class=o>().</span><span class=na>format</span><span class=o>(</span><span class=n>format</span><span class=o>,</span> <span class=n>args</span><span class=o>).</span><span class=na>toString</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span></code></pre></div><h4 id=formatlocalstringobject根据环境使用字符串格式指定参数进行格式化生成字符串>format(Local，String，Object&mldr;）根据环境使用字符串格式指定参数进行格式化生成字符串<a hidden class=anchor aria-hidden=true href=#formatlocalstringobject根据环境使用字符串格式指定参数进行格式化生成字符串>#</a></h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span> <span class=kd>static</span> <span class=n>String</span> <span class=nf>format</span><span class=o>(</span><span class=n>Locale</span> <span class=n>l</span><span class=o>,</span> <span class=n>String</span> <span class=n>format</span><span class=o>,</span> <span class=n>Object</span><span class=o>...</span> <span class=n>args</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=k>new</span> <span class=n>Formatter</span><span class=o>(</span><span class=n>l</span><span class=o>).</span><span class=na>format</span><span class=o>(</span><span class=n>format</span><span class=o>,</span> <span class=n>args</span><span class=o>).</span><span class=na>toString</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span></code></pre></div><h4 id=valueofobject对象转换成字符串如果对象为null转为为字符串null>valueOf(Object）对象转换成字符串，如果对象为null转为为字符串“null”<a hidden class=anchor aria-hidden=true href=#valueofobject对象转换成字符串如果对象为null转为为字符串null>#</a></h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span> <span class=kd>static</span> <span class=n>String</span> <span class=nf>valueOf</span><span class=o>(</span><span class=n>Object</span> <span class=n>obj</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=o>(</span><span class=n>obj</span> <span class=o>==</span> <span class=kc>null</span><span class=o>)</span> <span class=o>?</span> <span class=s>&#34;null&#34;</span> <span class=o>:</span> <span class=n>obj</span><span class=o>.</span><span class=na>toString</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span></code></pre></div><h4 id=valueofcharchar数组转换成字符串>valueOf(char[]）char数组转换成字符串<a hidden class=anchor aria-hidden=true href=#valueofcharchar数组转换成字符串>#</a></h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span> <span class=kd>static</span> <span class=n>String</span> <span class=nf>valueOf</span><span class=o>(</span><span class=kt>char</span> <span class=n>data</span><span class=o>[])</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=k>new</span> <span class=n>String</span><span class=o>(</span><span class=n>data</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span></code></pre></div><h4 id=valueofxxxxxx数据类型转换为字符串>valueOf（xxx）xxx数据类型转换为字符串<a hidden class=anchor aria-hidden=true href=#valueofxxxxxx数据类型转换为字符串>#</a></h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span> <span class=kd>static</span> <span class=n>String</span> <span class=nf>valueOf</span><span class=o>(</span><span class=kt>boolean</span> <span class=n>b</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>b</span> <span class=o>?</span> <span class=s>&#34;true&#34;</span> <span class=o>:</span> <span class=s>&#34;false&#34;</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>static</span> <span class=n>String</span> <span class=nf>valueOf</span><span class=o>(</span><span class=kt>char</span> <span class=n>c</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=kt>char</span> <span class=n>data</span><span class=o>[]</span> <span class=o>=</span> <span class=o>{</span><span class=n>c</span><span class=o>};</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=k>new</span> <span class=n>String</span><span class=o>(</span><span class=n>data</span><span class=o>,</span> <span class=kc>true</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>static</span> <span class=n>String</span> <span class=nf>valueOf</span><span class=o>(</span><span class=kt>int</span> <span class=n>i</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>Integer</span><span class=o>.</span><span class=na>toString</span><span class=o>(</span><span class=n>i</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>static</span> <span class=n>String</span> <span class=nf>valueOf</span><span class=o>(</span><span class=kt>long</span> <span class=n>l</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>Long</span><span class=o>.</span><span class=na>toString</span><span class=o>(</span><span class=n>l</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>static</span> <span class=n>String</span> <span class=nf>valueOf</span><span class=o>(</span><span class=kt>float</span> <span class=n>f</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>Float</span><span class=o>.</span><span class=na>toString</span><span class=o>(</span><span class=n>f</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl> <span class=kd>public</span> <span class=kd>static</span> <span class=n>String</span> <span class=nf>valueOf</span><span class=o>(</span><span class=kt>double</span> <span class=n>d</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>Double</span><span class=o>.</span><span class=na>toString</span><span class=o>(</span><span class=n>d</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span></code></pre></div><h4 id=valueofcharintintchar数组按照偏移个指定字符格式转换为字符串>valueOf(char[],int,int）char数组按照偏移个指定字符格式转换为字符串<a hidden class=anchor aria-hidden=true href=#valueofcharintintchar数组按照偏移个指定字符格式转换为字符串>#</a></h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span> <span class=kd>static</span> <span class=n>String</span> <span class=nf>valueOf</span><span class=o>(</span><span class=kt>char</span> <span class=n>data</span><span class=o>[],</span> <span class=kt>int</span> <span class=n>offset</span><span class=o>,</span> <span class=kt>int</span> <span class=n>count</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=k>new</span> <span class=n>String</span><span class=o>(</span><span class=n>data</span><span class=o>,</span> <span class=n>offset</span><span class=o>,</span> <span class=n>count</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span></code></pre></div><h4 id=copyvalueofcharintint使用指定字符数组根据偏移和字符个数拷贝一个新字符串同valueof>copyValueOf(char，int，int）使用指定字符数组根据偏移和字符个数拷贝一个新字符串，同valueOf<a hidden class=anchor aria-hidden=true href=#copyvalueofcharintint使用指定字符数组根据偏移和字符个数拷贝一个新字符串同valueof>#</a></h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span> <span class=kd>static</span> <span class=n>String</span> <span class=nf>copyValueOf</span><span class=o>(</span><span class=kt>char</span> <span class=n>data</span><span class=o>[],</span> <span class=kt>int</span> <span class=n>offset</span><span class=o>,</span> <span class=kt>int</span> <span class=n>count</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=k>new</span> <span class=n>String</span><span class=o>(</span><span class=n>data</span><span class=o>,</span> <span class=n>offset</span><span class=o>,</span> <span class=n>count</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span></code></pre></div><h4 id=copyvalueofchar使用指定字符数组拷贝新字符串>copyValueOf(char[])使用指定字符数组拷贝新字符串<a hidden class=anchor aria-hidden=true href=#copyvalueofchar使用指定字符数组拷贝新字符串>#</a></h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span> <span class=kd>static</span> <span class=n>String</span> <span class=nf>copyValueOf</span><span class=o>(</span><span class=kt>char</span> <span class=n>data</span><span class=o>[])</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=k>new</span> <span class=n>String</span><span class=o>(</span><span class=n>data</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span></code></pre></div><h3 id=成员方法>成员方法<a hidden class=anchor aria-hidden=true href=#成员方法>#</a></h3><h4 id=char-charatint-index获取指定下标的字符>char charAt(int index)获取指定下标的字符<a hidden class=anchor aria-hidden=true href=#char-charatint-index获取指定下标的字符>#</a></h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span> <span class=kt>char</span> <span class=nf>charAt</span><span class=o>(</span><span class=kt>int</span> <span class=n>index</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=o>((</span><span class=n>index</span> <span class=o>&lt;</span> <span class=mi>0</span><span class=o>)</span> <span class=o>||</span> <span class=o>(</span><span class=n>index</span> <span class=o>&gt;=</span> <span class=n>value</span><span class=o>.</span><span class=na>length</span><span class=o>))</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=k>throw</span> <span class=k>new</span> <span class=n>StringIndexOutOfBoundsException</span><span class=o>(</span><span class=n>index</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>value</span><span class=o>[</span><span class=n>index</span><span class=o>];</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span></code></pre></div><h4 id=void-getcharsint-srcbegin-int-srcend-char-dst-int-dstbegin把当前字符串的char数组的指定范围拷贝到目标char数组的指定位置>void getChars(int srcBegin, int srcEnd, char dst[], int dstBegin)把当前字符串的char数组的指定范围拷贝到目标char数组的指定位置<a hidden class=anchor aria-hidden=true href=#void-getcharsint-srcbegin-int-srcend-char-dst-int-dstbegin把当前字符串的char数组的指定范围拷贝到目标char数组的指定位置>#</a></h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span> <span class=kt>void</span> <span class=nf>getChars</span><span class=o>(</span><span class=kt>int</span> <span class=n>srcBegin</span><span class=o>,</span> <span class=kt>int</span> <span class=n>srcEnd</span><span class=o>,</span> <span class=kt>char</span> <span class=n>dst</span><span class=o>[],</span> <span class=kt>int</span> <span class=n>dstBegin</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=o>(</span><span class=n>srcBegin</span> <span class=o>&lt;</span> <span class=mi>0</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=k>throw</span> <span class=k>new</span> <span class=n>StringIndexOutOfBoundsException</span><span class=o>(</span><span class=n>srcBegin</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=o>(</span><span class=n>srcEnd</span> <span class=o>&gt;</span> <span class=n>value</span><span class=o>.</span><span class=na>length</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=k>throw</span> <span class=k>new</span> <span class=n>StringIndexOutOfBoundsException</span><span class=o>(</span><span class=n>srcEnd</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=o>(</span><span class=n>srcBegin</span> <span class=o>&gt;</span> <span class=n>srcEnd</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=k>throw</span> <span class=k>new</span> <span class=n>StringIndexOutOfBoundsException</span><span class=o>(</span><span class=n>srcEnd</span> <span class=o>-</span> <span class=n>srcBegin</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>  <span class=c1>//System.arraycopy(Object src,  int  srcPos,Object dest, int destPos,int length)
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=c1>//src：要拷贝的源数组
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=c1>//srcPos：源数组拷贝的起始位置
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=c1>//dest：目标数组
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=c1>//destPost：拷贝到目标数组的起始位置
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=c1>//length：要拷贝元素的个数
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=n>System</span><span class=o>.</span><span class=na>arraycopy</span><span class=o>(</span><span class=n>value</span><span class=o>,</span> <span class=n>srcBegin</span><span class=o>,</span> <span class=n>dst</span><span class=o>,</span> <span class=n>dstBegin</span><span class=o>,</span> <span class=n>srcEnd</span> <span class=o>-</span> <span class=n>srcBegin</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span></code></pre></div><h4 id=byte-getbytesstring-charsetname根据字符集获取字符串的编码后的字节数组>byte[] getBytes(String charsetName)根据字符集获取字符串的编码后的字节数组<a hidden class=anchor aria-hidden=true href=#byte-getbytesstring-charsetname根据字符集获取字符串的编码后的字节数组>#</a></h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span> <span class=kt>byte</span><span class=o>[]</span> <span class=nf>getBytes</span><span class=o>(</span><span class=n>String</span> <span class=n>charsetName</span><span class=o>)</span>
</span></span><span class=line><span class=cl>            <span class=kd>throws</span> <span class=n>UnsupportedEncodingException</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=o>(</span><span class=n>charsetName</span> <span class=o>==</span> <span class=kc>null</span><span class=o>)</span> <span class=k>throw</span> <span class=k>new</span> <span class=n>NullPointerException</span><span class=o>();</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>StringCoding</span><span class=o>.</span><span class=na>encode</span><span class=o>(</span><span class=n>charsetName</span><span class=o>,</span> <span class=n>value</span><span class=o>,</span> <span class=mi>0</span><span class=o>,</span> <span class=n>value</span><span class=o>.</span><span class=na>length</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span></code></pre></div><h4 id=boolean-equalsobject-anobject方法比较两个字符串重写的object方法>boolean equals(Object anObject)方法比较两个字符串，重写的Object方法<a hidden class=anchor aria-hidden=true href=#boolean-equalsobject-anobject方法比较两个字符串重写的object方法>#</a></h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span> <span class=kt>boolean</span> <span class=nf>equals</span><span class=o>(</span><span class=n>Object</span> <span class=n>anObject</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=o>(</span><span class=k>this</span> <span class=o>==</span> <span class=n>anObject</span><span class=o>)</span> <span class=o>{</span><span class=c1>//地址相等两对象equals为true
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=k>return</span> <span class=kc>true</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=o>(</span><span class=n>anObject</span> <span class=k>instanceof</span> <span class=n>String</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=n>String</span> <span class=n>anotherString</span> <span class=o>=</span> <span class=o>(</span><span class=n>String</span><span class=o>)</span><span class=n>anObject</span><span class=o>;</span>
</span></span><span class=line><span class=cl>            <span class=kt>int</span> <span class=n>n</span> <span class=o>=</span> <span class=n>value</span><span class=o>.</span><span class=na>length</span><span class=o>;</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=o>(</span><span class=n>n</span> <span class=o>==</span> <span class=n>anotherString</span><span class=o>.</span><span class=na>value</span><span class=o>.</span><span class=na>length</span><span class=o>)</span> <span class=o>{</span><span class=c1>//判断两字符串的字符个数
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=kt>char</span> <span class=n>v1</span><span class=o>[]</span> <span class=o>=</span> <span class=n>value</span><span class=o>;</span>
</span></span><span class=line><span class=cl>                <span class=kt>char</span> <span class=n>v2</span><span class=o>[]</span> <span class=o>=</span> <span class=n>anotherString</span><span class=o>.</span><span class=na>value</span><span class=o>;</span>
</span></span><span class=line><span class=cl>                <span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=o>;</span>
</span></span><span class=line><span class=cl>                <span class=k>while</span> <span class=o>(</span><span class=n>n</span><span class=o>--</span> <span class=o>!=</span> <span class=mi>0</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                    <span class=k>if</span> <span class=o>(</span><span class=n>v1</span><span class=o>[</span><span class=n>i</span><span class=o>]</span> <span class=o>!=</span> <span class=n>v2</span><span class=o>[</span><span class=n>i</span><span class=o>])</span><span class=c1>//有一个字符不相等最直接为false
</span></span></span><span class=line><span class=cl><span class=c1></span>                        <span class=k>return</span> <span class=kc>false</span><span class=o>;</span>
</span></span><span class=line><span class=cl>                    <span class=n>i</span><span class=o>++;</span>
</span></span><span class=line><span class=cl>                <span class=o>}</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=kc>true</span><span class=o>;</span>
</span></span><span class=line><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=kc>false</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span></code></pre></div><h4 id=contentequalscharsequence-cs判断当前string与其他字符序列是否相等与equals不同的是equals只有当两个对象都是string时equals才为truecontentequals可以用来同其他stringbufferstringbuilder和其他字符序列进行比较>contentEquals(CharSequence cs)判断当前String与其他字符序列是否相等，与equals不同的是，equals只有当两个对象都是String时equals才为true，contentEquals可以用来同其他StringBuffer、StringBuilder和其他字符序列进行比较<a hidden class=anchor aria-hidden=true href=#contentequalscharsequence-cs判断当前string与其他字符序列是否相等与equals不同的是equals只有当两个对象都是string时equals才为truecontentequals可以用来同其他stringbufferstringbuilder和其他字符序列进行比较>#</a></h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span> <span class=kt>boolean</span> <span class=nf>contentEquals</span><span class=o>(</span><span class=n>CharSequence</span> <span class=n>cs</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// Argument is a StringBuffer, StringBuilder
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>if</span> <span class=o>(</span><span class=n>cs</span> <span class=k>instanceof</span> <span class=n>AbstractStringBuilder</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=o>(</span><span class=n>cs</span> <span class=k>instanceof</span> <span class=n>StringBuffer</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                <span class=kd>synchronized</span><span class=o>(</span><span class=n>cs</span><span class=o>)</span> <span class=o>{</span><span class=c1>//如果是StringBuffer那么进行上锁操作
</span></span></span><span class=line><span class=cl><span class=c1></span>                   <span class=k>return</span> <span class=n>nonSyncContentEquals</span><span class=o>((</span><span class=n>AbstractStringBuilder</span><span class=o>)</span><span class=n>cs</span><span class=o>);</span>
</span></span><span class=line><span class=cl>                <span class=o>}</span>
</span></span><span class=line><span class=cl>            <span class=o>}</span> <span class=k>else</span> <span class=o>{</span><span class=c1>//StringBuilder不上锁
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=k>return</span> <span class=n>nonSyncContentEquals</span><span class=o>((</span><span class=n>AbstractStringBuilder</span><span class=o>)</span><span class=n>cs</span><span class=o>);</span>
</span></span><span class=line><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=c1>// Argument is a String
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>if</span> <span class=o>(</span><span class=n>cs</span> <span class=k>instanceof</span> <span class=n>String</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=n>equals</span><span class=o>(</span><span class=n>cs</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=c1>// Argument is a generic CharSequence
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=kt>char</span> <span class=n>v1</span><span class=o>[]</span> <span class=o>=</span> <span class=n>value</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=kt>int</span> <span class=n>n</span> <span class=o>=</span> <span class=n>v1</span><span class=o>.</span><span class=na>length</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=o>(</span><span class=n>n</span> <span class=o>!=</span> <span class=n>cs</span><span class=o>.</span><span class=na>length</span><span class=o>())</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=kc>false</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=o>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=o>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>n</span><span class=o>;</span> <span class=n>i</span><span class=o>++)</span> <span class=o>{</span><span class=c1>//其他字符序列，一个一个字符进行比较
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=k>if</span> <span class=o>(</span><span class=n>v1</span><span class=o>[</span><span class=n>i</span><span class=o>]</span> <span class=o>!=</span> <span class=n>cs</span><span class=o>.</span><span class=na>charAt</span><span class=o>(</span><span class=n>i</span><span class=o>))</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=kc>false</span><span class=o>;</span>
</span></span><span class=line><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=kc>true</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span></code></pre></div><h4 id=equalsignorecasestring-anotherstring两个字符串忽略大小写进行比较是否相等>equalsIgnoreCase(String anotherString)两个字符串忽略大小写进行比较是否相等<a hidden class=anchor aria-hidden=true href=#equalsignorecasestring-anotherstring两个字符串忽略大小写进行比较是否相等>#</a></h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span> <span class=kt>boolean</span> <span class=nf>equalsIgnoreCase</span><span class=o>(</span><span class=n>String</span> <span class=n>anotherString</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=o>(</span><span class=k>this</span> <span class=o>==</span> <span class=n>anotherString</span><span class=o>)</span> <span class=o>?</span> <span class=kc>true</span>
</span></span><span class=line><span class=cl>                <span class=o>:</span> <span class=o>(</span><span class=n>anotherString</span> <span class=o>!=</span> <span class=kc>null</span><span class=o>)</span><span class=c1>//不为空
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=o>&amp;&amp;</span> <span class=o>(</span><span class=n>anotherString</span><span class=o>.</span><span class=na>value</span><span class=o>.</span><span class=na>length</span> <span class=o>==</span> <span class=n>value</span><span class=o>.</span><span class=na>length</span><span class=o>)</span><span class=c1>//字符个数相等
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=o>&amp;&amp;</span> <span class=n>regionMatches</span><span class=o>(</span><span class=kc>true</span><span class=o>,</span> <span class=mi>0</span><span class=o>,</span> <span class=n>anotherString</span><span class=o>,</span> <span class=mi>0</span><span class=o>,</span> <span class=n>value</span><span class=o>.</span><span class=na>length</span><span class=o>);</span><span class=c1>//忽略大小写比较
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kt>boolean</span> <span class=nf>regionMatches</span><span class=o>(</span><span class=kt>boolean</span> <span class=n>ignoreCase</span><span class=o>,</span> <span class=kt>int</span> <span class=n>toffset</span><span class=o>,</span>
</span></span><span class=line><span class=cl>            <span class=n>String</span> <span class=n>other</span><span class=o>,</span> <span class=kt>int</span> <span class=n>ooffset</span><span class=o>,</span> <span class=kt>int</span> <span class=n>len</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=kt>char</span> <span class=n>ta</span><span class=o>[]</span> <span class=o>=</span> <span class=n>value</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=kt>int</span> <span class=n>to</span> <span class=o>=</span> <span class=n>toffset</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=kt>char</span> <span class=n>pa</span><span class=o>[]</span> <span class=o>=</span> <span class=n>other</span><span class=o>.</span><span class=na>value</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=kt>int</span> <span class=n>po</span> <span class=o>=</span> <span class=n>ooffset</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=c1>// Note: toffset, ooffset, or len might be near -1&gt;&gt;&gt;1.
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>if</span> <span class=o>((</span><span class=n>ooffset</span> <span class=o>&lt;</span> <span class=mi>0</span><span class=o>)</span> <span class=o>||</span> <span class=o>(</span><span class=n>toffset</span> <span class=o>&lt;</span> <span class=mi>0</span><span class=o>)</span>
</span></span><span class=line><span class=cl>                <span class=o>||</span> <span class=o>(</span><span class=n>toffset</span> <span class=o>&gt;</span> <span class=o>(</span><span class=kt>long</span><span class=o>)</span><span class=n>value</span><span class=o>.</span><span class=na>length</span> <span class=o>-</span> <span class=n>len</span><span class=o>)</span>
</span></span><span class=line><span class=cl>                <span class=o>||</span> <span class=o>(</span><span class=n>ooffset</span> <span class=o>&gt;</span> <span class=o>(</span><span class=kt>long</span><span class=o>)</span><span class=n>other</span><span class=o>.</span><span class=na>value</span><span class=o>.</span><span class=na>length</span> <span class=o>-</span> <span class=n>len</span><span class=o>))</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=kc>false</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=k>while</span> <span class=o>(</span><span class=n>len</span><span class=o>--</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=kt>char</span> <span class=n>c1</span> <span class=o>=</span> <span class=n>ta</span><span class=o>[</span><span class=n>to</span><span class=o>++];</span>
</span></span><span class=line><span class=cl>            <span class=kt>char</span> <span class=n>c2</span> <span class=o>=</span> <span class=n>pa</span><span class=o>[</span><span class=n>po</span><span class=o>++];</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=o>(</span><span class=n>c1</span> <span class=o>==</span> <span class=n>c2</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                <span class=k>continue</span><span class=o>;</span>
</span></span><span class=line><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=o>(</span><span class=n>ignoreCase</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                <span class=c1>// If characters don&#39;t match but case may be ignored,
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=c1>// try converting both characters to uppercase.
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=c1>// If the results match, then the comparison scan should
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=c1>// continue.
</span></span></span><span class=line><span class=cl><span class=c1></span>              <span class=c1>//把两个字符转换成大写的
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=kt>char</span> <span class=n>u1</span> <span class=o>=</span> <span class=n>Character</span><span class=o>.</span><span class=na>toUpperCase</span><span class=o>(</span><span class=n>c1</span><span class=o>);</span>
</span></span><span class=line><span class=cl>                <span class=kt>char</span> <span class=n>u2</span> <span class=o>=</span> <span class=n>Character</span><span class=o>.</span><span class=na>toUpperCase</span><span class=o>(</span><span class=n>c2</span><span class=o>);</span>
</span></span><span class=line><span class=cl>                <span class=k>if</span> <span class=o>(</span><span class=n>u1</span> <span class=o>==</span> <span class=n>u2</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                    <span class=k>continue</span><span class=o>;</span>
</span></span><span class=line><span class=cl>                <span class=o>}</span>
</span></span><span class=line><span class=cl>                <span class=c1>// Unfortunately, conversion to uppercase does not work properly
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=c1>// for the Georgian alphabet, which has strange rules about case
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=c1>// conversion.  So we need to make one last check before
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=c1>// exiting.
</span></span></span><span class=line><span class=cl><span class=c1></span>              <span class=c1>//转换成大写的不相等，在转换成小写的判断
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=k>if</span> <span class=o>(</span><span class=n>Character</span><span class=o>.</span><span class=na>toLowerCase</span><span class=o>(</span><span class=n>u1</span><span class=o>)</span> <span class=o>==</span> <span class=n>Character</span><span class=o>.</span><span class=na>toLowerCase</span><span class=o>(</span><span class=n>u2</span><span class=o>))</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                    <span class=k>continue</span><span class=o>;</span>
</span></span><span class=line><span class=cl>                <span class=o>}</span>
</span></span><span class=line><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=kc>false</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=kc>true</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span></code></pre></div><h4 id=int-comparetostring-anotherstring进行字符串的比较>int compareTo(String anotherString)进行字符串的比较<a hidden class=anchor aria-hidden=true href=#int-comparetostring-anotherstring进行字符串的比较>#</a></h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span> <span class=kt>int</span> <span class=nf>compareTo</span><span class=o>(</span><span class=n>String</span> <span class=n>anotherString</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=kt>int</span> <span class=n>len1</span> <span class=o>=</span> <span class=n>value</span><span class=o>.</span><span class=na>length</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=kt>int</span> <span class=n>len2</span> <span class=o>=</span> <span class=n>anotherString</span><span class=o>.</span><span class=na>value</span><span class=o>.</span><span class=na>length</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=kt>int</span> <span class=n>lim</span> <span class=o>=</span> <span class=n>Math</span><span class=o>.</span><span class=na>min</span><span class=o>(</span><span class=n>len1</span><span class=o>,</span> <span class=n>len2</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=kt>char</span> <span class=n>v1</span><span class=o>[]</span> <span class=o>=</span> <span class=n>value</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=kt>char</span> <span class=n>v2</span><span class=o>[]</span> <span class=o>=</span> <span class=n>anotherString</span><span class=o>.</span><span class=na>value</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=kt>int</span> <span class=n>k</span> <span class=o>=</span> <span class=mi>0</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=k>while</span> <span class=o>(</span><span class=n>k</span> <span class=o>&lt;</span> <span class=n>lim</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=kt>char</span> <span class=n>c1</span> <span class=o>=</span> <span class=n>v1</span><span class=o>[</span><span class=n>k</span><span class=o>];</span>
</span></span><span class=line><span class=cl>            <span class=kt>char</span> <span class=n>c2</span> <span class=o>=</span> <span class=n>v2</span><span class=o>[</span><span class=n>k</span><span class=o>];</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=o>(</span><span class=n>c1</span> <span class=o>!=</span> <span class=n>c2</span><span class=o>)</span> <span class=o>{</span><span class=c1>//如果当前字符串的字符比参数的大返回正数，否则返回负数
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=k>return</span> <span class=n>c1</span> <span class=o>-</span> <span class=n>c2</span><span class=o>;</span>
</span></span><span class=line><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=cl>            <span class=n>k</span><span class=o>++;</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>  <span class=c1>//如果两个字符串，长度小的字符串与长度大的前部分每个字符都相等，如果两字符串长度相等返回0，当前字符串长度大于参数字符串返回整数，当前字符串长度小于参数字符串返回负数
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>return</span> <span class=n>len1</span> <span class=o>-</span> <span class=n>len2</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span></code></pre></div><h4 id=comparetoignorecasestring-str字符串忽略大小写进行比较>compareToIgnoreCase(String str)字符串忽略大小写进行比较<a hidden class=anchor aria-hidden=true href=#comparetoignorecasestring-str字符串忽略大小写进行比较>#</a></h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span> <span class=kt>int</span> <span class=nf>compareToIgnoreCase</span><span class=o>(</span><span class=n>String</span> <span class=n>str</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>CASE_INSENSITIVE_ORDER</span><span class=o>.</span><span class=na>compare</span><span class=o>(</span><span class=k>this</span><span class=o>,</span> <span class=n>str</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kt>int</span> <span class=nf>compare</span><span class=o>(</span><span class=n>String</span> <span class=n>s1</span><span class=o>,</span> <span class=n>String</span> <span class=n>s2</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=kt>int</span> <span class=n>n1</span> <span class=o>=</span> <span class=n>s1</span><span class=o>.</span><span class=na>length</span><span class=o>();</span>
</span></span><span class=line><span class=cl>            <span class=kt>int</span> <span class=n>n2</span> <span class=o>=</span> <span class=n>s2</span><span class=o>.</span><span class=na>length</span><span class=o>();</span>
</span></span><span class=line><span class=cl>            <span class=kt>int</span> <span class=n>min</span> <span class=o>=</span> <span class=n>Math</span><span class=o>.</span><span class=na>min</span><span class=o>(</span><span class=n>n1</span><span class=o>,</span> <span class=n>n2</span><span class=o>);</span>
</span></span><span class=line><span class=cl>            <span class=k>for</span> <span class=o>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=o>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>min</span><span class=o>;</span> <span class=n>i</span><span class=o>++)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                <span class=kt>char</span> <span class=n>c1</span> <span class=o>=</span> <span class=n>s1</span><span class=o>.</span><span class=na>charAt</span><span class=o>(</span><span class=n>i</span><span class=o>);</span>
</span></span><span class=line><span class=cl>                <span class=kt>char</span> <span class=n>c2</span> <span class=o>=</span> <span class=n>s2</span><span class=o>.</span><span class=na>charAt</span><span class=o>(</span><span class=n>i</span><span class=o>);</span>
</span></span><span class=line><span class=cl>                <span class=k>if</span> <span class=o>(</span><span class=n>c1</span> <span class=o>!=</span> <span class=n>c2</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                    <span class=n>c1</span> <span class=o>=</span> <span class=n>Character</span><span class=o>.</span><span class=na>toUpperCase</span><span class=o>(</span><span class=n>c1</span><span class=o>);</span>
</span></span><span class=line><span class=cl>                    <span class=n>c2</span> <span class=o>=</span> <span class=n>Character</span><span class=o>.</span><span class=na>toUpperCase</span><span class=o>(</span><span class=n>c2</span><span class=o>);</span>
</span></span><span class=line><span class=cl>                    <span class=k>if</span> <span class=o>(</span><span class=n>c1</span> <span class=o>!=</span> <span class=n>c2</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                        <span class=n>c1</span> <span class=o>=</span> <span class=n>Character</span><span class=o>.</span><span class=na>toLowerCase</span><span class=o>(</span><span class=n>c1</span><span class=o>);</span>
</span></span><span class=line><span class=cl>                        <span class=n>c2</span> <span class=o>=</span> <span class=n>Character</span><span class=o>.</span><span class=na>toLowerCase</span><span class=o>(</span><span class=n>c2</span><span class=o>);</span>
</span></span><span class=line><span class=cl>                        <span class=k>if</span> <span class=o>(</span><span class=n>c1</span> <span class=o>!=</span> <span class=n>c2</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                            <span class=c1>//如果两字符不相等，最后是转换成小写的进行比较
</span></span></span><span class=line><span class=cl><span class=c1></span>                            <span class=k>return</span> <span class=n>c1</span> <span class=o>-</span> <span class=n>c2</span><span class=o>;</span>
</span></span><span class=line><span class=cl>                        <span class=o>}</span>
</span></span><span class=line><span class=cl>                    <span class=o>}</span>
</span></span><span class=line><span class=cl>                <span class=o>}</span>
</span></span><span class=line><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=n>n1</span> <span class=o>-</span> <span class=n>n2</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span></code></pre></div><h4 id=startswithstring-prefix判断字符串是否以指定字符串开头>startsWith(String prefix)判断字符串是否以指定字符串开头<a hidden class=anchor aria-hidden=true href=#startswithstring-prefix判断字符串是否以指定字符串开头>#</a></h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span> <span class=kt>boolean</span> <span class=nf>startsWith</span><span class=o>(</span><span class=n>String</span> <span class=n>prefix</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>startsWith</span><span class=o>(</span><span class=n>prefix</span><span class=o>,</span> <span class=mi>0</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kt>boolean</span> <span class=nf>startsWith</span><span class=o>(</span><span class=n>String</span> <span class=n>prefix</span><span class=o>,</span> <span class=kt>int</span> <span class=n>toffset</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=kt>char</span> <span class=n>ta</span><span class=o>[]</span> <span class=o>=</span> <span class=n>value</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=kt>int</span> <span class=n>to</span> <span class=o>=</span> <span class=n>toffset</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=kt>char</span> <span class=n>pa</span><span class=o>[]</span> <span class=o>=</span> <span class=n>prefix</span><span class=o>.</span><span class=na>value</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=kt>int</span> <span class=n>po</span> <span class=o>=</span> <span class=mi>0</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=kt>int</span> <span class=n>pc</span> <span class=o>=</span> <span class=n>prefix</span><span class=o>.</span><span class=na>value</span><span class=o>.</span><span class=na>length</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=c1>// Note: toffset might be near -1&gt;&gt;&gt;1.
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>if</span> <span class=o>((</span><span class=n>toffset</span> <span class=o>&lt;</span> <span class=mi>0</span><span class=o>)</span> <span class=o>||</span> <span class=o>(</span><span class=n>toffset</span> <span class=o>&gt;</span> <span class=n>value</span><span class=o>.</span><span class=na>length</span> <span class=o>-</span> <span class=n>pc</span><span class=o>))</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=kc>false</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=k>while</span> <span class=o>(--</span><span class=n>pc</span> <span class=o>&gt;=</span> <span class=mi>0</span><span class=o>)</span> <span class=o>{</span><span class=c1>//循环给定前缀字符串长度
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=k>if</span> <span class=o>(</span><span class=n>ta</span><span class=o>[</span><span class=n>to</span><span class=o>++]</span> <span class=o>!=</span> <span class=n>pa</span><span class=o>[</span><span class=n>po</span><span class=o>++])</span> <span class=o>{</span><span class=c1>//前缀字符串字符和当前字符串字符比较
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=k>return</span> <span class=kc>false</span><span class=o>;</span>
</span></span><span class=line><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=kc>true</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span></code></pre></div><h4 id=boolean-endswithstring-suffix判断字符串是否以指定字符串结尾>boolean endsWith(String suffix)判断字符串是否以指定字符串结尾<a hidden class=anchor aria-hidden=true href=#boolean-endswithstring-suffix判断字符串是否以指定字符串结尾>#</a></h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span> <span class=kt>boolean</span> <span class=nf>endsWith</span><span class=o>(</span><span class=n>String</span> <span class=n>suffix</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>startsWith</span><span class=o>(</span><span class=n>suffix</span><span class=o>,</span> <span class=n>value</span><span class=o>.</span><span class=na>length</span> <span class=o>-</span> <span class=n>suffix</span><span class=o>.</span><span class=na>value</span><span class=o>.</span><span class=na>length</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span></code></pre></div><h4 id=int-hashcode获取字符串的hashcode>int hashCode()获取字符串的hashCode<a hidden class=anchor aria-hidden=true href=#int-hashcode获取字符串的hashcode>#</a></h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span> <span class=kt>int</span> <span class=nf>hashCode</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=c1>//默认字符串hash为0，如果是用另一个字符串就等于另一个字符串的hash
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=kt>int</span> <span class=n>h</span> <span class=o>=</span> <span class=n>hash</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=o>(</span><span class=n>h</span> <span class=o>==</span> <span class=mi>0</span> <span class=o>&amp;&amp;</span> <span class=n>value</span><span class=o>.</span><span class=na>length</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=kt>char</span> <span class=n>val</span><span class=o>[]</span> <span class=o>=</span> <span class=n>value</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=k>for</span> <span class=o>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=o>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>value</span><span class=o>.</span><span class=na>length</span><span class=o>;</span> <span class=n>i</span><span class=o>++)</span> <span class=o>{</span><span class=c1>//一个一个字符的变量
</span></span></span><span class=line><span class=cl><span class=c1></span>              <span class=c1>//前面字符的hash*31+当前字符的ascii码
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=n>h</span> <span class=o>=</span> <span class=mi>31</span> <span class=o>*</span> <span class=n>h</span> <span class=o>+</span> <span class=n>val</span><span class=o>[</span><span class=n>i</span><span class=o>];</span>
</span></span><span class=line><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=cl>            <span class=n>hash</span> <span class=o>=</span> <span class=n>h</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>h</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span></code></pre></div><h4 id=int-indexofint-ch根据unicode编码获取下标>int indexOf(int ch)根据unicode编码获取下标<a hidden class=anchor aria-hidden=true href=#int-indexofint-ch根据unicode编码获取下标>#</a></h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span> <span class=kt>int</span> <span class=nf>indexOf</span><span class=o>(</span><span class=kt>int</span> <span class=n>ch</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>indexOf</span><span class=o>(</span><span class=n>ch</span><span class=o>,</span> <span class=mi>0</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kt>int</span> <span class=nf>indexOf</span><span class=o>(</span><span class=kt>int</span> <span class=n>ch</span><span class=o>,</span> <span class=kt>int</span> <span class=n>fromIndex</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=kd>final</span> <span class=kt>int</span> <span class=n>max</span> <span class=o>=</span> <span class=n>value</span><span class=o>.</span><span class=na>length</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=o>(</span><span class=n>fromIndex</span> <span class=o>&lt;</span> <span class=mi>0</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=n>fromIndex</span> <span class=o>=</span> <span class=mi>0</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span> <span class=k>else</span> <span class=k>if</span> <span class=o>(</span><span class=n>fromIndex</span> <span class=o>&gt;=</span> <span class=n>max</span><span class=o>)</span> <span class=o>{</span><span class=c1>//如果查找的起始位置超过了数组下标
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=c1>// Note: fromIndex might be near -1&gt;&gt;&gt;1.
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=k>return</span> <span class=o>-</span><span class=mi>1</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=o>(</span><span class=n>ch</span> <span class=o>&lt;</span> <span class=n>Character</span><span class=o>.</span><span class=na>MIN_SUPPLEMENTARY_CODE_POINT</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>          <span class=c1>//编码是一个基本多语言编码
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=c1>// handle most cases here (ch is a BMP code point or a
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=c1>// negative value (invalid code point))
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=kd>final</span> <span class=kt>char</span><span class=o>[]</span> <span class=n>value</span> <span class=o>=</span> <span class=k>this</span><span class=o>.</span><span class=na>value</span><span class=o>;</span>
</span></span><span class=line><span class=cl>            <span class=k>for</span> <span class=o>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=n>fromIndex</span><span class=o>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>max</span><span class=o>;</span> <span class=n>i</span><span class=o>++)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                <span class=k>if</span> <span class=o>(</span><span class=n>value</span><span class=o>[</span><span class=n>i</span><span class=o>]</span> <span class=o>==</span> <span class=n>ch</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                    <span class=k>return</span> <span class=n>i</span><span class=o>;</span>
</span></span><span class=line><span class=cl>                <span class=o>}</span>
</span></span><span class=line><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=o>-</span><span class=mi>1</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span> <span class=k>else</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>          <span class=c1>//获取需要使用两个char存储的编码的下标
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=k>return</span> <span class=n>indexOfSupplementary</span><span class=o>(</span><span class=n>ch</span><span class=o>,</span> <span class=n>fromIndex</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>private</span> <span class=kt>int</span> <span class=nf>indexOfSupplementary</span><span class=o>(</span><span class=kt>int</span> <span class=n>ch</span><span class=o>,</span> <span class=kt>int</span> <span class=n>fromIndex</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=o>(</span><span class=n>Character</span><span class=o>.</span><span class=na>isValidCodePoint</span><span class=o>(</span><span class=n>ch</span><span class=o>))</span> <span class=o>{</span><span class=c1>//是一个合法的unicode编码
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=kd>final</span> <span class=kt>char</span><span class=o>[]</span> <span class=n>value</span> <span class=o>=</span> <span class=k>this</span><span class=o>.</span><span class=na>value</span><span class=o>;</span>
</span></span><span class=line><span class=cl>            <span class=kd>final</span> <span class=kt>char</span> <span class=n>hi</span> <span class=o>=</span> <span class=n>Character</span><span class=o>.</span><span class=na>highSurrogate</span><span class=o>(</span><span class=n>ch</span><span class=o>);</span>
</span></span><span class=line><span class=cl>            <span class=kd>final</span> <span class=kt>char</span> <span class=n>lo</span> <span class=o>=</span> <span class=n>Character</span><span class=o>.</span><span class=na>lowSurrogate</span><span class=o>(</span><span class=n>ch</span><span class=o>);</span>
</span></span><span class=line><span class=cl>            <span class=kd>final</span> <span class=kt>int</span> <span class=n>max</span> <span class=o>=</span> <span class=n>value</span><span class=o>.</span><span class=na>length</span> <span class=o>-</span> <span class=mi>1</span><span class=o>;</span>
</span></span><span class=line><span class=cl>            <span class=k>for</span> <span class=o>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=n>fromIndex</span><span class=o>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>max</span><span class=o>;</span> <span class=n>i</span><span class=o>++)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                <span class=k>if</span> <span class=o>(</span><span class=n>value</span><span class=o>[</span><span class=n>i</span><span class=o>]</span> <span class=o>==</span> <span class=n>hi</span> <span class=o>&amp;&amp;</span> <span class=n>value</span><span class=o>[</span><span class=n>i</span> <span class=o>+</span> <span class=mi>1</span><span class=o>]</span> <span class=o>==</span> <span class=n>lo</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                    <span class=k>return</span> <span class=n>i</span><span class=o>;</span>
</span></span><span class=line><span class=cl>                <span class=o>}</span>
</span></span><span class=line><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=o>-</span><span class=mi>1</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span></code></pre></div><h4 id=int-lastindexofint-ch获取指定编码从后往前搜索的第一个下标>int lastIndexOf(int ch)获取指定编码从后往前搜索的第一个下标<a hidden class=anchor aria-hidden=true href=#int-lastindexofint-ch获取指定编码从后往前搜索的第一个下标>#</a></h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span> <span class=kt>int</span> <span class=nf>lastIndexOf</span><span class=o>(</span><span class=kt>int</span> <span class=n>ch</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>lastIndexOf</span><span class=o>(</span><span class=n>ch</span><span class=o>,</span> <span class=n>value</span><span class=o>.</span><span class=na>length</span> <span class=o>-</span> <span class=mi>1</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kt>int</span> <span class=nf>lastIndexOf</span><span class=o>(</span><span class=kt>int</span> <span class=n>ch</span><span class=o>,</span> <span class=kt>int</span> <span class=n>fromIndex</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=o>(</span><span class=n>ch</span> <span class=o>&lt;</span> <span class=n>Character</span><span class=o>.</span><span class=na>MIN_SUPPLEMENTARY_CODE_POINT</span><span class=o>)</span> <span class=o>{</span><span class=c1>//编码是一个基本多语言unicode编码，使用一个char存储
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=c1>// handle most cases here (ch is a BMP code point or a
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=c1>// negative value (invalid code point))
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=kd>final</span> <span class=kt>char</span><span class=o>[]</span> <span class=n>value</span> <span class=o>=</span> <span class=k>this</span><span class=o>.</span><span class=na>value</span><span class=o>;</span>
</span></span><span class=line><span class=cl>            <span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=n>Math</span><span class=o>.</span><span class=na>min</span><span class=o>(</span><span class=n>fromIndex</span><span class=o>,</span> <span class=n>value</span><span class=o>.</span><span class=na>length</span> <span class=o>-</span> <span class=mi>1</span><span class=o>);</span>
</span></span><span class=line><span class=cl>            <span class=k>for</span> <span class=o>(;</span> <span class=n>i</span> <span class=o>&gt;=</span> <span class=mi>0</span><span class=o>;</span> <span class=n>i</span><span class=o>--)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                <span class=k>if</span> <span class=o>(</span><span class=n>value</span><span class=o>[</span><span class=n>i</span><span class=o>]</span> <span class=o>==</span> <span class=n>ch</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                    <span class=k>return</span> <span class=n>i</span><span class=o>;</span>
</span></span><span class=line><span class=cl>                <span class=o>}</span>
</span></span><span class=line><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=o>-</span><span class=mi>1</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span> <span class=k>else</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>          <span class=c1>//编码使用两个char存储
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=k>return</span> <span class=n>lastIndexOfSupplementary</span><span class=o>(</span><span class=n>ch</span><span class=o>,</span> <span class=n>fromIndex</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>private</span> <span class=kt>int</span> <span class=nf>lastIndexOfSupplementary</span><span class=o>(</span><span class=kt>int</span> <span class=n>ch</span><span class=o>,</span> <span class=kt>int</span> <span class=n>fromIndex</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=o>(</span><span class=n>Character</span><span class=o>.</span><span class=na>isValidCodePoint</span><span class=o>(</span><span class=n>ch</span><span class=o>))</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=kd>final</span> <span class=kt>char</span><span class=o>[]</span> <span class=n>value</span> <span class=o>=</span> <span class=k>this</span><span class=o>.</span><span class=na>value</span><span class=o>;</span>
</span></span><span class=line><span class=cl>            <span class=kt>char</span> <span class=n>hi</span> <span class=o>=</span> <span class=n>Character</span><span class=o>.</span><span class=na>highSurrogate</span><span class=o>(</span><span class=n>ch</span><span class=o>);</span>
</span></span><span class=line><span class=cl>            <span class=kt>char</span> <span class=n>lo</span> <span class=o>=</span> <span class=n>Character</span><span class=o>.</span><span class=na>lowSurrogate</span><span class=o>(</span><span class=n>ch</span><span class=o>);</span>
</span></span><span class=line><span class=cl>            <span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=n>Math</span><span class=o>.</span><span class=na>min</span><span class=o>(</span><span class=n>fromIndex</span><span class=o>,</span> <span class=n>value</span><span class=o>.</span><span class=na>length</span> <span class=o>-</span> <span class=mi>2</span><span class=o>);</span>
</span></span><span class=line><span class=cl>            <span class=k>for</span> <span class=o>(;</span> <span class=n>i</span> <span class=o>&gt;=</span> <span class=mi>0</span><span class=o>;</span> <span class=n>i</span><span class=o>--)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                <span class=k>if</span> <span class=o>(</span><span class=n>value</span><span class=o>[</span><span class=n>i</span><span class=o>]</span> <span class=o>==</span> <span class=n>hi</span> <span class=o>&amp;&amp;</span> <span class=n>value</span><span class=o>[</span><span class=n>i</span> <span class=o>+</span> <span class=mi>1</span><span class=o>]</span> <span class=o>==</span> <span class=n>lo</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                    <span class=k>return</span> <span class=n>i</span><span class=o>;</span>
</span></span><span class=line><span class=cl>                <span class=o>}</span>
</span></span><span class=line><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=o>-</span><span class=mi>1</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span></code></pre></div><h4 id=int-indexofstring-str获取指定字符串的的第一个字符在当前字符串的下标>int indexOf(String str)获取指定字符串的的第一个字符在当前字符串的下标<a hidden class=anchor aria-hidden=true href=#int-indexofstring-str获取指定字符串的的第一个字符在当前字符串的下标>#</a></h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span> <span class=kt>int</span> <span class=nf>indexOf</span><span class=o>(</span><span class=n>String</span> <span class=n>str</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>indexOf</span><span class=o>(</span><span class=n>str</span><span class=o>,</span> <span class=mi>0</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kt>int</span> <span class=nf>indexOf</span><span class=o>(</span><span class=n>String</span> <span class=n>str</span><span class=o>,</span> <span class=kt>int</span> <span class=n>fromIndex</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>indexOf</span><span class=o>(</span><span class=n>value</span><span class=o>,</span> <span class=mi>0</span><span class=o>,</span> <span class=n>value</span><span class=o>.</span><span class=na>length</span><span class=o>,</span>
</span></span><span class=line><span class=cl>                <span class=n>str</span><span class=o>.</span><span class=na>value</span><span class=o>,</span> <span class=mi>0</span><span class=o>,</span> <span class=n>str</span><span class=o>.</span><span class=na>value</span><span class=o>.</span><span class=na>length</span><span class=o>,</span> <span class=n>fromIndex</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>static</span> <span class=kt>int</span> <span class=nf>indexOf</span><span class=o>(</span><span class=kt>char</span><span class=o>[]</span> <span class=n>source</span><span class=o>,</span> <span class=kt>int</span> <span class=n>sourceOffset</span><span class=o>,</span> <span class=kt>int</span> <span class=n>sourceCount</span><span class=o>,</span>
</span></span><span class=line><span class=cl>            <span class=kt>char</span><span class=o>[]</span> <span class=n>target</span><span class=o>,</span> <span class=kt>int</span> <span class=n>targetOffset</span><span class=o>,</span> <span class=kt>int</span> <span class=n>targetCount</span><span class=o>,</span>
</span></span><span class=line><span class=cl>            <span class=kt>int</span> <span class=n>fromIndex</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=o>(</span><span class=n>fromIndex</span> <span class=o>&gt;=</span> <span class=n>sourceCount</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=o>(</span><span class=n>targetCount</span> <span class=o>==</span> <span class=mi>0</span> <span class=o>?</span> <span class=n>sourceCount</span> <span class=o>:</span> <span class=o>-</span><span class=mi>1</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=o>(</span><span class=n>fromIndex</span> <span class=o>&lt;</span> <span class=mi>0</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=n>fromIndex</span> <span class=o>=</span> <span class=mi>0</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=o>(</span><span class=n>targetCount</span> <span class=o>==</span> <span class=mi>0</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=n>fromIndex</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=kt>char</span> <span class=n>first</span> <span class=o>=</span> <span class=n>target</span><span class=o>[</span><span class=n>targetOffset</span><span class=o>];</span>
</span></span><span class=line><span class=cl>        <span class=kt>int</span> <span class=n>max</span> <span class=o>=</span> <span class=n>sourceOffset</span> <span class=o>+</span> <span class=o>(</span><span class=n>sourceCount</span> <span class=o>-</span> <span class=n>targetCount</span><span class=o>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=o>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=n>sourceOffset</span> <span class=o>+</span> <span class=n>fromIndex</span><span class=o>;</span> <span class=n>i</span> <span class=o>&lt;=</span> <span class=n>max</span><span class=o>;</span> <span class=n>i</span><span class=o>++)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=cm>/* Look for first character. */</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=o>(</span><span class=n>source</span><span class=o>[</span><span class=n>i</span><span class=o>]</span> <span class=o>!=</span> <span class=n>first</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                <span class=k>while</span> <span class=o>(++</span><span class=n>i</span> <span class=o>&lt;=</span> <span class=n>max</span> <span class=o>&amp;&amp;</span> <span class=n>source</span><span class=o>[</span><span class=n>i</span><span class=o>]</span> <span class=o>!=</span> <span class=n>first</span><span class=o>);</span>
</span></span><span class=line><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=cm>/* Found first character, now look at the rest of v2 */</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=o>(</span><span class=n>i</span> <span class=o>&lt;=</span> <span class=n>max</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                <span class=kt>int</span> <span class=n>j</span> <span class=o>=</span> <span class=n>i</span> <span class=o>+</span> <span class=mi>1</span><span class=o>;</span>
</span></span><span class=line><span class=cl>              <span class=c1>//计算终止下标
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=kt>int</span> <span class=n>end</span> <span class=o>=</span> <span class=n>j</span> <span class=o>+</span> <span class=n>targetCount</span> <span class=o>-</span> <span class=mi>1</span><span class=o>;</span>
</span></span><span class=line><span class=cl>                <span class=k>for</span> <span class=o>(</span><span class=kt>int</span> <span class=n>k</span> <span class=o>=</span> <span class=n>targetOffset</span> <span class=o>+</span> <span class=mi>1</span><span class=o>;</span> <span class=n>j</span> <span class=o>&lt;</span> <span class=n>end</span> <span class=o>&amp;&amp;</span> <span class=n>source</span><span class=o>[</span><span class=n>j</span><span class=o>]</span>
</span></span><span class=line><span class=cl>                        <span class=o>==</span> <span class=n>target</span><span class=o>[</span><span class=n>k</span><span class=o>];</span> <span class=n>j</span><span class=o>++,</span> <span class=n>k</span><span class=o>++);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>                <span class=k>if</span> <span class=o>(</span><span class=n>j</span> <span class=o>==</span> <span class=n>end</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                    <span class=cm>/* Found whole string. */</span>
</span></span><span class=line><span class=cl>                    <span class=k>return</span> <span class=n>i</span> <span class=o>-</span> <span class=n>sourceOffset</span><span class=o>;</span>
</span></span><span class=line><span class=cl>                <span class=o>}</span>
</span></span><span class=line><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=o>-</span><span class=mi>1</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span></code></pre></div><h4 id=string-substringint-beginindex获取指定下标到最末下标的字符串>String substring(int beginIndex)获取指定下标到最末下标的字符串<a hidden class=anchor aria-hidden=true href=#string-substringint-beginindex获取指定下标到最末下标的字符串>#</a></h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span> <span class=n>String</span> <span class=nf>substring</span><span class=o>(</span><span class=kt>int</span> <span class=n>beginIndex</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=o>(</span><span class=n>beginIndex</span> <span class=o>&lt;</span> <span class=mi>0</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=k>throw</span> <span class=k>new</span> <span class=n>StringIndexOutOfBoundsException</span><span class=o>(</span><span class=n>beginIndex</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>  <span class=c1>//计算长度
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=kt>int</span> <span class=n>subLen</span> <span class=o>=</span> <span class=n>value</span><span class=o>.</span><span class=na>length</span> <span class=o>-</span> <span class=n>beginIndex</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=o>(</span><span class=n>subLen</span> <span class=o>&lt;</span> <span class=mi>0</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=k>throw</span> <span class=k>new</span> <span class=n>StringIndexOutOfBoundsException</span><span class=o>(</span><span class=n>subLen</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=o>(</span><span class=n>beginIndex</span> <span class=o>==</span> <span class=mi>0</span><span class=o>)</span> <span class=o>?</span> <span class=k>this</span> <span class=o>:</span> <span class=k>new</span> <span class=n>String</span><span class=o>(</span><span class=n>value</span><span class=o>,</span> <span class=n>beginIndex</span><span class=o>,</span> <span class=n>subLen</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span></code></pre></div><h4 id=string-substringint-beginindex-int-endindex根据起始下标和结束下标获取字符串包含起始下标字符不包含结束下标字符>String substring(int beginIndex, int endIndex)根据起始下标和结束下标获取字符串，包含起始下标字符，不包含结束下标字符<a hidden class=anchor aria-hidden=true href=#string-substringint-beginindex-int-endindex根据起始下标和结束下标获取字符串包含起始下标字符不包含结束下标字符>#</a></h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl> <span class=kd>public</span> <span class=n>String</span> <span class=nf>substring</span><span class=o>(</span><span class=kt>int</span> <span class=n>beginIndex</span><span class=o>,</span> <span class=kt>int</span> <span class=n>endIndex</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=o>(</span><span class=n>beginIndex</span> <span class=o>&lt;</span> <span class=mi>0</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=k>throw</span> <span class=k>new</span> <span class=n>StringIndexOutOfBoundsException</span><span class=o>(</span><span class=n>beginIndex</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=o>(</span><span class=n>endIndex</span> <span class=o>&gt;</span> <span class=n>value</span><span class=o>.</span><span class=na>length</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=k>throw</span> <span class=k>new</span> <span class=n>StringIndexOutOfBoundsException</span><span class=o>(</span><span class=n>endIndex</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>   <span class=c1>//计算字符个数
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=kt>int</span> <span class=n>subLen</span> <span class=o>=</span> <span class=n>endIndex</span> <span class=o>-</span> <span class=n>beginIndex</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=o>(</span><span class=n>subLen</span> <span class=o>&lt;</span> <span class=mi>0</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=k>throw</span> <span class=k>new</span> <span class=n>StringIndexOutOfBoundsException</span><span class=o>(</span><span class=n>subLen</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=o>((</span><span class=n>beginIndex</span> <span class=o>==</span> <span class=mi>0</span><span class=o>)</span> <span class=o>&amp;&amp;</span> <span class=o>(</span><span class=n>endIndex</span> <span class=o>==</span> <span class=n>value</span><span class=o>.</span><span class=na>length</span><span class=o>))</span> <span class=o>?</span> <span class=k>this</span>
</span></span><span class=line><span class=cl>                <span class=o>:</span> <span class=k>new</span> <span class=n>String</span><span class=o>(</span><span class=n>value</span><span class=o>,</span> <span class=n>beginIndex</span><span class=o>,</span> <span class=n>subLen</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span></code></pre></div><h4 id=string-concatstring-str把参数字符串拼接到当前字符串>String concat(String str)把参数字符串拼接到当前字符串<a hidden class=anchor aria-hidden=true href=#string-concatstring-str把参数字符串拼接到当前字符串>#</a></h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span> <span class=n>String</span> <span class=nf>concat</span><span class=o>(</span><span class=n>String</span> <span class=n>str</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=kt>int</span> <span class=n>otherLen</span> <span class=o>=</span> <span class=n>str</span><span class=o>.</span><span class=na>length</span><span class=o>();</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=o>(</span><span class=n>otherLen</span> <span class=o>==</span> <span class=mi>0</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=k>this</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>  <span class=c1>//获取拼接字符串的长度
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=kt>int</span> <span class=n>len</span> <span class=o>=</span> <span class=n>value</span><span class=o>.</span><span class=na>length</span><span class=o>;</span>
</span></span><span class=line><span class=cl>  <span class=c1>//把原字符串的字符拷贝到一个大小为原字符串大小+参数字符串大小的新数组中
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=kt>char</span> <span class=n>buf</span><span class=o>[]</span> <span class=o>=</span> <span class=n>Arrays</span><span class=o>.</span><span class=na>copyOf</span><span class=o>(</span><span class=n>value</span><span class=o>,</span> <span class=n>len</span> <span class=o>+</span> <span class=n>otherLen</span><span class=o>);</span>
</span></span><span class=line><span class=cl>  <span class=c1>//把拼接字符串的字符拷贝到数组中
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=n>str</span><span class=o>.</span><span class=na>getChars</span><span class=o>(</span><span class=n>buf</span><span class=o>,</span> <span class=n>len</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=k>new</span> <span class=n>String</span><span class=o>(</span><span class=n>buf</span><span class=o>,</span> <span class=kc>true</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span></code></pre></div><h4 id=string-replacechar-oldchar-char-newchar把指定字符替换为新字符>String replace(char oldChar, char newChar)把指定字符替换为新字符<a hidden class=anchor aria-hidden=true href=#string-replacechar-oldchar-char-newchar把指定字符替换为新字符>#</a></h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span> <span class=n>String</span> <span class=nf>replace</span><span class=o>(</span><span class=kt>char</span> <span class=n>oldChar</span><span class=o>,</span> <span class=kt>char</span> <span class=n>newChar</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=o>(</span><span class=n>oldChar</span> <span class=o>!=</span> <span class=n>newChar</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=kt>int</span> <span class=n>len</span> <span class=o>=</span> <span class=n>value</span><span class=o>.</span><span class=na>length</span><span class=o>;</span>
</span></span><span class=line><span class=cl>            <span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=o>-</span><span class=mi>1</span><span class=o>;</span>
</span></span><span class=line><span class=cl>            <span class=kt>char</span><span class=o>[]</span> <span class=n>val</span> <span class=o>=</span> <span class=n>value</span><span class=o>;</span> <span class=cm>/* avoid getfield opcode */</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=k>while</span> <span class=o>(++</span><span class=n>i</span> <span class=o>&lt;</span> <span class=n>len</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                <span class=k>if</span> <span class=o>(</span><span class=n>val</span><span class=o>[</span><span class=n>i</span><span class=o>]</span> <span class=o>==</span> <span class=n>oldChar</span><span class=o>)</span> <span class=o>{</span><span class=c1>//找到需要替换字符的位置
</span></span></span><span class=line><span class=cl><span class=c1></span>                    <span class=k>break</span><span class=o>;</span>
</span></span><span class=line><span class=cl>                <span class=o>}</span>
</span></span><span class=line><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=o>(</span><span class=n>i</span> <span class=o>&lt;</span> <span class=n>len</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                <span class=kt>char</span> <span class=n>buf</span><span class=o>[]</span> <span class=o>=</span> <span class=k>new</span> <span class=kt>char</span><span class=o>[</span><span class=n>len</span><span class=o>];</span>
</span></span><span class=line><span class=cl>                <span class=k>for</span> <span class=o>(</span><span class=kt>int</span> <span class=n>j</span> <span class=o>=</span> <span class=mi>0</span><span class=o>;</span> <span class=n>j</span> <span class=o>&lt;</span> <span class=n>i</span><span class=o>;</span> <span class=n>j</span><span class=o>++)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                    <span class=n>buf</span><span class=o>[</span><span class=n>j</span><span class=o>]</span> <span class=o>=</span> <span class=n>val</span><span class=o>[</span><span class=n>j</span><span class=o>];</span>
</span></span><span class=line><span class=cl>                <span class=o>}</span>
</span></span><span class=line><span class=cl>                <span class=k>while</span> <span class=o>(</span><span class=n>i</span> <span class=o>&lt;</span> <span class=n>len</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                    <span class=kt>char</span> <span class=n>c</span> <span class=o>=</span> <span class=n>val</span><span class=o>[</span><span class=n>i</span><span class=o>];</span>
</span></span><span class=line><span class=cl>                    <span class=n>buf</span><span class=o>[</span><span class=n>i</span><span class=o>]</span> <span class=o>=</span> <span class=o>(</span><span class=n>c</span> <span class=o>==</span> <span class=n>oldChar</span><span class=o>)</span> <span class=o>?</span> <span class=n>newChar</span> <span class=o>:</span> <span class=n>c</span><span class=o>;</span><span class=c1>//把原字符替换为新字符
</span></span></span><span class=line><span class=cl><span class=c1></span>                    <span class=n>i</span><span class=o>++;</span>
</span></span><span class=line><span class=cl>                <span class=o>}</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=k>new</span> <span class=n>String</span><span class=o>(</span><span class=n>buf</span><span class=o>,</span> <span class=kc>true</span><span class=o>);</span>
</span></span><span class=line><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=k>this</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span></code></pre></div><h4 id=boolean-matchesstring-regex判断正则表达式是否比配当前字符串>boolean matches(String regex)判断正则表达式是否比配当前字符串<a hidden class=anchor aria-hidden=true href=#boolean-matchesstring-regex判断正则表达式是否比配当前字符串>#</a></h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span> <span class=kt>boolean</span> <span class=nf>matches</span><span class=o>(</span><span class=n>String</span> <span class=n>regex</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>Pattern</span><span class=o>.</span><span class=na>matches</span><span class=o>(</span><span class=n>regex</span><span class=o>,</span> <span class=k>this</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span></code></pre></div><h4 id=boolean-containscharsequence-s判断当前字符串是否包含另一个字符序列>boolean contains(CharSequence s)判断当前字符串是否包含另一个字符序列<a hidden class=anchor aria-hidden=true href=#boolean-containscharsequence-s判断当前字符串是否包含另一个字符序列>#</a></h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span> <span class=kt>boolean</span> <span class=nf>contains</span><span class=o>(</span><span class=n>CharSequence</span> <span class=n>s</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>indexOf</span><span class=o>(</span><span class=n>s</span><span class=o>.</span><span class=na>toString</span><span class=o>())</span> <span class=o>&gt;</span> <span class=o>-</span><span class=mi>1</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span></code></pre></div><h4 id=string-trim去掉字符串前后的空格>String trim()去掉字符串前后的空格<a hidden class=anchor aria-hidden=true href=#string-trim去掉字符串前后的空格>#</a></h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span> <span class=n>String</span> <span class=nf>trim</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=kt>int</span> <span class=n>len</span> <span class=o>=</span> <span class=n>value</span><span class=o>.</span><span class=na>length</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=kt>int</span> <span class=n>st</span> <span class=o>=</span> <span class=mi>0</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=kt>char</span><span class=o>[]</span> <span class=n>val</span> <span class=o>=</span> <span class=n>value</span><span class=o>;</span>    <span class=cm>/* avoid getfield opcode */</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=c1>//找到字符串由前往后第一个不是空格的位置
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>while</span> <span class=o>((</span><span class=n>st</span> <span class=o>&lt;</span> <span class=n>len</span><span class=o>)</span> <span class=o>&amp;&amp;</span> <span class=o>(</span><span class=n>val</span><span class=o>[</span><span class=n>st</span><span class=o>]</span> <span class=o>&lt;=</span> <span class=sc>&#39; &#39;</span><span class=o>))</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=n>st</span><span class=o>++;</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>  <span class=c1>//找到字符串由后往前第一个不是空格的位置
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>while</span> <span class=o>((</span><span class=n>st</span> <span class=o>&lt;</span> <span class=n>len</span><span class=o>)</span> <span class=o>&amp;&amp;</span> <span class=o>(</span><span class=n>val</span><span class=o>[</span><span class=n>len</span> <span class=o>-</span> <span class=mi>1</span><span class=o>]</span> <span class=o>&lt;=</span> <span class=sc>&#39; &#39;</span><span class=o>))</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=n>len</span><span class=o>--;</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=o>((</span><span class=n>st</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=o>)</span> <span class=o>||</span> <span class=o>(</span><span class=n>len</span> <span class=o>&lt;</span> <span class=n>value</span><span class=o>.</span><span class=na>length</span><span class=o>))</span> <span class=o>?</span> <span class=n>substring</span><span class=o>(</span><span class=n>st</span><span class=o>,</span> <span class=n>len</span><span class=o>)</span> <span class=o>:</span> <span class=k>this</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span></code></pre></div><h4 id=char-tochararray把字符串转换成字符数组>char[] toCharArray()把字符串转换成字符数组<a hidden class=anchor aria-hidden=true href=#char-tochararray把字符串转换成字符数组>#</a></h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span> <span class=kt>char</span><span class=o>[]</span> <span class=nf>toCharArray</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// Cannot use Arrays.copyOf because of class initialization order issues
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=kt>char</span> <span class=n>result</span><span class=o>[]</span> <span class=o>=</span> <span class=k>new</span> <span class=kt>char</span><span class=o>[</span><span class=n>value</span><span class=o>.</span><span class=na>length</span><span class=o>];</span>
</span></span><span class=line><span class=cl>  <span class=c1>//使用System.arraycopy方法拷贝
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=n>System</span><span class=o>.</span><span class=na>arraycopy</span><span class=o>(</span><span class=n>value</span><span class=o>,</span> <span class=mi>0</span><span class=o>,</span> <span class=n>result</span><span class=o>,</span> <span class=mi>0</span><span class=o>,</span> <span class=n>value</span><span class=o>.</span><span class=na>length</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>result</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span></code></pre></div><h3 id=本地方法>本地方法<a hidden class=anchor aria-hidden=true href=#本地方法>#</a></h3><h4 id=native-string-intern获取字符串所指向的字符串常量池中对象的地址>native String intern();获取字符串所指向的字符串常量池中对象的地址<a hidden class=anchor aria-hidden=true href=#native-string-intern获取字符串所指向的字符串常量池中对象的地址>#</a></h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@Test</span>
</span></span><span class=line><span class=cl>	<span class=kd>public</span> <span class=kt>void</span> <span class=nf>test8</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>		<span class=n>String</span> <span class=n>s1</span><span class=o>=</span><span class=s>&#34;abc&#34;</span><span class=o>;</span>
</span></span><span class=line><span class=cl>		<span class=n>String</span> <span class=n>s2</span><span class=o>=</span><span class=k>new</span> <span class=n>String</span><span class=o>(</span><span class=s>&#34;abc&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>		<span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>s1</span><span class=o>==</span><span class=n>s2</span><span class=o>);</span><span class=c1>//false
</span></span></span><span class=line><span class=cl><span class=c1></span>		<span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>s1</span><span class=o>==</span><span class=n>s2</span><span class=o>.</span><span class=na>intern</span><span class=o>());</span><span class=c1>//true
</span></span></span><span class=line><span class=cl><span class=c1></span>	<span class=o>}</span>
</span></span></code></pre></div><p>使用s1=&ldquo;abc"这种方式栈中变量s1直接指向字符串常量池中的常量“abc”，而s2=new String(&ldquo;abc&rdquo;)这种方式，栈中变量s2指向的是对中一个变量t，t指向字符串常量池中的“abc”，所以s1和s2指向的地址不相同</p><p>s2.intern()获取的是字符串的常量池中的地址，也就是如果变量直接指向常量池，那么就是变量的地址，如果变量指向堆，那么会获取堆所指向字符串常量池中的地址</p><p><img loading=lazy src=images/Snipaste_2020-04-27_18-16-42.jpg alt></p></div><footer class=post-footer><ul class=post-tags></ul></footer></article></main><footer class=footer><span>&copy; 2022 <a href=https://moyuduo.github.io/>Moyuduo's Blog</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>